import{j as e,m as y,A as K}from"./animations-BBhkCnKM.js";import{a as m,u as xe,L as C}from"./vendor-DFUjLr5F.js";import{L as O,T as q,R as ee,H as $,B as he,C as pe,a as te,S as G,X as Q,M as ge,b as be,I as fe,Y as ve,G as ye,E as U,c as je,d as we,e as B,F as S,V as Ne,A as se,U as H,P as re,f as ke,g as Ce,h as ae,i as Y,j as ie,k as _e,l as W,m as Se,n as Ee,o as R,p as z,q as De,r as Te,s as Ue,t as Ie,D as Ae,u as Me,v as Pe,w as X,x as Fe,y as Le,z as Oe,J as qe}from"./ui-DW6GjoMB.js";import{c as Ge}from"./supabase-BdHe3KC0.js";const Qe="https://bgjengudzfickgomjqmz.supabase.co",Be="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJnamVuZ3VkemZpY2tnb21qcW16Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU2MTI3NjcsImV4cCI6MjA3MTE4ODc2N30.kYQ2oFuQBGmu4V_dnj_1zDMDVsd-qpDZJwNvswzO6M0",h=Ge(Qe,Be,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:10}}}),j={async getCurrentUser(){const{data:{user:t},error:s}=await h.auth.getUser();return{user:t,error:s}},async signIn(t,s){const{data:a,error:u}=await h.auth.signInWithPassword({email:t,password:s});return{data:a,error:u}},async signOut(){const{error:t}=await h.auth.signOut();return{error:t}},async safeQuery(t){try{const s=await t();return s.error?(console.error("Supabase query error:",s.error),{data:null,error:s.error}):s}catch(s){return console.error("Unexpected error in Supabase query:",s),{data:null,error:s}}},async testConnection(){try{const{data:t,error:s}=await h.from("events").select("id").limit(1);return{connected:!s,error:s}}catch(t){return{connected:!1,error:t}}},async getEvents(t={}){let s=h.from("events").select("*").order("event_date",{ascending:!0});return t.status&&(s=s.eq("status",t.status)),t.category&&(s=s.ilike("tags",`%${t.category}%`)),t.location&&(s=s.ilike("location",`%${t.location}%`)),t.limit&&(s=s.limit(t.limit)),t.offset&&(s=s.range(t.offset,t.offset+(t.limit||20)-1)),this.safeQuery(()=>s)},async createEvent(t){return this.safeQuery(()=>h.from("events").insert(t).select().single())},async updateEvent(t,s){return this.safeQuery(()=>h.from("events").update(s).eq("id",t).select().single())},async deleteEvent(t){return this.safeQuery(()=>h.from("events").delete().eq("id",t))},async getArticles(t={}){let s=h.from("newsroom_articles").select("*").order("published_at",{ascending:!1});return t.status&&(s=s.eq("status",t.status)),t.category&&(s=s.eq("category",t.category)),t.featured!==void 0&&(s=s.eq("featured",t.featured)),t.limit&&(s=s.limit(t.limit)),t.offset&&(s=s.range(t.offset,t.offset+(t.limit||20)-1)),this.safeQuery(()=>s)},async createArticle(t){return this.safeQuery(()=>h.from("newsroom_articles").insert(t).select().single())},async updateArticle(t,s){return this.safeQuery(()=>h.from("newsroom_articles").update(s).eq("id",t).select().single())},async deleteArticle(t){return this.safeQuery(()=>h.from("newsroom_articles").delete().eq("id",t))},async getContacts(t={}){let s=h.from("contacts").select("*").order("created_at",{ascending:!1});return t.verified!==void 0&&(s=s.eq("verified",t.verified)),t.limit&&(s=s.limit(t.limit)),this.safeQuery(()=>s)},async createContact(t){return this.safeQuery(()=>h.from("contacts").insert(t).select().single())},subscribeToEvents(t){return h.channel("events-changes").on("postgres_changes",{event:"*",schema:"public",table:"events"},s=>{console.log("🔴 Event change detected:",s),t(s)}).subscribe()},subscribeToArticles(t){return h.channel("articles-changes").on("postgres_changes",{event:"*",schema:"public",table:"newsroom_articles"},s=>{console.log("📰 Article change detected:",s),t(s)}).subscribe()},async getCommunityStats(){const[t,s,a]=await Promise.all([this.safeQuery(()=>h.from("events").select("status, event_date")),this.safeQuery(()=>h.from("newsroom_articles").select("status, category")),this.safeQuery(()=>h.from("contacts").select("verified"))]),u=new Date().toISOString().split("T")[0];return{events:{total:t.data?.length||0,published:t.data?.filter(d=>d.status==="published").length||0,upcoming:t.data?.filter(d=>d.status==="published"&&d.event_date>=u).length||0},articles:{total:s.data?.length||0,published:s.data?.filter(d=>d.status==="published").length||0,byCategory:s.data?.reduce((d,o)=>(d[o.category]=(d[o.category]||0)+1,d),{})||{}},community:{totalContacts:a.data?.length||0,verifiedContacts:a.data?.filter(d=>d.verified).length||0}}},async uploadFile(t,s="articles"){const a=t.name.split(".").pop(),u=`${Math.random()}.${a}`,d=`${s}/${u}`,{data:o,error:c}=await h.storage.from("media").upload(d,t);if(c)return{data:null,error:c};const{data:{publicUrl:i}}=h.storage.from("media").getPublicUrl(d);return{data:{path:d,url:i},error:null}},async getGovernanceProposals(t={}){let s=h.from("governance_proposals_with_votes").select("*").order("created_at",{ascending:!1});return t.status&&(s=s.eq("status",t.status)),t.category&&(s=s.eq("category",t.category)),t.limit&&(s=s.limit(t.limit)),t.offset&&(s=s.range(t.offset,t.offset+(t.limit||20)-1)),this.safeQuery(()=>s)},async createGovernanceProposal(t){const{user:s}=await this.getCurrentUser();if(!s)return{data:null,error:{message:"User must be authenticated to create proposals"}};const a={...t,proposer_id:s.id};return this.safeQuery(()=>h.from("governance_proposals").insert(a).select().single())},async updateGovernanceProposal(t,s){return this.safeQuery(()=>h.from("governance_proposals").update(s).eq("id",t).select().single())},async voteOnProposal(t,s,a){const{user:u}=await this.getCurrentUser();if(!u)return{data:null,error:{message:"User must be authenticated to vote"}};const d={proposal_id:t,voter_id:u.id,vote:s,comment:a};return this.safeQuery(()=>h.from("proposal_votes").upsert(d,{onConflict:"proposal_id,voter_id"}).select().single())},async getCommunityMeetings(t={}){let s=h.from("community_meetings").select("*").order("date",{ascending:!1});return t.type&&(s=s.eq("type",t.type)),t.status&&(s=s.eq("status",t.status)),t.limit&&(s=s.limit(t.limit)),t.offset&&(s=s.range(t.offset,t.offset+(t.limit||20)-1)),this.safeQuery(()=>s)},async createCommunityMeeting(t){const{user:s}=await this.getCurrentUser(),a={...t,created_by:s?.id};return this.safeQuery(()=>h.from("community_meetings").insert(a).select().single())},async updateCommunityMeeting(t,s){return this.safeQuery(()=>h.from("community_meetings").update(s).eq("id",t).select().single())},async getGovernanceDocuments(t={}){let s=h.from("governance_documents").select("*").order("uploaded_date",{ascending:!1});return t.type&&(s=s.eq("type",t.type)),t.status&&(s=s.eq("status",t.status)),t.meetingId&&(s=s.eq("meeting_id",t.meetingId)),t.proposalId&&(s=s.eq("proposal_id",t.proposalId)),t.limit&&(s=s.limit(t.limit)),t.offset&&(s=s.range(t.offset,t.offset+(t.limit||20)-1)),this.safeQuery(()=>s)},async uploadGovernanceDocument(t){const{user:s}=await this.getCurrentUser(),a={...t,uploaded_by:s?.id,uploaded_by_name:s?.user_metadata?.full_name||s?.email||"Unknown User"};return this.safeQuery(()=>h.from("governance_documents").insert(a).select().single())},async updateGovernanceDocument(t,s){return this.safeQuery(()=>h.from("governance_documents").update(s).eq("id",t).select().single())},async deleteGovernanceDocument(t){return this.safeQuery(()=>h.from("governance_documents").delete().eq("id",t))},async getCommunityMembers(t={}){let s=h.from("community_members").select("*").order("contribution_score",{ascending:!1});return t.role&&(s=s.eq("role",t.role)),t.verified!==void 0&&(s=s.eq("verified",t.verified)),t.limit&&(s=s.limit(t.limit)),t.offset&&(s=s.range(t.offset,t.offset+(t.limit||20)-1)),this.safeQuery(()=>s)},async updateCommunityMember(t,s){return this.safeQuery(()=>h.from("community_members").update(s).eq("id",t).select().single())},async getProposalDiscussions(t){return this.safeQuery(()=>h.from("proposal_discussions").select("*").eq("proposal_id",t).order("created_at",{ascending:!0}))},async createProposalDiscussion(t){const{user:s}=await this.getCurrentUser(),a={...t,user_id:s?.id,user_name:s?.user_metadata?.full_name||s?.email||"Anonymous"};return this.safeQuery(()=>h.from("proposal_discussions").insert(a).select().single())},subscribeToProposals(t){return h.channel("governance-proposals-changes").on("postgres_changes",{event:"*",schema:"public",table:"governance_proposals"},s=>{console.log("🏛️ Governance proposal change detected:",s),t(s)}).on("postgres_changes",{event:"*",schema:"public",table:"proposal_votes"},s=>{console.log("🗳️ Proposal vote change detected:",s),t(s)}).subscribe()},subscribeToMeetings(t){return h.channel("community-meetings-changes").on("postgres_changes",{event:"*",schema:"public",table:"community_meetings"},s=>{console.log("📅 Community meeting change detected:",s),t(s)}).subscribe()},subscribeToDocuments(t){return h.channel("governance-documents-changes").on("postgres_changes",{event:"*",schema:"public",table:"governance_documents"},s=>{console.log("📄 Governance document change detected:",s),t(s)}).subscribe()},subscribeToDiscussions(t,s){return h.channel(`proposal-discussions-${t}`).on("postgres_changes",{event:"*",schema:"public",table:"proposal_discussions",filter:`proposal_id=eq.${t}`},a=>{console.log("💬 Proposal discussion change detected:",a),s(a)}).subscribe()},async getGovernanceStats(){const[t,s,a,u]=await Promise.all([this.safeQuery(()=>h.rpc("calculate_proposal_stats")),this.safeQuery(()=>h.from("community_members").select("role, verified, contribution_score")),this.safeQuery(()=>h.from("community_meetings").select("status, type, date")),this.safeQuery(()=>h.from("governance_documents").select("type, status, is_public"))]),d=new Date().toISOString().split("T")[0];return{proposals:t.data?.[0]||{total_proposals:0,active_proposals:0,approved_proposals:0,average_participation:0,total_eligible_voters:0},members:{total:s.data?.length||0,verified:s.data?.filter(o=>o.verified).length||0,byRole:s.data?.reduce((o,c)=>(o[c.role]=(o[c.role]||0)+1,o),{})||{},averageContribution:s.data?.reduce((o,c)=>o+(c.contribution_score||0),0)/(s.data?.length||1)||0},meetings:{total:a.data?.length||0,completed:a.data?.filter(o=>o.status==="completed").length||0,upcoming:a.data?.filter(o=>o.status==="scheduled"&&o.date>=d).length||0,byType:a.data?.reduce((o,c)=>(o[c.type]=(o[c.type]||0)+1,o),{})||{}},documents:{total:u.data?.length||0,published:u.data?.filter(o=>o.status==="published").length||0,public:u.data?.filter(o=>o.is_public).length||0,byType:u.data?.reduce((o,c)=>(o[c.type]=(o[c.type]||0)+1,o),{})||{}}}}},rt=(t={})=>{const[s,a]=m.useState([]),[u,d]=m.useState(!0),[o,c]=m.useState(null),i=m.useCallback(async()=>{try{d(!0),c(null);const p=await j.getEvents(t);if(p.error)throw new Error(p.error.message||"Failed to fetch events");a(p.data||[])}catch(p){c(p instanceof Error?p.message:"Unknown error")}finally{d(!1)}},[JSON.stringify(t)]);return m.useEffect(()=>{i();const p=j.subscribeToEvents(()=>{i()});return()=>{p.unsubscribe()}},[i]),{events:s,loading:u,error:o,refetch:i,createEvent:async p=>{try{const b=await j.createEvent(p);if(b.error)throw new Error(b.error.message||"Failed to create event");return await i(),b.data}catch(b){throw b}},updateEvent:async(p,b)=>{try{const v=await j.updateEvent(p,b);if(v.error)throw new Error(v.error.message||"Failed to update event");return await i(),v.data}catch(v){throw v}},deleteEvent:async p=>{try{const b=await j.deleteEvent(p);if(b.error)throw new Error(b.error.message||"Failed to delete event");await i()}catch(b){throw b}}}},at=(t={})=>{const[s,a]=m.useState([]),[u,d]=m.useState(!0),[o,c]=m.useState(null),i=m.useCallback(async()=>{try{d(!0),c(null);const p=await j.getArticles(t);if(p.error)throw new Error(p.error.message||"Failed to fetch articles");a(p.data||[])}catch(p){c(p instanceof Error?p.message:"Unknown error")}finally{d(!1)}},[JSON.stringify(t)]);return m.useEffect(()=>{i();const p=j.subscribeToArticles(()=>{i()});return()=>{p.unsubscribe()}},[i]),{articles:s,loading:u,error:o,refetch:i,createArticle:async p=>{try{const b=await j.createArticle(p);if(b.error)throw new Error(b.error.message||"Failed to create article");return await i(),b.data}catch(b){throw b}},updateArticle:async(p,b)=>{try{const v=await j.updateArticle(p,b);if(v.error)throw new Error(v.error.message||"Failed to update article");return await i(),v.data}catch(v){throw v}},deleteArticle:async p=>{try{const b=await j.deleteArticle(p);if(b.error)throw new Error(b.error.message||"Failed to delete article");await i()}catch(b){throw b}}}},Re=(t={})=>{const[s,a]=m.useState([]),[u,d]=m.useState(!0),[o,c]=m.useState(null),i=m.useCallback(async()=>{try{d(!0),c(null);const x=await j.getGovernanceProposals(t);if(x.error)throw new Error(x.error.message||"Failed to fetch proposals");a(x.data||[])}catch(x){c(x instanceof Error?x.message:"Unknown error")}finally{d(!1)}},[t]);return m.useEffect(()=>{i();const x=j.subscribeToProposals(()=>{i()});return()=>{x.unsubscribe()}},[i]),{proposals:s,loading:u,error:o,refetch:i,createProposal:async x=>{try{const p=await j.createGovernanceProposal(x);if(p.error)throw new Error(p.error.message||"Failed to create proposal");return await i(),p.data}catch(p){throw p}},voteOnProposal:async(x,p,b)=>{try{const v=await j.voteOnProposal(x,p,b);if(v.error)throw new Error(v.error.message||"Failed to vote on proposal");return await i(),v.data}catch(v){throw v}}}},ze=(t={})=>{const[s,a]=m.useState([]),[u,d]=m.useState(!0),[o,c]=m.useState(null),i=m.useCallback(async()=>{try{d(!0),c(null);const n=await j.getCommunityMeetings(t);if(n.error)throw new Error(n.error.message||"Failed to fetch meetings");a(n.data||[])}catch(n){c(n instanceof Error?n.message:"Unknown error")}finally{d(!1)}},[t]);return m.useEffect(()=>{i();const n=j.subscribeToMeetings(()=>{i()});return()=>{n.unsubscribe()}},[i]),{meetings:s,loading:u,error:o,refetch:i}},Ve=(t={})=>{const[s,a]=m.useState([]),[u,d]=m.useState(!0),[o,c]=m.useState(null),i=m.useCallback(async()=>{try{d(!0),c(null);const g=await j.getGovernanceDocuments(t);if(g.error)throw new Error(g.error.message||"Failed to fetch documents");a(g.data||[])}catch(g){c(g instanceof Error?g.message:"Unknown error")}finally{d(!1)}},[t]);return m.useEffect(()=>{i();const g=j.subscribeToDocuments(()=>{i()});return()=>{g.unsubscribe()}},[i]),{documents:s,loading:u,error:o,refetch:i,uploadDocument:async g=>{try{const x=await j.uploadGovernanceDocument(g);if(x.error)throw new Error(x.error.message||"Failed to upload document");return await i(),x.data}catch(x){throw x}}}},$e=(t={})=>{const[s,a]=m.useState([]),[u,d]=m.useState(!0),[o,c]=m.useState(null),i=m.useCallback(async()=>{try{d(!0),c(null);const n=await j.getCommunityMembers(t);if(n.error)throw new Error(n.error.message||"Failed to fetch community members");a(n.data||[])}catch(n){c(n instanceof Error?n.message:"Unknown error")}finally{d(!1)}},[t]);return m.useEffect(()=>{i()},[i]),{members:s,loading:u,error:o,refetch:i}},Je=()=>{const[t,s]=m.useState(null),[a,u]=m.useState(!0),[d,o]=m.useState(null),c=m.useCallback(async()=>{try{u(!0),o(null);const i=await j.getGovernanceStats();s(i)}catch(i){o(i instanceof Error?i.message:"Failed to fetch governance stats")}finally{u(!1)}},[]);return m.useEffect(()=>{c();const i=setInterval(c,300*1e3);return()=>clearInterval(i)},[c]),{stats:t,loading:a,error:d,refetch:c}},He=()=>{const[t,s]=m.useState(!1),[a,u]=m.useState(null);return{uploadFile:async(o,c="governance")=>{try{if(s(!0),u(null),o.size>10*1024*1024)throw new Error("File too large. Please keep under 10MB for governance documents.");if(c==="governance"&&!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","text/markdown"].includes(o.type))throw new Error("Only PDF, DOC, DOCX, TXT, and MD files are supported for governance documents.");const n=await j.uploadFile(o,c);if(n.error)throw new Error(n.error.message||"Failed to upload file");return n.data}catch(i){throw u(i instanceof Error?i.message:"Upload failed"),i}finally{s(!1)}},uploading:t,error:a}},Ye={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"},F={indigo:"text-indigo-400 border-indigo-400",emerald:"text-emerald-400 border-emerald-400",yellow:"text-yellow-400 border-yellow-400",violet:"text-violet-400 border-violet-400",amber:"text-amber-400 border-amber-400"},V=({size:t="md",variant:s="default",color:a="indigo",text:u,fullScreen:d=!1,className:o=""})=>{const c=()=>{const n=`${Ye[t]} ${F[a]} ${o}`;switch(s){case"pulse":return e.jsx(y.div,{className:`${n} rounded-full bg-current`,animate:{scale:[1,1.2,1],opacity:[.7,1,.7]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}});case"dots":return e.jsx("div",{className:"flex space-x-1",children:[0,1,2].map(g=>e.jsx(y.div,{className:`w-2 h-2 ${F[a].split(" ")[0]} rounded-full bg-current`,animate:{y:[0,-8,0],opacity:[.7,1,.7]},transition:{duration:.6,repeat:1/0,delay:g*.1,ease:"easeInOut"}},g))});case"spinner":return e.jsx(y.div,{className:`${n} border-2 border-current border-t-transparent rounded-full`,animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}});default:return e.jsx(y.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:e.jsx(O,{className:n})})}},i=e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[c(),u&&e.jsx(y.p,{className:`text-sm font-medium ${F[a].split(" ")[0]} uppercase tracking-wider`,initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:u})]});return d?e.jsx(y.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsx("div",{className:"bg-gray-900/90 backdrop-blur-sm border border-gray-700/40 rounded-2xl p-8",children:i})}):i};class L extends m.Component{constructor(s){super(s),this.state={hasError:!1}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,a){console.error("Error caught by boundary:",s,a),this.setState({error:s,errorInfo:a}),this.props.onError&&this.props.onError(s,a)}handleRetry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})};handleGoHome=()=>{window.location.href="/"};handleReportError=()=>{const s={error:this.state.error?.message,stack:this.state.error?.stack,componentStack:this.state.errorInfo?.componentStack,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href};console.error("Error Report:",s),alert("Error report logged to console. Please contact support if the issue persists.")};render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-950 via-red-900 to-gray-900 flex items-center justify-center px-4",children:e.jsxs(y.div,{className:"max-w-2xl w-full bg-red-900/30 backdrop-blur-sm border border-red-700/30 rounded-2xl overflow-hidden",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsx("div",{className:"bg-red-800/30 px-8 py-6 border-b border-red-700/30",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-red-600/30 rounded-2xl flex items-center justify-center",children:e.jsx(q,{className:"w-8 h-8 text-red-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white heading-block uppercase",children:"Something Went Wrong"}),e.jsx("p",{className:"text-red-200 mt-1",children:"The application encountered an unexpected error"})]})]})}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"What happened?"}),e.jsx("div",{className:"bg-red-800/20 border border-red-600/30 rounded-lg p-4",children:e.jsx("p",{className:"text-red-200 text-sm font-mono",children:this.state.error?.message||"An unknown error occurred"})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"What can you do?"}),e.jsxs("ul",{className:"text-red-200 space-y-2",children:[e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"w-2 h-2 bg-red-400 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"Try refreshing the page or retrying the action"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"w-2 h-2 bg-red-400 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"Check your internet connection"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"w-2 h-2 bg-red-400 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"Contact support if the problem persists"})]})]})]}),!1]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-8 pt-6 border-t border-red-700/30",children:[e.jsxs(y.button,{onClick:this.handleRetry,className:"flex items-center justify-center px-6 py-3 bg-red-600 hover:bg-red-500 text-white font-semibold rounded-lg transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(ee,{className:"w-5 h-5 mr-2"}),"Try Again"]}),e.jsxs(y.button,{onClick:this.handleGoHome,className:"flex items-center justify-center px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white font-semibold rounded-lg transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx($,{className:"w-5 h-5 mr-2"}),"Go Home"]}),e.jsxs(y.button,{onClick:this.handleReportError,className:"flex items-center justify-center px-6 py-3 bg-transparent border border-red-600/50 hover:bg-red-600/10 text-red-300 font-semibold rounded-lg transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(he,{className:"w-5 h-5 mr-2"}),"Report Issue"]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-red-700/30 text-center",children:e.jsx("p",{className:"text-red-300 text-sm",children:"If this error persists, please contact the BLKOUT technical team"})})]})]})}):this.props.children}}function ne({pageName:t,dependencies:s,onDependencyTest:a}){const[u,d]=m.useState(!1),[o,c]=m.useState([]);m.useEffect(()=>{const x=s.map(b=>({name:b,status:"checking"}));c(x),(async()=>{for(const b of s)try{let v=!0;if(b==="Supabase"){const k="https://bgjengudzfickgomjqmz.supabase.co",w="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJnamVuZ3VkemZpY2tnb21qcW16Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU2MTI3NjcsImV4cCI6MjA3MTE4ODc2N30.kYQ2oFuQBGmu4V_dnj_1zDMDVsd-qpDZJwNvswzO6M0";v=(await fetch(`${k}/rest/v1/`,{headers:{apikey:w,Authorization:`Bearer ${w}`}})).ok}else b==="API Client"?v=(await fetch("/api/health").catch(()=>({ok:!1}))).ok:a&&(v=await a(b));c(k=>k.map(w=>w.name===b?{...w,status:v?"success":"failed"}:w))}catch(v){c(k=>k.map(w=>w.name===b?{...w,status:"failed",error:v instanceof Error?v.message:"Unknown error"}:w))}})()},[s,a]);const i=x=>{switch(x){case"checking":return e.jsx(O,{className:"w-4 h-4 animate-spin text-yellow-500"});case"success":return e.jsx(te,{className:"w-4 h-4 text-green-500"});case"failed":return e.jsx(pe,{className:"w-4 h-4 text-red-500"})}},n=o.some(x=>x.status==="failed"),g=o.some(x=>x.status==="checking");return!n&&!g?null:e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>d(!u),className:`fixed top-4 left-4 z-50 p-2 rounded-lg shadow-lg transition-all ${n?"bg-red-600 text-white":"bg-yellow-600 text-white"}`,children:n?e.jsx(q,{className:"w-5 h-5"}):e.jsx(O,{className:"w-5 h-5 animate-spin"})}),u&&e.jsxs("div",{className:"fixed top-16 left-4 right-4 md:right-auto md:w-96 bg-white border border-gray-300 rounded-lg shadow-xl z-40 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-bold text-gray-900",children:["Debug: ",t," Loading Issues"]}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:"×"})]}),e.jsx("div",{className:"space-y-3",children:o.map(x=>e.jsxs("div",{className:"flex items-center space-x-3",children:[i(x.status),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.name}),x.error&&e.jsx("div",{className:"text-xs text-red-600 mt-1",children:x.error})]})]},x.name))}),n&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(q,{className:"w-4 h-4 text-red-500 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-red-800",children:[e.jsx("div",{className:"font-medium",children:"Page Loading Issues Detected"}),e.jsx("div",{className:"mt-1",children:"This page may not function correctly due to dependency failures."})]})]})}),e.jsxs("div",{className:"mt-4 flex space-x-2",children:[e.jsxs("button",{onClick:()=>window.location.reload(),className:"flex items-center space-x-1 px-3 py-1.5 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{children:"Retry"})]}),e.jsx("button",{onClick:()=>window.history.back(),className:"px-3 py-1.5 bg-gray-200 text-gray-800 rounded text-sm hover:bg-gray-300",children:"Go Back"})]})]})]})}const Z=[{name:"Liberation Journey",href:"https://journey-blkout.vercel.app",description:"Interactive liberation storytelling experience",external:!0},{name:"Latest Issue",href:"/platform",description:"Current stories and featured content"},{name:"Story Archive",href:"/stories",description:"Complete archive of stories and analysis"},{name:"I.V.O.R.",href:"/ivor",description:"AI assistant and resource finder"},{name:"Events",href:"/events",description:"Community events calendar"},{name:"Newsroom",href:"/newsroom",description:"News analysis and community updates"},{name:"Governance",href:"/governance",description:"Community governance and cooperative democracy"},{name:"Our Movement",href:"/movement",description:"Movement principles and community values"},{name:"Join Discussion",href:"/discussions",description:"Community discussions and conversations"},{name:"Media",href:"/media",description:"Community media platforms",submenu:[{name:"Channel BLKOUT",href:"/media/channel",description:"Video content and live streaming"},{name:"Storylab",href:"/media/storylab",description:"Community storytelling platform"}]}];function We({className:t=""}){const[s,a]=m.useState(!1),[u,d]=m.useState(""),o=n=>{n.preventDefault(),u.trim()&&(window.location.href=`/stories?search=${encodeURIComponent(u.trim())}`)},c=xe(),i=n=>n==="/platform"?c.pathname==="/platform":c.pathname.startsWith(n);return e.jsx("nav",{role:"navigation","aria-label":"Main navigation",className:`bg-indigo-950 border-b border-indigo-800/30 sticky top-0 z-50 backdrop-blur-sm ${t}`,children:e.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8",children:[e.jsxs("div",{className:"flex items-center justify-between h-14 sm:h-16 lg:h-20",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs(C,{to:"/",className:"flex items-center space-x-2 text-white font-bold text-lg sm:text-xl lg:text-2xl hover:text-indigo-200 transition-colors focus-enhanced","aria-label":"BLKOUT Home",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-br from-electric-cyan to-electric-magenta rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-xs sm:text-sm font-black text-white",children:"B"})}),e.jsx("span",{className:"hidden sm:inline",children:"BLKOUT"})]})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-8",children:Z.map(n=>e.jsxs("div",{className:"relative group",children:[n.external?e.jsx("a",{href:n.href,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 text-sm font-medium text-indigo-200 hover:text-white hover:bg-indigo-800/30 rounded-md transition-colors duration-200 focus-enhanced",children:n.name}):e.jsx(C,{to:n.href,className:`px-3 py-2 text-sm font-medium transition-colors duration-200 focus-enhanced ${i(n.href)?"text-white bg-indigo-800/50 rounded-md":"text-indigo-200 hover:text-white hover:bg-indigo-800/30 rounded-md"}`,children:n.name}),n.children&&e.jsx("div",{className:"absolute left-0 mt-2 w-48 bg-white rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:e.jsx("div",{className:"py-1",children:n.children.map(g=>e.jsx(C,{to:g.href,className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900 transition-colors focus-enhanced",target:g.external?"_blank":void 0,rel:g.external?"noopener noreferrer":void 0,children:g.name},g.name))})})]},n.name))}),e.jsx("div",{className:"hidden lg:flex items-center space-x-4",children:e.jsxs("form",{onSubmit:o,className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search stories...",value:u,onChange:n=>d(n.target.value),className:"w-64 px-4 py-2 text-sm bg-indigo-900/50 border border-indigo-700 rounded-lg text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),e.jsx("button",{type:"submit",className:"absolute right-3 top-2.5 text-indigo-300 hover:text-white transition-colors",children:e.jsx(G,{className:"w-4 h-4"})})]})}),e.jsx("div",{className:"lg:hidden",children:e.jsx("button",{onClick:()=>a(!s),className:"touch-target text-indigo-200 hover:text-white focus-enhanced rounded-md","aria-expanded":s,"aria-label":"Toggle main menu",children:s?e.jsx(Q,{className:"w-5 h-5"}):e.jsx(ge,{className:"w-5 h-5"})})})]}),s&&e.jsx("div",{className:"lg:hidden border-t border-indigo-800/30",children:e.jsxs("div",{className:"py-4 space-y-1",children:[e.jsx("div",{className:"px-2 pb-4",children:e.jsxs("form",{onSubmit:o,className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search stories...",value:u,onChange:n=>d(n.target.value),className:"w-full px-4 py-3 text-sm bg-indigo-900/50 border border-indigo-700 rounded-lg text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),e.jsx("button",{type:"submit",className:"absolute right-3 top-3.5 text-indigo-300 hover:text-white transition-colors",children:e.jsx(G,{className:"w-4 h-4"})})]})}),Z.map(n=>e.jsxs("div",{children:[n.external?e.jsx("a",{href:n.href,target:"_blank",rel:"noopener noreferrer",className:"block px-4 py-3 text-base font-medium text-indigo-200 hover:text-white hover:bg-indigo-800/30 transition-colors duration-200 touch-target focus-enhanced",onClick:()=>a(!1),children:n.name}):e.jsx(C,{to:n.href,className:`block px-4 py-3 text-base font-medium transition-colors duration-200 touch-target focus-enhanced ${i(n.href)?"text-white bg-indigo-800/50 border-l-4 border-electric-cyan":"text-indigo-200 hover:text-white hover:bg-indigo-800/30"}`,onClick:()=>a(!1),children:n.name}),n.children&&e.jsx("div",{className:"pl-6 space-y-1",children:n.children.map(g=>e.jsx(C,{to:g.href,className:"block px-4 py-2 text-sm text-indigo-300 hover:text-white hover:bg-indigo-800/20 transition-colors touch-target focus-enhanced",target:g.external?"_blank":void 0,rel:g.external?"noopener noreferrer":void 0,onClick:()=>a(!1),children:g.name},g.name))})]},n.name)),e.jsxs("div",{className:"px-4 pt-4 border-t border-indigo-800/30 space-y-3",children:[e.jsx(C,{to:"/newsroom",className:"block w-full py-3 px-4 text-center text-sm font-medium text-white bg-gradient-to-r from-indigo-600 to-purple-600 rounded-lg hover:opacity-90 transition-opacity touch-target focus-enhanced",onClick:()=>a(!1),children:"📰 Read Newsroom"}),e.jsx(C,{to:"/community",className:"block w-full py-3 px-4 text-center text-sm font-medium text-white bg-gradient-to-r from-electric-cyan to-electric-magenta rounded-lg hover:opacity-90 transition-opacity touch-target focus-enhanced",onClick:()=>a(!1),children:"Join Community"})]})]})})]})})}function Xe(){return e.jsxs("footer",{className:"relative bg-gradient-to-br from-indigo-950 via-slate-950 to-indigo-900 border-t border-indigo-800/30",children:[e.jsxs("div",{className:"absolute inset-0 opacity-5",children:[e.jsx("div",{className:"absolute top-1/2 left-1/4 w-64 h-64 bg-indigo-500 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-1/3 w-48 h-48 bg-violet-500 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative max-w-7xl mx-auto px-8 py-16",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-16",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsxs("h3",{className:"text-3xl font-black text-white heading-block mb-4 uppercase",children:[e.jsx("span",{className:"bg-gradient-to-r from-indigo-400 to-violet-400 bg-clip-text text-transparent",children:"BLKOUT"}),e.jsx("span",{className:"bg-gradient-to-r from-emerald-400 to-blue-400 bg-clip-text text-transparent ml-2",children:"PLATFORM"})]}),e.jsx("p",{className:"text-lg text-indigo-200 mb-8 leading-relaxed font-light max-w-md",children:"Building liberation together through authentic community spaces, radical storytelling, and collective action for Black queer men."}),e.jsx("div",{className:"flex space-x-4",children:[{icon:be,label:"Twitter",href:"https://twitter.com/blkoutuk"},{icon:fe,label:"Instagram",href:"https://instagram.com/blkoutuk"},{icon:ve,label:"YouTube",href:"https://youtube.com/@blkoutuk"},{icon:ye,label:"GitHub",href:"https://github.com/blkoutuk"}].map((t,s)=>e.jsx(y.a,{href:t.href,target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.1,y:-2},className:"w-12 h-12 bg-indigo-800/50 hover:bg-indigo-700/70 border border-indigo-600/30 flex items-center justify-center transition-all duration-300","aria-label":t.label,children:e.jsx(t.icon,{className:"w-5 h-5 text-indigo-300"})},s))})]})}),e.jsx("div",{children:e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[e.jsx("h4",{className:"text-lg font-black text-white heading-block mb-6 uppercase",children:e.jsx("span",{className:"bg-gradient-to-r from-slate-400 to-indigo-400 bg-clip-text text-transparent",children:"PLATFORM"})}),e.jsx("ul",{className:"space-y-4",children:[{label:"Stories",href:"/stories"},{label:"Community",href:"/community"},{label:"Events",href:"/events"},{label:"I.V.O.R. Resources",href:"/ivor"},{label:"Media Hub",href:"/media"},{label:"Movement",href:"/movement"}].map((t,s)=>e.jsx("li",{children:e.jsxs(C,{to:t.href,className:"text-indigo-200 hover:text-white font-medium transition-colors duration-300 flex items-center group",children:[t.label,e.jsx(U,{className:"w-3 h-3 ml-2 opacity-0 group-hover:opacity-100 transition-opacity"})]})},s))})]})}),e.jsx("div",{children:e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[e.jsx("h4",{className:"text-lg font-black text-white heading-block mb-6 uppercase",children:e.jsx("span",{className:"bg-gradient-to-r from-emerald-400 to-violet-400 bg-clip-text text-transparent",children:"COMMUNITY"})}),e.jsxs("ul",{className:"space-y-4",children:[[{label:"Join BLKOUTHUB",href:"/community"},{label:"Discussions",href:"/discussions"},{label:"Newsletter",href:"#newsletter"},{label:"Support",href:"#support"},{label:"Governance",href:"/governance"}].map((t,s)=>e.jsx("li",{children:e.jsxs(C,{to:t.href,className:"text-indigo-200 hover:text-white font-medium transition-colors duration-300 flex items-center group",children:[t.label,e.jsx(U,{className:"w-3 h-3 ml-2 opacity-0 group-hover:opacity-100 transition-opacity"})]})},s)),e.jsx("li",{children:e.jsxs(C,{to:"/",className:"text-indigo-200 hover:text-white font-medium transition-colors duration-300 flex items-center group",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"About BLKOUT",e.jsx(U,{className:"w-3 h-3 ml-2 opacity-0 group-hover:opacity-100 transition-opacity"})]})})]})]})}),e.jsx("div",{children:e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.25},children:[e.jsx("h4",{className:"text-lg font-black text-white heading-block mb-6 uppercase",children:e.jsx("span",{className:"bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"MEDIA"})}),e.jsx("ul",{className:"space-y-4",children:[{label:"Channel BLKOUT",href:"/media/channel"},{label:"Storylab",href:"/media/storylab"},{label:"Newsroom",href:"/media/newsroom"},{label:"Media Hub",href:"/media"}].map((t,s)=>e.jsx("li",{children:e.jsxs(C,{to:t.href,className:"text-indigo-200 hover:text-white font-medium transition-colors duration-300 flex items-center group",children:[t.label,e.jsx(U,{className:"w-3 h-3 ml-2 opacity-0 group-hover:opacity-100 transition-opacity"})]})},s))})]})})]}),e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"border-t border-indigo-800/30 pt-12 mb-12",id:"newsletter",children:e.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[e.jsx("h4",{className:"text-2xl font-black text-white heading-block mb-4 uppercase",children:e.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-emerald-400 bg-clip-text text-transparent",children:"STAY CONNECTED"})}),e.jsx("p",{className:"text-indigo-200 mb-8 font-light",children:"Get the latest stories, resources, and community updates delivered to your inbox."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 max-w-md mx-auto",children:[e.jsx("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-6 py-3 bg-indigo-900/50 border border-indigo-700/50 text-white placeholder-indigo-300 focus:outline-none focus:border-indigo-500 font-light"}),e.jsxs(y.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"px-8 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white font-bold hover:from-indigo-500 hover:to-violet-500 transition-all heading-block uppercase flex items-center justify-center",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"SUBSCRIBE"]})]})]})}),e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"border-t border-indigo-800/30 pt-8 flex flex-col md:flex-row justify-between items-center",children:[e.jsx("div",{className:"text-indigo-300 text-sm font-light mb-4 md:mb-0",children:"© 2025 BLKOUT Platform. Building liberation together."}),e.jsx("div",{className:"flex items-center space-x-6 text-sm",children:[{label:"Terms",href:"#terms"},{label:"Privacy",href:"#privacy"},{label:"Accessibility",href:"#accessibility"},{label:"Contact",href:"#contact"}].map((t,s)=>e.jsx("a",{href:t.href,className:"text-indigo-300 hover:text-white transition-colors font-light",children:t.label},s))})]})]})]})}const Ze=["Black queer liberation first","Cooperative ownership","Authentic community building","Digital sovereignty","Trust-based development"],it=()=>{const[t,s]=m.useState("proposals"),[a,u]=m.useState("all"),[d,o]=m.useState(!1),{proposals:c,loading:i,error:n,voteOnProposal:g}=Re({category:a==="all"?void 0:a,limit:50}),{stats:x,loading:p}=Je(),{members:b,loading:v}=$e({verified:!0,limit:20});if(i||p||v)return e.jsx(L,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900 flex items-center justify-center",children:e.jsx(V,{size:"lg",color:"purple",text:"Loading governance dashboard..."})})});if(n)return e.jsx(L,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx(we,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Error Loading Governance Data"}),e.jsx("p",{className:"text-indigo-300",children:n})]})})});const k=l=>{switch(l){case"draft":return"text-gray-400 bg-gray-900/20";case"discussion":return"text-blue-400 bg-blue-900/20";case"voting":return"text-amber-400 bg-amber-900/20";case"approved":return"text-emerald-400 bg-emerald-900/20";case"rejected":return"text-red-400 bg-red-900/20";case"implemented":return"text-purple-400 bg-purple-900/20";default:return"text-gray-400 bg-gray-900/20"}},w=l=>{switch(l){case"policy":return z;case"budget":return R;case"platform":return Ee;case"community":return H;case"values":return W;default:return S}},T=l=>{switch(l){case"low":return"text-green-400";case"medium":return"text-yellow-400";case"high":return"text-orange-400";case"critical":return"text-red-400";default:return"text-gray-400"}};return e.jsxs(L,{children:[e.jsx(ne,{pageName:"Community Governance",dependencies:["Supabase","Governance Hooks","Community Members"]}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900",children:[e.jsx(We,{}),e.jsxs("section",{className:"relative py-20 bg-gradient-to-br from-purple-950 via-indigo-950 to-emerald-950 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-purple-500 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-48 h-48 bg-emerald-500 rounded-full blur-3xl animate-pulse"})]}),e.jsx("div",{className:"relative z-10 max-w-6xl mx-auto px-8 text-center",children:e.jsxs(y.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[e.jsxs("div",{className:"flex items-center justify-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-600 to-emerald-600 flex items-center justify-center mr-6",children:e.jsx(B,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-black heading-block uppercase",children:[e.jsx("span",{className:"bg-gradient-to-r from-purple-400 to-emerald-400 bg-clip-text text-transparent",children:"Community"}),e.jsx("span",{className:"bg-gradient-to-r from-emerald-400 to-indigo-400 bg-clip-text text-transparent ml-2",children:"Governance"})]}),e.jsx("p",{className:"text-purple-300 font-mono uppercase tracking-wider text-sm",children:"COOPERATIVE DEMOCRACY IN ACTION"})]})]}),e.jsx("p",{className:"text-xl md:text-2xl text-indigo-100 max-w-4xl mx-auto leading-relaxed font-light mb-8",children:"Our community makes decisions together. Every voice matters, every vote counts, and every decision is transparent. This is cooperative democracy built on trust, liberation, and collective power."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-purple-900/30 backdrop-blur-sm border border-purple-700/30 p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:x?.proposals?.active_proposals||0}),e.jsx("div",{className:"text-sm text-purple-300",children:"Active Proposals"})]}),e.jsxs("div",{className:"bg-emerald-900/30 backdrop-blur-sm border border-emerald-700/30 p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:x?.members?.verified||0}),e.jsx("div",{className:"text-sm text-emerald-300",children:"Verified Members"})]}),e.jsxs("div",{className:"bg-amber-900/30 backdrop-blur-sm border border-amber-700/30 p-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-white",children:[x?.proposals?.average_participation?.toFixed(1)||"0","%"]}),e.jsx("div",{className:"text-sm text-amber-300",children:"Participation Rate"})]}),e.jsxs("div",{className:"bg-indigo-900/30 backdrop-blur-sm border border-indigo-700/30 p-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-white",children:[((x?.documents?.public||0)/Math.max(x?.documents?.total||1,1)*100).toFixed(0),"%"]}),e.jsx("div",{className:"text-sm text-indigo-300",children:"Decision Transparency"})]})]})]})})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-8 py-12",children:[e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-8",children:e.jsx("nav",{className:"flex space-x-1 bg-indigo-900/30 backdrop-blur-sm border border-indigo-700/30 p-2",children:[{id:"proposals",label:"Active Proposals",icon:S},{id:"voting",label:"Current Votes",icon:Ne},{id:"decisions",label:"Past Decisions",icon:se},{id:"participation",label:"Member Participation",icon:H}].map(l=>e.jsxs("button",{onClick:()=>s(l.id),className:`flex items-center space-x-2 px-6 py-3 rounded-lg transition-all duration-300 ${t===l.id?"bg-purple-600 text-white shadow-lg":"text-indigo-200 hover:text-white hover:bg-indigo-800/50"}`,children:[e.jsx(l.icon,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:l.label})]},l.id))})}),e.jsxs(K,{mode:"wait",children:[t==="proposals"&&e.jsxs(y.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.5},children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-3xl font-black heading-block uppercase",children:e.jsx("span",{className:"bg-gradient-to-r from-purple-400 to-indigo-400 bg-clip-text text-transparent",children:"Community Proposals"})}),e.jsxs("button",{onClick:()=>o(!0),className:"bg-gradient-to-r from-purple-500 to-emerald-500 hover:from-purple-400 hover:to-emerald-400 text-white font-bold px-6 py-3 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center space-x-2",children:[e.jsx(re,{className:"w-5 h-5"}),e.jsx("span",{children:"New Proposal"})]})]}),e.jsx("div",{className:"mb-6 flex flex-wrap gap-3",children:["all","policy","budget","platform","community","values"].map(l=>e.jsx("button",{onClick:()=>u(l),className:`px-4 py-2 rounded-lg transition-all duration-300 ${a===l?"bg-purple-600 text-white":"bg-indigo-900/30 text-indigo-200 hover:bg-indigo-800/50 hover:text-white"}`,children:l.charAt(0).toUpperCase()+l.slice(1)},l))}),e.jsx("div",{className:"space-y-6",children:c&&c.length>0?c.filter(l=>a==="all"||l.category===a).map((l,D)=>{const f=w(l.category);return e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:D*.1},className:"bg-indigo-900/30 backdrop-blur-sm border border-indigo-700/30 p-6 hover:bg-indigo-800/30 transition-all duration-300 group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-600/20 flex items-center justify-center",children:e.jsx(f,{className:"w-6 h-6 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-1 group-hover:text-purple-300 transition-colors",children:l.title}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${k(l.status)}`,children:l.status.toUpperCase()}),e.jsxs("span",{className:"text-indigo-300",children:["by ",l.proposer_name||l.proposer]}),e.jsxs("span",{className:`${T(l.community_impact)} font-medium`,children:[l.community_impact.toUpperCase()," IMPACT"]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-indigo-300 mb-1",children:new Date(l.created_at).toLocaleDateString()}),l.voting_deadline&&e.jsxs("div",{className:"text-xs text-amber-400 font-medium",children:["Voting ends: ",new Date(l.voting_deadline).toLocaleDateString()]})]})]}),e.jsx("p",{className:"text-indigo-100 mb-4 line-clamp-2",children:l.description}),l.status==="voting"&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-indigo-300",children:"Voting Progress"}),e.jsxs("span",{className:"text-sm text-indigo-300",children:[l.participation_rate?.toFixed(1)||"0","% participation"]})]}),e.jsx("div",{className:"w-full bg-indigo-900/50 rounded-full h-2 mb-3",children:e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-purple-500 h-2 rounded-full transition-all duration-500",style:{width:`${l.participation_rate||0}%`}})}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ke,{className:"w-4 h-4 text-emerald-400"}),e.jsx("span",{className:"text-emerald-400 font-medium",children:l.votes_for||0})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ce,{className:"w-4 h-4 text-red-400"}),e.jsx("span",{className:"text-red-400 font-medium",children:l.votes_against||0})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ae,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-400 font-medium",children:l.votes_abstain||0})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Y,{className:"w-4 h-4 text-indigo-400"}),e.jsxs("span",{className:"text-indigo-400",children:[l.discussion_count||0," comments"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{className:"bg-purple-600/20 hover:bg-purple-600/30 text-purple-300 px-4 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[e.jsx(ie,{className:"w-4 h-4"}),e.jsx("span",{children:"View Details"})]}),e.jsxs("button",{className:"bg-indigo-600/20 hover:bg-indigo-600/30 text-indigo-300 px-4 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{children:"Join Discussion"})]})]}),l.status==="voting"&&e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>g(l.id,"for"),className:"bg-emerald-600/20 hover:bg-emerald-600/30 text-emerald-300 px-4 py-2 rounded-lg transition-colors",children:"Support"}),e.jsx("button",{onClick:()=>g(l.id,"against"),className:"bg-red-600/20 hover:bg-red-600/30 text-red-300 px-4 py-2 rounded-lg transition-colors",children:"Oppose"})]})]})]},l.id)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(S,{className:"w-16 h-16 text-indigo-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No proposals found"}),e.jsx("p",{className:"text-indigo-300 mb-4",children:"Be the first to submit a proposal to help shape our community's future."}),e.jsx("button",{onClick:()=>o(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-lg transition-colors",children:"Submit First Proposal"})]})})]},"proposals"),t==="participation"&&e.jsxs(y.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.5},children:[e.jsx("h2",{className:"text-3xl font-black heading-block uppercase mb-8",children:e.jsx("span",{className:"bg-gradient-to-r from-emerald-400 to-indigo-400 bg-clip-text text-transparent",children:"Community Participation"})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-indigo-900/30 backdrop-blur-sm border border-indigo-700/30 p-6 mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[e.jsx(_e,{className:"w-6 h-6 text-emerald-400 mr-3"}),"Participation Metrics"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-emerald-400",children:[x?.proposals?.average_participation?.toFixed(1)||"0","%"]}),e.jsx("div",{className:"text-sm text-indigo-300",children:"Average Participation"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-400",children:x?.members?.verified||0}),e.jsx("div",{className:"text-sm text-indigo-300",children:"Active Members"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-indigo-300",children:"Policy Decisions"}),e.jsx("span",{className:"text-white font-medium",children:"84%"})]}),e.jsx("div",{className:"w-full bg-indigo-900/50 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-purple-500 h-2 rounded-full",style:{width:"84%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-indigo-300",children:"Budget Votes"}),e.jsx("span",{className:"text-white font-medium",children:"67%"})]}),e.jsx("div",{className:"w-full bg-indigo-900/50 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-purple-500 h-2 rounded-full",style:{width:"67%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-indigo-300",children:"Community Proposals"}),e.jsx("span",{className:"text-white font-medium",children:"91%"})]}),e.jsx("div",{className:"w-full bg-indigo-900/50 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-purple-500 h-2 rounded-full",style:{width:"91%"}})})]})]})]}),e.jsxs("div",{className:"bg-emerald-900/30 backdrop-blur-sm border border-emerald-700/30 p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[e.jsx(W,{className:"w-6 h-6 text-emerald-400 mr-3"}),"Community Values in Action"]}),e.jsx("div",{className:"space-y-3",children:Ze.map((l,D)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(te,{className:"w-5 h-5 text-emerald-400"}),e.jsx("span",{className:"text-emerald-100 font-medium",children:l})]},D))})]})]}),e.jsxs("div",{className:"bg-indigo-900/30 backdrop-blur-sm border border-indigo-700/30 p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[e.jsx(Se,{className:"w-6 h-6 text-indigo-400 mr-3"}),"Community Leaders"]}),e.jsx("div",{className:"space-y-4",children:b.map(l=>e.jsxs("div",{className:"border border-indigo-700/20 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"font-medium text-white",children:l.name}),e.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${l.role==="council"?"bg-purple-600/20 text-purple-300":l.role==="moderator"?"bg-emerald-600/20 text-emerald-300":"bg-indigo-600/20 text-indigo-300"}`,children:l.role.toUpperCase()})]}),e.jsxs("div",{className:"text-sm text-indigo-300 mb-2",children:["Contribution Score: ",l.contribution_score]}),e.jsxs("div",{className:"text-xs text-indigo-400",children:["Last active: ",new Date(l.last_active).toLocaleDateString()]})]},l.id))})]})]})]},"participation")]}),e.jsx(y.section,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.8,delay:.8},className:"mt-16 bg-gradient-to-br from-purple-900 via-indigo-900 to-emerald-900 p-8 border border-purple-600/30",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx(y.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.6,delay:1},children:e.jsx(B,{className:"w-16 h-16 text-purple-400 mx-auto mb-6"})}),e.jsx("h3",{className:"text-3xl font-black heading-block mb-6 uppercase",children:e.jsx("span",{className:"bg-gradient-to-r from-purple-300 to-emerald-300 bg-clip-text text-transparent",children:"Democracy is a Practice, Not a Theory"})}),e.jsx("p",{className:"text-lg text-indigo-100 mb-8 font-light leading-relaxed",children:"Our governance model is rooted in liberation, trust, and collective decision-making. We don't just talk about democracy - we practice it every day through transparent processes, inclusive participation, and accountable leadership."}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center space-y-4 sm:space-y-0 sm:space-x-6",children:[e.jsx("button",{className:"bg-gradient-to-r from-purple-500 to-emerald-500 hover:from-purple-400 hover:to-emerald-400 text-white font-bold px-8 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg",children:"Become a Member"}),e.jsx("button",{className:"bg-transparent border-2 border-purple-400 hover:bg-purple-400/10 text-purple-100 font-bold px-8 py-4 rounded-xl transition-all duration-300 transform hover:scale-105",children:"Learn About Governance"})]})]})})]}),e.jsx(Xe,{})]})]})},nt=({userRole:t})=>{const[s,a]=m.useState(!1),[u,d]=m.useState(null),[o,c]=m.useState(""),[i,n]=m.useState("all"),[g,x]=m.useState("all"),{documents:p,loading:b,uploadDocument:v}=Ve({type:i==="all"?void 0:i,status:g==="all"?void 0:g,limit:100}),{meetings:k,loading:w}=ze({limit:50}),{uploadFile:T,uploading:l}=He(),D=b||w,[f,_]=m.useState({title:"",type:"minutes",meeting_id:"",description:"",tags:[],is_public:!0,file:null}),J=p?.map(r=>({...r,meeting_title:r.meeting_id?k?.find(N=>N.id===r.meeting_id)?.title:void 0,uploaded_by:r.uploaded_by_name||"Unknown User"}))||[],I=[{value:"minutes",label:"Meeting Minutes",icon:B,color:"text-purple-400"},{value:"agenda",label:"Meeting Agenda",icon:Te,color:"text-blue-400"},{value:"resolution",label:"Resolution",icon:z,color:"text-emerald-400"},{value:"report",label:"Report",icon:R,color:"text-amber-400"},{value:"policy",label:"Policy Document",icon:S,color:"text-indigo-400"},{value:"financial",label:"Financial Document",icon:R,color:"text-green-400"},{value:"legal",label:"Legal Document",icon:z,color:"text-red-400"}],oe=r=>{switch(r){case"draft":return"text-gray-400 bg-gray-900/20";case"review":return"text-amber-400 bg-amber-900/20";case"published":return"text-emerald-400 bg-emerald-900/20";case"archived":return"text-indigo-400 bg-indigo-900/20";default:return"text-gray-400 bg-gray-900/20"}},le=r=>r.includes("pdf")?S:r.includes("image")?Fe:r.includes("video")?Le:r.includes("audio")?Oe:qe,ce=async()=>{if(!(!f.file||!f.title.trim()))try{const r=await T(f.file,"governance"),N={title:f.title,type:f.type,meeting_id:f.meeting_id||null,file_url:r.url,file_name:f.file.name,file_size:`${(f.file.size/1024/1024).toFixed(1)} MB`,file_type:f.file.type,description:f.description,is_public:f.is_public,tags:f.tags,status:"draft"};await v(N),a(!1),de()}catch(r){console.error("Upload failed:",r)}},de=()=>{_({title:"",type:"minutes",meeting_id:"",description:"",tags:[],is_public:!0,file:null})},me=async r=>{window.confirm("Are you sure you want to delete this document? This action cannot be undone.")&&console.log("Delete document:",r)},ue=async(r,N)=>{console.log("Update document status:",r,N)},A=J.filter(r=>{const N=r.title.toLowerCase().includes(o.toLowerCase())||(r.description||"").toLowerCase().includes(o.toLowerCase())||(r.tags||[]).some(P=>P.toLowerCase().includes(o.toLowerCase())),M=i==="all"||r.type===i,E=g==="all"||r.status===g;return N&&M&&E});return D?e.jsx("div",{className:"p-8 text-center",children:e.jsx(V,{size:"lg",color:"purple",text:"Loading governance documents..."})}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{pageName:"Admin Governance Documents",dependencies:["Supabase","Governance Hooks","File Upload"]}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>window.location.href="/admin",className:"flex items-center gap-2 px-4 py-2 bg-purple-800 hover:bg-purple-700 rounded-lg transition-colors text-sm text-white",children:[e.jsx(De,{className:"w-4 h-4"}),"Back to Hub"]}),e.jsxs("button",{onClick:()=>window.location.href="/admin",className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors text-sm text-white",children:[e.jsx($,{className:"w-4 h-4"}),"Integration Hub"]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-white heading-block uppercase",children:e.jsx("span",{className:"bg-gradient-to-r from-purple-400 to-indigo-400 bg-clip-text text-transparent",children:"Governance Documents"})}),e.jsx("p",{className:"text-indigo-300 mt-2",children:"Manage official documents, meeting records, and governance materials"})]}),e.jsxs("button",{onClick:()=>a(!0),className:"bg-gradient-to-r from-purple-500 to-emerald-500 hover:from-purple-400 hover:to-emerald-400 text-white font-bold px-6 py-3 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center space-x-2",children:[e.jsx(re,{className:"w-5 h-5"}),e.jsx("span",{children:"Upload Document"})]})]}),e.jsx("div",{className:"bg-indigo-900/30 backdrop-blur-sm border border-indigo-700/30 p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-indigo-400"}),e.jsx("input",{type:"text",placeholder:"Search documents...",value:o,onChange:r=>c(r.target.value),className:"pl-10 pr-4 py-2 bg-indigo-800/30 border border-indigo-700/30 text-white rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("select",{value:i,onChange:r=>n(r.target.value),className:"bg-indigo-800/30 border border-indigo-700/30 text-white px-4 py-2 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Types"}),I.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))]}),e.jsxs("select",{value:g,onChange:r=>x(r.target.value),className:"bg-indigo-800/30 border border-indigo-700/30 text-white px-4 py-2 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"review",children:"Under Review"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),e.jsxs("div",{className:"text-sm text-indigo-300",children:[A.length," of ",J.length," documents"]})]})}),e.jsx("div",{className:"space-y-4",children:A.map(r=>{const N=I.find(E=>E.value===r.type),M=le(r.file_type);return e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-indigo-800/30 border border-indigo-700/30 p-6 hover:bg-indigo-800/50 transition-all duration-300",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-600/20 flex items-center justify-center",children:N?.icon?e.jsx(N.icon,{className:`w-6 h-6 ${N.color}`}):e.jsx(S,{className:"w-6 h-6 text-purple-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:r.title}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${oe(r.status)}`,children:r.status.toUpperCase()}),!r.is_public&&e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-red-900/20 text-red-400",children:"PRIVATE"})]}),e.jsx("p",{className:"text-indigo-200 mb-3 line-clamp-2",children:r.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-indigo-300",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{children:r.file_name})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{children:r.file_size})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{children:r.uploaded_by})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(r.uploaded_date).toLocaleDateString()})]})]}),r.meeting_title&&e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsx("span",{className:"text-indigo-400",children:"Related to: "}),e.jsx("span",{className:"text-white font-medium",children:r.meeting_title})]}),r.tags.length>0&&e.jsxs("div",{className:"flex items-center space-x-2 mt-3",children:[e.jsx(Ie,{className:"w-4 h-4 text-indigo-400"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:r.tags.map((E,P)=>e.jsx("span",{className:"bg-indigo-700/30 text-indigo-300 px-2 py-1 rounded text-xs",children:E},P))})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>window.open(r.file_url,"_blank"),className:"p-2 text-indigo-400 hover:text-indigo-300 hover:bg-indigo-800/30 rounded transition-colors",title:"View document",children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{},className:"p-2 text-emerald-400 hover:text-emerald-300 hover:bg-emerald-800/30 rounded transition-colors",title:"Download document",children:e.jsx(Ae,{className:"w-4 h-4"})}),(t==="admin"||t==="moderator")&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>d(r),className:"p-2 text-amber-400 hover:text-amber-300 hover:bg-amber-800/30 rounded transition-colors",title:"Edit document",children:e.jsx(Me,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>me(r.id),className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-800/30 rounded transition-colors",title:"Delete document",children:e.jsx(Pe,{className:"w-4 h-4"})})]}),e.jsxs("select",{value:r.status,onChange:E=>ue(r.id,E.target.value),className:"bg-indigo-800/30 border border-indigo-700/30 text-white text-xs px-2 py-1 rounded focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"review",children:"Review"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})]})]})},r.id)})}),A.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(S,{className:"w-16 h-16 text-indigo-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No documents found"}),e.jsx("p",{className:"text-indigo-300 mb-4",children:o||i!=="all"||g!=="all"?"Try adjusting your search criteria or filters.":"Start by uploading your first governance document."}),e.jsx("button",{onClick:()=>a(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-lg transition-colors",children:"Upload First Document"})]}),e.jsx(K,{children:s&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx(y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-indigo-900 border border-indigo-700 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Upload New Document"}),e.jsx("button",{onClick:()=>a(!1),className:"p-2 text-indigo-400 hover:text-white transition-colors",children:e.jsx(Q,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Document Title *"}),e.jsx("input",{type:"text",value:f.title,onChange:r=>_({...f,title:r.target.value}),placeholder:"Enter document title",className:"w-full bg-indigo-800/30 border border-indigo-700/30 text-white p-3 rounded-lg focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Document Type *"}),e.jsx("select",{value:f.type,onChange:r=>_({...f,type:r.target.value}),className:"w-full bg-indigo-800/30 border border-indigo-700/30 text-white p-3 rounded-lg focus:ring-2 focus:ring-purple-500",children:I.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Related Meeting (Optional)"}),e.jsxs("select",{value:f.meeting_id,onChange:r=>_({...f,meeting_id:r.target.value}),className:"w-full bg-indigo-800/30 border border-indigo-700/30 text-white p-3 rounded-lg focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:"Select meeting"}),k.map(r=>e.jsxs("option",{value:r.id,children:[r.title," - ",new Date(r.date).toLocaleDateString()]},r.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Description"}),e.jsx("textarea",{value:f.description,onChange:r=>_({...f,description:r.target.value}),placeholder:"Brief description of the document",rows:3,className:"w-full bg-indigo-800/30 border border-indigo-700/30 text-white p-3 rounded-lg resize-none focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"File *"}),e.jsx("div",{className:"border-2 border-dashed border-indigo-600/30 rounded-lg p-6 text-center",children:f.file?e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx(S,{className:"w-8 h-8 text-emerald-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:f.file.name}),e.jsxs("p",{className:"text-indigo-300 text-sm",children:[(f.file.size/1024/1024).toFixed(1)," MB"]})]}),e.jsx("button",{onClick:()=>_({...f,file:null}),className:"p-1 text-red-400 hover:text-red-300",children:e.jsx(Q,{className:"w-4 h-4"})})]}):e.jsxs("div",{children:[e.jsx(X,{className:"w-12 h-12 text-indigo-400 mx-auto mb-4"}),e.jsx("p",{className:"text-white mb-2",children:"Click to upload or drag and drop"}),e.jsx("p",{className:"text-indigo-400 text-sm",children:"PDF, DOC, DOCX, TXT, MD up to 10MB"}),e.jsx("input",{type:"file",onChange:r=>{const N=r.target.files?.[0];N&&_({...f,file:N})},accept:".pdf,.doc,.docx,.txt,.md",className:"hidden",id:"file-upload"}),e.jsx("label",{htmlFor:"file-upload",className:"inline-block mt-4 bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg cursor-pointer transition-colors",children:"Choose File"})]})})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f.is_public,onChange:r=>_({...f,is_public:r.target.checked}),className:"w-4 h-4 text-purple-600 border-indigo-700 rounded focus:ring-purple-500"}),e.jsx("span",{className:"text-white",children:"Make document public"})]})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-indigo-700",children:[e.jsx("button",{onClick:()=>a(!1),className:"bg-gray-600 hover:bg-gray-500 text-white px-6 py-3 rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ce,disabled:!f.file||!f.title.trim()||l,className:"bg-purple-600 hover:bg-purple-500 text-white px-8 py-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx(V,{size:"sm",color:"white"}),e.jsx("span",{children:"Uploading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-5 h-5"}),e.jsx("span",{children:"Upload Document"})]})})]})]})})})})]})]})};export{it as C,L as E,nt as G,V as L,We as P,Xe as a,ne as b,at as c,h as s,rt as u};
