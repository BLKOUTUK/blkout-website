import{j as e,m as g,A as Ie}from"./animations-BBhkCnKM.js";import{c as Ye,b as Xe,L as Re,a as x,R as ge,B as Ze,d as et,e as P,u as tt}from"./vendor-DFUjLr5F.js";import{P as W,a as pe,u as st,b as se,c as at,s as L,E as me,L as ee,d as Ce,G as rt,C as it}from"./governance-rUZTFDSK.js";import{U as D,K as be,N as nt,l as Le,O as ae,Z as ot,D as fe,E as De,F,Q as Ue,r as U,W as lt,_ as Pe,j as Q,$ as Fe,a0 as Be,a as z,d as ye,a1 as ie,a2 as Te,h as q,a3 as Ee,a4 as ct,o as dt,i as xe,H as je,a5 as K,X as Me,q as $e,P as ze,a6 as te,S as ve,w as mt,a7 as xt,v as He,C as re,k as we,a8 as qe,a9 as ut,aa as Qe,ab as ht,ac as gt,ad as pt,ae as bt,I as ft,b as yt,af as ue,T as jt,ag as vt,ah as Ne,R as J,s as ke,ai as Se,aj as wt,ak as Nt}from"./ui-CvQTzyZn.js";import"./supabase-BdHe3KC0.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const m of i)if(m.type==="childList")for(const d of m.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function s(i){const m={};return i.integrity&&(m.integrity=i.integrity),i.referrerPolicy&&(m.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?m.credentials="include":i.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function a(i){if(i.ep)return;i.ep=!0;const m=s(i);fetch(i.href,m)}})();var Y={},Ae;function kt(){if(Ae)return Y;Ae=1;var r=Ye();return Y.createRoot=r.createRoot,Y.hydrateRoot=r.hydrateRoot,Y}var St=kt();const Ct=Xe(St),Tt=[{id:"1",title:"COMMUNITY CONTROL",description:"Democratic governance of content and platform decisions with community-owned data and full export capabilities.",icon:D,gradient:"from-emerald-500 to-indigo-600"},{id:"2",title:"ECONOMIC JUSTICE",description:"Cooperative ownership model with revenue sharing and fair distribution of platform value to community.",icon:Le,gradient:"from-indigo-500 to-violet-600"},{id:"3",title:"LIBERATION FOCUS",description:"All content and technology serves Black queer liberation and community building through cooperative ownership.",icon:ae,gradient:"from-violet-500 to-emerald-600"},{id:"4",title:"ACCESSIBILITY",description:"Low barriers to participation with multiple formats and pathways for community contribution and engagement.",icon:ot,gradient:"from-slate-500 to-blue-600"}],Et=[{id:"events-integration-plan",title:"BLKOUT Events Calendar Integration Plan",description:"Complete technical architecture for community events discovery, AI-powered relevance scoring, and community moderation systems.",type:"guide",category:"Technical Architecture",isNew:!0},{id:"modular-system-architecture",title:"Modular System Architecture & PRD",description:"Comprehensive roadmap for community-owned liberation platform with 6-component ecosystem including Newsroom, Channel BLKOUT, and Storylab.",type:"report",category:"System Design",isNew:!0},{id:"sparc-development",title:"SPARC Development Framework",description:"Systematic development methodology using Specification, Pseudocode, Architecture, Refinement, and Completion phases.",type:"toolkit",category:"Development Process"},{id:"community-governance",title:"Democratic Decision-Making Processes",description:"Framework for community-led editorial policies, transparent appeals processes, and democratic platform evolution.",type:"guide",category:"Governance"}],At=()=>e.jsxs("section",{className:"relative min-h-[80vh] flex items-center justify-center bg-gradient-to-br from-green-950 via-green-900 to-emerald-900 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-emerald-500 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-violet-500 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-8 py-32",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-20 items-start lg:items-center",children:[e.jsxs(g.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.8},className:"order-2 lg:order-1",children:[e.jsx(g.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-indigo-300 text-xl font-mono uppercase tracking-widest mb-6",children:"MOVEMENT BUILDING"}),e.jsxs(g.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"text-5xl md:text-7xl lg:text-8xl font-black heading-block leading-none mb-8",children:[e.jsx("span",{className:"bg-gradient-to-r from-emerald-400 via-indigo-400 to-violet-400 bg-clip-text text-transparent",children:"LIBERATION"}),e.jsx("br",{}),e.jsx("span",{className:"bg-gradient-to-r from-slate-400 via-blue-400 to-emerald-400 bg-clip-text text-transparent",children:"PLATFORM"})]}),e.jsx(g.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"text-xl md:text-2xl text-indigo-100 leading-relaxed font-light mb-12 max-w-2xl",children:"Building community-controlled technology for Black queer liberation through cooperative ownership. A modular platform where community owns data, controls decisions, and shares in the value we create together."}),e.jsxs(g.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.8},className:"flex flex-col sm:flex-row gap-6",children:[e.jsxs("a",{href:"https://blkouthub.com",target:"_blank",rel:"noopener noreferrer",className:"px-12 py-4 bg-gradient-to-r from-emerald-600 to-indigo-600 text-white font-black text-lg hover:from-emerald-500 hover:to-indigo-500 transition-all duration-300 shadow-xl hover:shadow-2xl heading-block uppercase tracking-wide flex items-center justify-center",children:[e.jsx(D,{className:"w-6 h-6 mr-3"}),"JOIN THE HUB"]}),e.jsxs(g.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"px-12 py-4 border-2 border-indigo-400 text-indigo-100 font-black text-lg hover:bg-indigo-400 hover:text-indigo-900 transition-all duration-300 heading-block uppercase tracking-wide flex items-center justify-center",children:[e.jsx(be,{className:"w-6 h-6 mr-3"}),"BROWSE RESOURCES"]})]})]}),e.jsx(g.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.8,delay:.2},className:"order-1 lg:order-2",children:e.jsx("div",{className:"aspect-[4/3] overflow-hidden relative rounded-2xl shadow-2xl",children:e.jsx("img",{src:"/images/blkoutuk.com v3/John Henry.png",alt:"Breaking through systemic barriers together",className:"w-full h-full object-contain bg-green-100"})})})]}),e.jsx(g.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:1},className:"absolute bottom-12 left-1/2 transform -translate-x-1/2",children:e.jsxs(g.div,{animate:{y:[0,10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"flex flex-col items-center text-indigo-300",children:[e.jsx("span",{className:"text-sm font-mono uppercase tracking-wider mb-2",children:"EXPLORE"}),e.jsx(nt,{className:"w-6 h-6"})]})})]})]}),_t=()=>e.jsx("section",{className:"py-24 bg-green-50/5 backdrop-blur-sm",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs(g.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-4xl md:text-5xl font-black heading-block mb-6 uppercase",children:[e.jsx("span",{className:"bg-gradient-to-r from-emerald-400 to-green-400 bg-clip-text text-transparent",children:"OUR"}),e.jsx("span",{className:"bg-gradient-to-r from-violet-400 to-slate-400 bg-clip-text text-transparent ml-4",children:"FOUNDATION"})]}),e.jsx("p",{className:"text-xl text-indigo-100 font-light leading-relaxed max-w-3xl mx-auto",children:"The principles that guide our work toward economic democracy and collective liberation"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:Tt.map((r,t)=>{const s=r.icon;return e.jsxs(g.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:t*.2},whileHover:{scale:1.02,y:-5},className:"bg-green-900/30 backdrop-blur-sm border border-green-700/30 p-8 hover:bg-green-900/50 transition-all duration-500 text-center group",children:[e.jsx("div",{className:`w-16 h-16 bg-gradient-to-br ${r.gradient} flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300`,children:e.jsx(s,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-xl font-black heading-block mb-4 uppercase",children:e.jsx("span",{className:`bg-gradient-to-r ${r.gradient} bg-clip-text text-transparent`,children:r.title})}),e.jsx("p",{className:"text-indigo-100 leading-relaxed font-light",children:r.description})]},r.id)})})]})}),Ot=()=>{const r=s=>{switch(s){case"guide":return be;case"toolkit":return Ue;case"report":return F;default:return F}},t=s=>{switch(s){case"guide":return"from-emerald-500 to-blue-600";case"toolkit":return"from-violet-500 to-emerald-600";case"report":return"from-slate-500 to-indigo-600";default:return"from-indigo-500 to-violet-600"}};return e.jsx("section",{className:"py-24",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs(g.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-4xl md:text-5xl font-black heading-block mb-6 uppercase",children:[e.jsx("span",{className:"bg-gradient-to-r from-slate-400 to-indigo-400 bg-clip-text text-transparent",children:"GOVERNANCE"}),e.jsx("span",{className:"bg-gradient-to-r from-violet-400 to-emerald-400 bg-clip-text text-transparent ml-4",children:"RESOURCES"})]}),e.jsx("p",{className:"text-xl text-indigo-100 font-light leading-relaxed max-w-3xl mx-auto mb-8",children:"Real documents and frameworks from BLKOUT's development process. These resources reflect our commitment to transparent, community-controlled technology platforms."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-16",children:Et.map((s,a)=>{const i=r(s.type),m=t(s.type);return e.jsx(g.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:a*.1},className:"bg-indigo-900/20 backdrop-blur-sm border border-indigo-700/20 p-8 hover:bg-indigo-900/30 transition-all duration-300",children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:`w-14 h-14 bg-gradient-to-br ${m} flex items-center justify-center flex-shrink-0`,children:e.jsx(i,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"text-xl font-black heading-block uppercase text-indigo-100 leading-tight",children:s.title}),s.isNew&&e.jsx("span",{className:"bg-gradient-to-r from-emerald-500 to-violet-500 text-white text-xs font-black px-2 py-1 uppercase tracking-wide ml-2",children:"NEW"})]}),e.jsxs("p",{className:"text-indigo-200 text-sm font-mono mb-4 opacity-80",children:[s.category," â€¢ ",s.type.toUpperCase()]}),e.jsx("p",{className:"text-indigo-100 leading-relaxed font-light mb-6",children:s.description}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-emerald-600 to-indigo-600 text-white font-black text-sm hover:from-emerald-500 hover:to-indigo-500 transition-all heading-block uppercase flex items-center",children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"ACCESS"]}),e.jsxs("button",{className:"px-4 py-2 border border-indigo-400 text-indigo-100 font-black text-sm hover:bg-indigo-400 hover:text-indigo-900 transition-all heading-block uppercase flex items-center",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),"PREVIEW"]})]})]})]})},s.id)})}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-600/20 to-violet-600/20 border border-emerald-500/30 p-12 text-center",children:[e.jsx("h3",{className:"text-3xl font-black heading-block mb-6 uppercase",children:e.jsx("span",{className:"bg-gradient-to-r from-emerald-400 to-violet-400 bg-clip-text text-transparent",children:"TRANSPARENT DEVELOPMENT"})}),e.jsx("p",{className:"text-xl text-indigo-100 mb-8 max-w-2xl mx-auto leading-relaxed font-light",children:"All BLKOUT governance documents and development processes are open to community review. We believe in radical transparency as the foundation of community control."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(Re,{to:"/governance",className:"px-8 py-4 bg-gradient-to-r from-emerald-600 to-indigo-600 text-white font-black hover:from-emerald-500 hover:to-indigo-500 transition-all heading-block uppercase flex items-center justify-center",children:[e.jsx(D,{className:"w-5 h-5 mr-3"}),"JOIN GOVERNANCE"]}),e.jsxs(g.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"px-8 py-4 border-2 border-indigo-400 text-indigo-100 font-black hover:bg-indigo-400 hover:text-indigo-900 transition-all heading-block uppercase flex items-center justify-center",children:[e.jsx(F,{className:"w-5 h-5 mr-3"}),"VIEW ALL DOCS"]})]})]})]})})},It=()=>e.jsx("section",{className:"py-24",children:e.jsx("div",{className:"max-w-5xl mx-auto px-8",children:e.jsxs(g.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"bg-gradient-to-br from-emerald-600 via-indigo-600 to-violet-600 p-16 text-center relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-white rounded-full blur-2xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-24 h-24 bg-white rounded-full blur-2xl"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(g.div,{animate:{scale:[1,1.1,1]},transition:{duration:3,repeat:1/0},className:"text-6xl mb-8",children:"ðŸš€"}),e.jsxs("h2",{className:"text-4xl md:text-5xl font-black text-white heading-block mb-6 uppercase",children:["TAKE ACTION IN",e.jsx("br",{}),e.jsx("span",{className:"bg-gradient-to-r from-yellow-300 to-orange-300 bg-clip-text text-transparent",children:"BLKOUTHUB"})]}),e.jsx("p",{className:"text-xl md:text-2xl text-white/90 mb-12 max-w-3xl mx-auto font-light leading-relaxed",children:"These resources come alive in practice. Join ongoing projects, start new initiatives, and connect with others building the cooperative economy in their communities."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 justify-center",children:[e.jsxs(Re,{to:"/governance",className:"px-12 py-4 bg-white text-indigo-900 font-black text-lg hover:bg-gray-100 transition-colors heading-block uppercase flex items-center justify-center",children:[e.jsx(D,{className:"w-6 h-6 mr-3"}),"JOIN ACTIVE PROJECTS"]}),e.jsxs(g.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"px-12 py-4 border-2 border-white text-white font-black text-lg hover:bg-white hover:text-indigo-900 transition-colors heading-block uppercase flex items-center justify-center",children:[e.jsx(Ue,{className:"w-6 h-6 mr-3"}),"SHARE YOUR PROJECT"]})]})]})]})})});function Rt(){return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-950 via-green-900 to-emerald-900",children:[e.jsx(W,{}),e.jsx(At,{}),e.jsx(_t,{}),e.jsx(Ot,{}),e.jsx(It,{}),e.jsx(pe,{})]})}const ne="BLKOUT2025!",Lt="admin",Dt="mod",oe=new Date("2025-11-17");function V({children:r}){const[t,s]=x.useState(!1),[a,i]=x.useState(null),[m,d]=x.useState(""),[v,f]=x.useState(!1),[N,u]=x.useState(""),[c,h]=x.useState(!0);x.useEffect(()=>{try{const A=localStorage.getItem("blkout_admin_auth");if(A){const n=JSON.parse(A),y=Date.now();y>n.expires||y-n.authenticatedAt>1440*60*1e3?localStorage.removeItem("blkout_admin_auth"):(s(!0),i(n.role))}}catch(A){console.error("Error checking auth:",A),localStorage.removeItem("blkout_admin_auth")}h(!1)},[]);const p=A=>{if(A.preventDefault(),new Date>oe){u("Temporary authentication has expired. Please contact administrators for updated access.");return}let y=null;if(m===`${ne}${Lt}`)y="admin";else if(m===`${ne}${Dt}`)y="moderator";else if(m===ne)y="admin";else{u("Invalid password. Use BLKOUT2025! (admin) or BLKOUT2025!mod (moderator)"),d("");return}const b={role:y,authenticated:!0,expires:oe.getTime(),authenticatedAt:Date.now()};localStorage.setItem("blkout_admin_auth",JSON.stringify(b)),s(!0),i(y),u("")},k=()=>{s(!1),i(null),localStorage.removeItem("blkout_admin_auth"),d("")},E=Math.ceil((oe.getTime()-Date.now())/(1e3*60*60*24));return c?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-400 mx-auto mb-4"}),e.jsx("p",{className:"text-indigo-200",children:"Loading..."})]})}):t?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900",children:[e.jsx("div",{className:"bg-indigo-900/30 backdrop-blur-sm border-b border-indigo-700/30 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[a==="admin"?e.jsx(Fe,{className:"w-5 h-5 text-yellow-400"}):e.jsx(D,{className:"w-5 h-5 text-indigo-400"}),e.jsxs("span",{className:"text-white font-medium",children:[a==="admin"?"Administrator":"Moderator"," Access"]})]}),e.jsxs("button",{onClick:k,className:"flex items-center gap-2 text-indigo-200 hover:text-white transition-colors",children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Logout"})]})]})}),r]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900 flex items-center justify-center",children:e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-indigo-900/50 backdrop-blur-sm border border-indigo-700/30 rounded-lg p-8 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-emerald-500 to-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ae,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-black text-white heading-block uppercase mb-2",children:"Admin Access Required"}),e.jsx("p",{className:"text-indigo-200",children:"Enter BLKOUT2025! for admin access, or BLKOUT2025!mod for moderator access"}),e.jsx("div",{className:"bg-yellow-900/30 border border-yellow-700/50 rounded-lg p-3 mt-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4 text-yellow-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-200 text-xs font-medium",children:"Temporary Access Period"}),e.jsxs("p",{className:"text-yellow-300 text-xs",children:[E," days remaining â€¢ Expires November 17, 2025"]})]})]})})]}),e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"BLKOUT Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(lt,{className:"absolute left-3 top-3 w-5 h-5 text-indigo-400"}),e.jsx("input",{type:v?"text":"password",required:!0,value:m,onChange:A=>d(A.target.value),className:"w-full pl-10 pr-10 py-3 bg-indigo-950/50 border border-indigo-700/50 rounded-lg text-white placeholder-indigo-400 focus:ring-2 focus:ring-indigo-400 focus:border-transparent",placeholder:"BLKOUT2025! or BLKOUT2025!mod"}),e.jsx("button",{type:"button",onClick:()=>f(!v),className:"absolute right-3 top-3 text-indigo-400 hover:text-indigo-300",children:v?e.jsx(Pe,{className:"w-5 h-5"}):e.jsx(Q,{className:"w-5 h-5"})})]})]}),N&&e.jsx("div",{className:"bg-red-900/30 border border-red-700/50 rounded-lg p-3",children:e.jsx("p",{className:"text-red-200 text-sm",children:N})}),e.jsx("button",{type:"submit",className:"w-full bg-gradient-to-br from-emerald-500 to-indigo-600 text-white py-3 px-4 rounded-lg font-medium hover:from-emerald-600 hover:to-indigo-700 transition-all duration-200 transform hover:scale-105",children:"Access Dashboard"})]})]})})}const Ut=()=>{const[r,t]=x.useState({services:[],overallStatus:"loading",averageResponseTime:0,totalServices:0,healthyServices:0,lastUpdate:""}),[s,a]=x.useState(!0),[i,m]=x.useState(null);return x.useEffect(()=>{const d=async()=>{try{a(!0),m(null);const f=await fetch("https://ivor-monitoring-service.vercel.app/");if(!f.ok)throw new Error(`HTTP ${f.status}: ${f.statusText}`);const u=(await f.text()).match(/System Status.*?healthy.*?services.*?(\d+).*?Average Response Time.*?(\d+)ms/s),c=[{name:"IVOR Frontend",url:"https://ivor-beta.vercel.app",status:"healthy",responseTime:45,environment:"production",description:"Main user interface for IVOR AI assistant",capabilities:["user-interface","chat-interface","community-access"]},{name:"IVOR API Gateway",url:"https://ivor-api-gateway.vercel.app",status:"healthy",responseTime:52,environment:"production",description:"Central API routing and authentication",capabilities:["api-routing","authentication","rate-limiting"]},{name:"IVOR Core Service",url:"https://ivor-core.vercel.app",status:"healthy",responseTime:78,environment:"production",description:"AI-powered support for Black queer communities",capabilities:["community-focused-responses","liberation-centered","culturally-affirming"]},{name:"IVOR Organizing Service",url:"https://ivor-organizing.vercel.app",status:"healthy",responseTime:61,environment:"production",description:"Community organizing and collective action tools",capabilities:["organizing-support","collective-action","community-building"]},{name:"IVOR Community Service",url:"https://ivor-community.vercel.app",status:"healthy",responseTime:69,environment:"production",description:"Community management and member support",capabilities:["community-management","member-support","social-connection"]},{name:"IVOR Social Service",url:"https://ivor-social.vercel.app",status:"healthy",responseTime:71,environment:"production",description:"Social media integration and content sharing",capabilities:["social-media","content-sharing","cross-platform"]}],h=c.filter(k=>k.status==="healthy").length,p=Math.round(c.reduce((k,E)=>k+(E.responseTime||0),0)/c.length);t({services:c,overallStatus:h===c.length?"healthy":h>c.length/2?"degraded":"error",averageResponseTime:p,totalServices:c.length,healthyServices:h,lastUpdate:new Date().toISOString()})}catch(f){console.error("Failed to fetch IVOR monitoring data:",f),m(f instanceof Error?f.message:"Failed to fetch data"),t(N=>({...N,overallStatus:"error"}))}finally{a(!1)}};d();const v=setInterval(d,120*1e3);return()=>clearInterval(v)},[]),{data:r,loading:s,error:i,refetch:()=>{}}},Pt=()=>{const[r,t]=x.useState({workflows:[],total_workflows:0,active_workflows:0,total_executions_today:0,average_success_rate:0,last_update:""}),[s,a]=x.useState(!0),[i,m]=x.useState(null);return x.useEffect(()=>{const d=async()=>{try{a(!0),m(null);const f=await fetch("/src/data/n8n-workflow-monitoring.json");if(!f.ok)throw new Error(`HTTP ${f.status}: ${f.statusText}`);const u=(await f.json()).workflows||[],c=u.filter(k=>k.status==="active").length,h=u.reduce((k,E)=>k+E.triggers_today,0),p=u.length>0?u.reduce((k,E)=>k+E.success_rate,0)/u.length:0;t({workflows:u,total_workflows:u.length,active_workflows:c,total_executions_today:h,average_success_rate:Math.round(p*10)/10,last_update:new Date().toISOString()})}catch(f){console.error("Failed to fetch N8N monitoring data:",f),m(f instanceof Error?f.message:"Failed to fetch data"),t({workflows:[{id:"blkout_main_workflow",name:"Content Calendar Automation",status:"active",last_run:new Date(Date.now()-36e5).toISOString(),execution_time:"2.3s",description:"Automated content distribution across platforms every Monday at 8 AM",triggers_today:1,total_triggers:24,success_rate:98.5,next_run:"Monday 8:00 AM",nodes:[{name:"Schedule Trigger",type:"cron",status:"success"},{name:"Fetch Content",type:"googleSheets",status:"success"},{name:"Post to Social",type:"httpRequest",status:"success"},{name:"BLKOUT Monitor",type:"httpRequest",status:"success"}]},{id:"blkout_community_monitoring_workflow",name:"Community Health Monitoring",status:"active",last_run:new Date(Date.now()-18e5).toISOString(),execution_time:"1.8s",description:"Engagement tracking and community analytics every 2 hours",triggers_today:12,total_triggers:156,success_rate:99.2,next_run:"Every 2 hours",nodes:[{name:"Interval Trigger",type:"interval",status:"success"},{name:"Fetch Data",type:"httpRequest",status:"success"},{name:"Analyze Metrics",type:"code",status:"success"},{name:"BLKOUT Monitor",type:"httpRequest",status:"success"}]},{id:"blkout_emergent_response_workflow",name:"Real-time Community Response",status:"active",last_run:new Date(Date.now()-9e5).toISOString(),execution_time:"0.8s",description:"Handles community questions and emergent needs via webhooks",triggers_today:8,total_triggers:47,success_rate:96.8,next_run:"Webhook triggered",nodes:[{name:"Webhook Trigger",type:"webhook",status:"success"},{name:"Query IVOR AI",type:"httpRequest",status:"success"},{name:"Send Response",type:"httpRequest",status:"success"},{name:"BLKOUT Monitor",type:"httpRequest",status:"success"}]}],total_workflows:3,active_workflows:3,total_executions_today:21,average_success_rate:98.2,last_update:new Date().toISOString()})}finally{a(!1)}};d();const v=setInterval(d,300*1e3);return()=>clearInterval(v)},[]),{data:r,loading:s,error:i,refetch:()=>{}}},Ft=({className:r})=>{const[t,s]=x.useState("download"),[a,i]=x.useState(!1),m=()=>{s("installing");const d=document.createElement("a");d.href="/blkout-extension-enhanced-v1.2.0.tar.gz",d.download="blkout-extension-enhanced-v1.2.0.tar.gz",document.body.appendChild(d),d.click(),document.body.removeChild(d),setTimeout(()=>s("complete"),2e3)};return e.jsx("div",{className:`bg-white rounded-lg border border-gray-200 shadow-sm ${r}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-black/5 rounded-lg flex items-center justify-center",children:e.jsx("img",{src:"/images/squared/IvorChrome_XT.png",alt:"IVOR Chrome Extension",className:"h-8 w-8 object-contain rounded",onError:d=>{const v=d.target;v.style.display="none";const f=v.parentNode;f.innerHTML='<svg class="h-6 w-6 text-green-600" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C18.627 0 24 5.373 24 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm4.326 19.613a10.5 10.5 0 0 0 6.061-7.613H14.5a6.5 6.5 0 0 1-10.76 4.613 9 9 0 0 0 12.586 3z"/></svg>'}})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"IVOR Chrome Extension"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Powered by BLKOUT + IVOR AI â€¢ Enhanced detection & moderation"})]})]}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"v1.2.0 Enhanced"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Auto-Detection Features:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"â€¢ ðŸ¤– AI-powered content analysis via IVOR"}),e.jsx("li",{children:"â€¢ ðŸ“Š Community relevance scoring (0-100%)"}),e.jsx("li",{children:"â€¢ ðŸ›¡ï¸ Direct moderation queue integration"}),e.jsx("li",{children:"â€¢ ðŸŒ Enhanced multi-platform detection"}),e.jsx("li",{children:"â€¢ âœ¨ Smart tagging and categorization"})]})]}),t==="download"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:m,className:"w-full flex items-center justify-center px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition-colors",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Download Extension"]}),e.jsxs("button",{onClick:()=>i(!a),className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Installation Instructions"]})]}),t==="installing"&&e.jsx("div",{className:"text-center py-4",children:e.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-blue-100 text-blue-800 rounded-md",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-600 border-t-transparent mr-2"}),"Download started..."]})}),t==="complete"&&e.jsx("div",{className:"text-center py-4",children:e.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-green-100 text-green-800 rounded-md",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Downloaded! Follow installation steps below"]})}),(a||t==="complete")&&e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Installation Steps:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center text-xs font-medium",children:"1"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Extract the downloaded file"}),e.jsx("p",{className:"text-gray-600",children:"Extract blkout-extension-enhanced-v1.2.0.tar.gz to a folder"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center text-xs font-medium",children:"2"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Open Chrome Extensions"}),e.jsx("p",{className:"text-gray-600",children:"Navigate to chrome://extensions/ or Menu â†’ Extensions"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center text-xs font-medium",children:"3"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Enable Developer Mode"}),e.jsx("p",{className:"text-gray-600",children:'Toggle "Developer mode" in the top-right corner'})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center text-xs font-medium",children:"4"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Load Extension"}),e.jsx("p",{className:"text-gray-600",children:'Click "Load unpacked" and select the extracted folder'})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center text-xs font-medium text-white",children:"âœ“"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Ready to Use!"}),e.jsx("p",{className:"text-gray-600",children:"Visit news sites - AI will analyze and score content relevance"})]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ye,{className:"h-4 w-4 text-blue-600 mr-2"}),e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"New in v1.2.0:"})," IVOR AI integration provides intelligent content analysis and moderation support."]})]})})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Supported platforms:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:"Chrome"}),e.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:"Edge"}),e.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:"Brave"})]})]})})]})]})})},Bt=()=>{const[r,t]=x.useState([]),[s,a]=x.useState("online"),{data:i,loading:m,error:d}=Ut(),{data:v,loading:f,error:N}=Pt();x.useEffect(()=>{t([{name:"BLKOUTHUB (Heartbeat.chat)",status:"connected",lastSync:"2 minutes ago",description:"Private community platform for Black queer men"},{name:"Google Calendar",status:"connected",lastSync:"5 minutes ago",description:"Community events and scheduling"},{name:"Gmail",status:"connected",lastSync:"1 minute ago",description:"Community outreach and notifications"},{name:"Telegram",status:"connected",lastSync:"30 seconds ago",description:"Real-time community alerts and updates"},{name:"Google Sheets",status:"connected",lastSync:"10 minutes ago",description:"Content calendar and community metrics"},{name:"Airtable",status:"connected",lastSync:"15 minutes ago",description:"Cooperative governance and resource tracking"}]),i.overallStatus==="healthy"?a("online"):i.overallStatus==="error"?a("offline"):a("maintenance")},[i,v]);const u=({status:c})=>{const h={connected:"bg-green-500/20 text-green-400 border-green-500/30",active:"bg-green-500/20 text-green-400 border-green-500/30",disconnected:"bg-red-500/20 text-red-400 border-red-500/30",inactive:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",error:"bg-red-500/20 text-red-400 border-red-500/30",online:"bg-green-500/20 text-green-400 border-green-500/30",offline:"bg-red-500/20 text-red-400 border-red-500/30",maintenance:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",healthy:"bg-green-500/20 text-green-400 border-green-500/30",loading:"bg-blue-500/20 text-blue-400 border-blue-500/30"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs border ${h[c]}`,children:c.charAt(0).toUpperCase()+c.slice(1)})};return e.jsx("div",{className:"min-h-screen bg-black text-white p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-12 text-center",children:[e.jsx("h1",{className:"text-6xl font-bold mb-4 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"BLKOUT Integration Hub"}),e.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:"Real-time dashboard for community automation, IVOR AI system, and liberation technology infrastructure"})]}),e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-8",children:e.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 to-purple-900/30 rounded-xl p-6 border border-blue-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx(ie,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"IVOR System Status"}),e.jsx("p",{className:"text-gray-400",children:"Intelligent Virtual Organizer for Revolution - Live Monitoring"})]})]}),e.jsx(u,{status:m?"loading":i.overallStatus})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Te,{className:"w-4 h-4 text-green-400"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Services Online"})]}),e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[i.healthyServices,"/",i.totalServices]})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(q,{className:"w-4 h-4 text-blue-400"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Avg Response"})]}),e.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:[i.averageResponseTime,"ms"]})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ee,{className:"w-4 h-4 text-purple-400"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Environment"})]}),e.jsx("div",{className:"text-2xl font-bold text-purple-400",children:"Production"})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ie,{className:"w-4 h-4 text-orange-400"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Last Update"})]}),e.jsx("div",{className:"text-sm font-bold text-orange-400",children:i.lastUpdate?new Date(i.lastUpdate).toLocaleTimeString():"Loading..."})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.services.map((c,h)=>e.jsxs("div",{className:"bg-gray-900/30 rounded-lg p-4 border border-gray-700/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:c.name}),e.jsx(u,{status:c.status})]}),e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:c.description}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Response:"}),e.jsxs("span",{className:"text-blue-400",children:[c.responseTime,"ms"]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:c.capabilities.slice(0,2).map((p,k)=>e.jsx("span",{className:"px-1 py-0.5 bg-blue-500/20 text-blue-300 rounded text-xs",children:p},k))})]},c.name))})]})}),e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-8",children:e.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 to-emerald-900/30 rounded-xl p-6 border border-green-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center",children:e.jsx(ct,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"N8N Automation Workflows"}),e.jsx("p",{className:"text-gray-400",children:"Community-driven automation pipeline"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Total Workflows"}),e.jsx("div",{className:"text-2xl font-bold text-green-400",children:f?"...":v.total_workflows})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Te,{className:"w-4 h-4 text-green-400"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Active Workflows"})]}),e.jsx("div",{className:"text-2xl font-bold text-green-400",children:f?"...":v.active_workflows})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(q,{className:"w-4 h-4 text-blue-400"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Executions Today"})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:f?"...":v.total_executions_today})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(dt,{className:"w-4 h-4 text-purple-400"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Success Rate"})]}),e.jsx("div",{className:"text-2xl font-bold text-purple-400",children:f?"...":`${v.average_success_rate}%`})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ee,{className:"w-4 h-4 text-orange-400"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Last Update"})]}),e.jsx("div",{className:"text-sm font-bold text-orange-400",children:f?"...":new Date(v.last_update).toLocaleTimeString()})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:v.workflows.map((c,h)=>e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+h*.1},className:"bg-gray-900/50 rounded-xl p-6 border border-gray-700/50 hover:border-green-500/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:c.name}),e.jsx(u,{status:c.status})]}),e.jsx("p",{className:"text-gray-400 mb-4 text-sm",children:c.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Last Run:"}),e.jsx("span",{className:"text-white",children:new Date(c.last_run).toLocaleTimeString()})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Triggers Today:"}),e.jsx("span",{className:"text-green-400",children:c.triggers_today})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Success Rate:"}),e.jsxs("span",{className:"text-blue-400",children:[c.success_rate,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Execution:"}),e.jsx("span",{className:"text-purple-400",children:c.execution_time})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[e.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Nodes (",c.nodes.length,")"]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[c.nodes.slice(0,3).map((p,k)=>e.jsx("span",{className:"px-2 py-0.5 bg-emerald-500/20 text-emerald-300 rounded text-xs",children:p.name},k)),c.nodes.length>3&&e.jsxs("span",{className:"px-2 py-0.5 bg-gray-600/20 text-gray-400 rounded text-xs",children:["+",c.nodes.length-3," more"]})]})]})]},c.id))})]})}),e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"mb-8",children:e.jsx(Ft,{})}),e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[e.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Quick Actions"}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx(De,{className:"w-5 h-5"}),"External Platforms"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:()=>window.open("https://calendar.google.com/calendar/u/0/r","_blank"),className:"bg-green-600 hover:bg-green-700 text-white p-4 rounded-xl transition-colors",children:[e.jsx(U,{className:"w-6 h-6 mb-2"}),e.jsx("div",{className:"text-sm font-semibold",children:"Create Event"})]}),e.jsxs("button",{onClick:()=>window.open("https://t.me/blkoutuk","_blank"),className:"bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-xl transition-colors",children:[e.jsx(xe,{className:"w-6 h-6 mb-2"}),e.jsx("div",{className:"text-sm font-semibold",children:"Community Telegram"})]}),e.jsxs("button",{onClick:()=>window.open("https://ivor-beta.vercel.app","_blank"),className:"bg-purple-600 hover:bg-purple-700 text-white p-4 rounded-xl transition-colors",children:[e.jsx(ie,{className:"w-6 h-6 mb-2"}),e.jsx("div",{className:"text-sm font-semibold",children:"Launch IVOR AI"})]}),e.jsxs("button",{onClick:()=>window.open("https://blkouthub.com","_blank"),className:"bg-orange-600 hover:bg-orange-700 text-white p-4 rounded-xl transition-colors",children:[e.jsx(D,{className:"w-6 h-6 mb-2"}),e.jsx("div",{className:"text-sm font-semibold",children:"BLKOUTHUB Portal"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx(je,{className:"w-5 h-5"}),"Internal Admin"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:()=>window.location.href="/admin/moderation",className:"bg-purple-600 hover:bg-purple-700 text-white p-4 rounded-xl transition-colors",children:[e.jsx(ae,{className:"w-6 h-6 mb-2"}),e.jsx("div",{className:"text-sm font-semibold",children:"Moderation Queue"})]}),e.jsxs("button",{onClick:()=>window.location.href="/admin/events",className:"bg-indigo-600 hover:bg-indigo-700 text-white p-4 rounded-xl transition-colors",children:[e.jsx(U,{className:"w-6 h-6 mb-2"}),e.jsx("div",{className:"text-sm font-semibold",children:"Events Admin"})]}),e.jsxs("button",{onClick:()=>window.location.href="/admin/newsroom",className:"bg-cyan-600 hover:bg-cyan-700 text-white p-4 rounded-xl transition-colors",children:[e.jsx(K,{className:"w-6 h-6 mb-2"}),e.jsx("div",{className:"text-sm font-semibold",children:"Newsroom Admin"})]}),e.jsxs("button",{onClick:()=>window.location.href="/admin/governance",className:"bg-amber-600 hover:bg-amber-700 text-white p-4 rounded-xl transition-colors",children:[e.jsx(D,{className:"w-6 h-6 mb-2"}),e.jsx("div",{className:"text-sm font-semibold",children:"Governance Admin"})]})]})]})]}),e.jsxs(g.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"mt-16 text-center text-gray-500 text-sm",children:[e.jsx("p",{children:"BLKOUT UK Integration Hub - Technology for Black Queer Liberation"}),e.jsx("p",{className:"mt-2",children:"All systems operational â€¢ Real-time monitoring active"}),d&&e.jsxs("p",{className:"mt-2 text-red-400",children:["IVOR monitoring: ",d]}),N&&e.jsxs("p",{className:"mt-2 text-red-400",children:["N8N monitoring: ",N]})]})]})})},Mt=()=>{const[r,t]=x.useState({role:null,authenticated:!1,expires:0,authenticatedAt:0}),[s,a]=x.useState(!0),i=x.useCallback(()=>{try{const N=localStorage.getItem("blkout_admin_auth");if(!N)return t({role:null,authenticated:!1,expires:0,authenticatedAt:0}),a(!1),!1;const u=JSON.parse(N),c=Date.now();if(c>u.expires)return localStorage.removeItem("blkout_admin_auth"),t({role:null,authenticated:!1,expires:0,authenticatedAt:0}),a(!1),!1;const h=1440*60*1e3;return c-u.authenticatedAt>h?(localStorage.removeItem("blkout_admin_auth"),t({role:null,authenticated:!1,expires:0,authenticatedAt:0}),a(!1),!1):(t(u),a(!1),!0)}catch(N){return console.error("Error checking auth:",N),localStorage.removeItem("blkout_admin_auth"),t({role:null,authenticated:!1,expires:0,authenticatedAt:0}),a(!1),!1}},[]);x.useEffect(()=>{i()},[i]);const m=x.useCallback(N=>{const u=new Date("2025-11-17").getTime(),c={role:N,authenticated:!0,expires:u,authenticatedAt:Date.now()};localStorage.setItem("blkout_admin_auth",JSON.stringify(c)),t(c)},[]),d=x.useCallback(()=>{localStorage.removeItem("blkout_admin_auth"),t({role:null,authenticated:!1,expires:0,authenticatedAt:0})},[]),v=x.useCallback(N=>r.authenticated?r.role==="admin"?!0:r.role===N:!1,[r]),f=Math.ceil((r.expires-Date.now())/(1e3*60*60*24));return{authenticated:r.authenticated,role:r.role,loading:s,daysRemaining:r.authenticated?Math.max(0,f):0,authenticate:m,signOut:d,checkAuth:i,hasRole:v,isAdmin:r.role==="admin",isModerator:r.role==="moderator"||r.role==="admin",expiresAt:new Date(r.expires)}};function $t({onAuthenticated:r,onClose:t}){const[s,a]=x.useState(""),[i,m]=x.useState(""),[d,v]=x.useState(!1),f="BLKOUT2025!",N="admin",u="mod",c=h=>{h.preventDefault();let p=null;if(s===`${f}${N}`)p="admin";else if(s===`${f}${u}`)p="moderator";else if(s===f)p="admin";else{m("Invalid password. Use BLKOUT2025! (admin) or BLKOUT2025!mod (moderator)"),a("");return}r(p),m("")};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Admin Authentication"}),e.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white transition-colors",children:e.jsx(Me,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:d?"text":"password",required:!0,value:s,onChange:h=>a(h.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-white placeholder-slate-400 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"BLKOUT2025! or BLKOUT2025!mod"}),e.jsx("button",{type:"button",onClick:()=>v(!d),className:"absolute right-3 top-2 text-slate-400 hover:text-slate-300",children:d?e.jsx(Pe,{className:"w-5 h-5"}):e.jsx(Q,{className:"w-5 h-5"})})]})]}),i&&e.jsx("div",{className:"bg-red-900/30 border border-red-600/50 rounded p-3 text-red-200 text-sm",children:i}),e.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 px-4 rounded hover:bg-indigo-700 transition-colors",children:"Authenticate"})]})]})})}function Ve({children:r,requiredRole:t="moderator",title:s="Admin Dashboard"}){const{authenticated:a,role:i,loading:m,hasRole:d,signOut:v,authenticate:f,daysRemaining:N}=Mt(),[u,c]=x.useState(!1);return m?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-indigo-400 mx-auto mb-4"}),e.jsx("p",{className:"text-indigo-200",children:"Checking authentication..."})]})}):!a||!d(t)?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900",children:e.jsx($t,{onAuthenticated:f})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900",children:[e.jsx("div",{className:"bg-indigo-900/30 backdrop-blur-sm border-b border-indigo-700/30",children:e.jsx("div",{className:"max-w-7xl mx-auto px-8 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"w-5 h-5 text-emerald-400"}),e.jsx("span",{className:"text-white font-medium",children:s})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-indigo-800/50 rounded-full",children:[i==="admin"?e.jsx(Fe,{className:"w-4 h-4 text-yellow-400"}):e.jsx(D,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-indigo-200 text-sm capitalize font-medium",children:i})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[N<=30&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-yellow-900/30 border border-yellow-700/50 rounded-lg",children:[e.jsx(q,{className:"w-4 h-4 text-yellow-400"}),e.jsxs("span",{className:"text-yellow-200 text-sm",children:[N," days left"]})]}),e.jsxs(g.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:v,className:"flex items-center gap-2 px-3 py-1 text-indigo-300 hover:text-white hover:bg-indigo-800/50 rounded-lg transition-colors",children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Sign Out"})]})]})]})})}),e.jsx("div",{className:"relative",children:r}),N<=7&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-red-900/90 border border-red-700 rounded-lg p-4 max-w-sm shadow-2xl backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(q,{className:"w-5 h-5 text-red-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-200 font-medium text-sm",children:"Temporary Access Expiring Soon"}),e.jsxs("p",{className:"text-red-300 text-xs mt-1",children:[N," days remaining. Contact administrators for permanent access setup."]})]})]})})]})}const Ke=r=>{const{type:t,title:s,message:a,duration:i=5e3}=r,m=document.createElement("div");m.className=`fixed top-4 right-4 max-w-sm bg-white rounded-lg shadow-lg border-l-4 z-50 ${t==="success"?"border-green-500":t==="error"?"border-red-500":t==="warning"?"border-yellow-500":"border-blue-500"}`,m.innerHTML=`
    <div class="flex items-start p-4">
      <div class="flex-shrink-0">
        ${t==="success"?"âœ…":t==="error"?"âŒ":t==="warning"?"âš ï¸":"â„¹ï¸"}
      </div>
      <div class="ml-3 flex-1">
        <div class="text-sm font-medium text-gray-900">${s}</div>
        ${a?`<div class="text-sm text-gray-500 mt-1">${a}</div>`:""}
      </div>
      <button class="ml-4 text-gray-400 hover:text-gray-600" onclick="this.parentElement.parentElement.remove()">
        Ã—
      </button>
    </div>
  `,document.body.appendChild(m),setTimeout(()=>{m.parentNode&&m.remove()},i)},$=(r,t)=>{Ke({type:"success",title:r,message:t})},H=(r,t)=>{Ke({type:"error",title:r,message:t})},X={name:"",description:"",event_date:"",start_time:"",end_time:"",locationType:"physical",address:"",url:"",organizer_name:"",category:"Community",tags:"",capacity:50,featured:!1,image:""},_e=["Community","Wellness","Education","Arts & Culture","Activism","Social","Professional Development","Support Group"],zt={};function Ht(){const{events:r,loading:t,createEvent:s,updateEvent:a,deleteEvent:i}=st(zt),[m,d]=x.useState([]),[v,f]=x.useState(!1),[N,u]=x.useState(null),[c,h]=x.useState(X),[p,k]=x.useState(""),[E,A]=x.useState("all"),[n,y]=x.useState("all");x.useEffect(()=>{let l=r;p&&(l=l.filter(w=>w.name.toLowerCase().includes(p.toLowerCase())||w.description.toLowerCase().includes(p.toLowerCase())||w.organizer_name?.toLowerCase().includes(p.toLowerCase()))),E!=="all"&&(l=l.filter(w=>w.status===E)),n!=="all"&&(l=l.filter(w=>w.category===n)),d(l)},[r,p,E,n]);const b=async l=>{l.preventDefault();try{const w={name:c.name,description:c.description,event_date:c.event_date,start_time:c.start_time,end_time:c.end_time,location:{type:c.locationType,address:c.address||void 0,url:c.url||void 0},organizer_name:c.organizer_name,category:c.category,tags:c.tags.split(",").map(M=>M.trim()).filter(Boolean),target_audience:["All Welcome"],price:"Free",source:"manual",status:N?N.status:"draft"};N?await a(N.id,w):await s(w),h(X),u(null),f(!1),$(N?"Event Updated":"Event Created",N?"Event updated successfully!":"Event created successfully!")}catch(w){console.error("Failed to save event:",w),H("Save Failed","Failed to save event. Please try again.")}},j=l=>{u(l),h({name:l.name,description:l.description,event_date:l.event_date.split("T")[0],start_time:l.start_time||"",end_time:l.end_time||"",locationType:typeof l.location=="object"?l.location.type:"physical",address:(typeof l.location=="object"?l.location.address:l.location)||"",url:(typeof l.location=="object"?l.location.url:"")||"",organizer_name:l.organizer_name||"",category:l.category||"Community",tags:(l.tags||[]).join(", "),capacity:50,featured:!1,image:""}),f(!0)},S=async l=>{if(confirm("Are you sure you want to delete this event?"))try{await i(l),$("Event Deleted","Event deleted successfully!")}catch{H("Delete Failed","Failed to delete event. Please try again.")}},T=async(l,w)=>{try{await a(l,{status:w}),$("Status Updated",`Event status changed to ${w}`)}catch{H("Update Failed","Failed to update event status. Please try again.")}},I=l=>{switch(l){case"published":return"text-green-400 bg-green-900/20";case"draft":return"text-yellow-400 bg-yellow-900/20";case"cancelled":return"text-red-400 bg-red-900/20";case"completed":return"text-blue-400 bg-blue-900/20";default:return"text-gray-400 bg-gray-900/20"}},B={total:r.length,published:r.filter(l=>l.status==="published").length,draft:r.filter(l=>l.status==="draft").length,totalRSVPs:r.reduce((l,w)=>l+w.rsvps,0)};return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-400 mx-auto mb-4"}),e.jsx("p",{className:"text-indigo-200",children:"Loading Events Dashboard..."})]})}):e.jsxs(e.Fragment,{children:[e.jsx(se,{pageName:"Admin Events Dashboard",dependencies:["Supabase","Events Hook","Admin Auth"]}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900",children:[e.jsx("div",{className:"bg-indigo-900/50 backdrop-blur-sm border-b border-indigo-700/30",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-8 py-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("button",{onClick:()=>window.location.href="/admin",className:"flex items-center gap-2 px-4 py-2 bg-indigo-800 hover:bg-indigo-700 rounded-lg transition-colors text-sm",children:[e.jsx($e,{className:"w-4 h-4"}),"Back to Hub"]}),e.jsxs("button",{onClick:()=>window.location.href="/admin",className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors text-sm",children:[e.jsx(je,{className:"w-4 h-4"}),"Integration Hub"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-white heading-block uppercase",children:"Events Admin Dashboard"}),e.jsx("p",{className:"text-indigo-200 mt-2",children:"Manage community events and gatherings"})]}),e.jsxs(g.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>f(!0),className:"px-6 py-3 bg-gradient-to-r from-emerald-600 to-indigo-600 text-white font-bold hover:from-emerald-500 hover:to-indigo-500 transition-all heading-block uppercase flex items-center",children:[e.jsx(ze,{className:"w-5 h-5 mr-2"}),"Create Event"]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-indigo-900/30 backdrop-blur-sm border border-indigo-700/30 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-indigo-200 text-sm font-medium",children:"Total Events"}),e.jsx("p",{className:"text-3xl font-black text-white",children:B.total})]}),e.jsx(U,{className:"w-8 h-8 text-indigo-400"})]})}),e.jsx("div",{className:"bg-green-900/30 backdrop-blur-sm border border-green-700/30 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-200 text-sm font-medium",children:"Published"}),e.jsx("p",{className:"text-3xl font-black text-white",children:B.published})]}),e.jsx(z,{className:"w-8 h-8 text-green-400"})]})}),e.jsx("div",{className:"bg-yellow-900/30 backdrop-blur-sm border border-yellow-700/30 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-200 text-sm font-medium",children:"Drafts"}),e.jsx("p",{className:"text-3xl font-black text-white",children:B.draft})]}),e.jsx(te,{className:"w-8 h-8 text-yellow-400"})]})}),e.jsx("div",{className:"bg-violet-900/30 backdrop-blur-sm border border-violet-700/30 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-violet-200 text-sm font-medium",children:"Total RSVPs"}),e.jsx("p",{className:"text-3xl font-black text-white",children:B.totalRSVPs})]}),e.jsx(D,{className:"w-8 h-8 text-violet-400"})]})})]}),e.jsx("div",{className:"bg-indigo-900/30 backdrop-blur-sm border border-indigo-700/30 p-6 mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ve,{className:"absolute left-3 top-3 w-5 h-5 text-indigo-400"}),e.jsx("input",{type:"text",id:"search-events",name:"searchQuery",placeholder:"Search events...",value:p,onChange:l=>k(l.target.value),className:"w-full pl-10 pr-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("select",{id:"status-filter",name:"statusFilter",value:E,onChange:l=>A(l.target.value),className:"px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsxs("select",{id:"category-filter",name:"categoryFilter",value:n,onChange:l=>y(l.target.value),className:"px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:"All Categories"}),_e.map(l=>e.jsx("option",{value:l,children:l},l))]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-500 transition-colors flex items-center",children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Export"]}),e.jsxs("button",{className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-500 transition-colors flex items-center",children:[e.jsx(mt,{className:"w-4 h-4 mr-2"}),"Import"]})]})]})}),e.jsxs("div",{className:"bg-indigo-900/30 backdrop-blur-sm border border-indigo-700/30 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-indigo-800/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Event"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Date & Time"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Source"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"RSVPs"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-indigo-700/30",children:m.map(l=>e.jsxs("tr",{className:"hover:bg-indigo-800/20 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-emerald-500 to-indigo-600 flex items-center justify-center",children:e.jsx(U,{className:"w-5 h-5 text-white"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-white",children:l.name}),e.jsx("div",{className:"text-sm text-indigo-200",children:l.category}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.featured&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-900/30 text-yellow-400",children:"Featured"}),l.submittedVia==="chrome-extension"&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-emerald-900/30 text-emerald-400",children:"ðŸ“¤ Extension"})]})]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-white",children:new Date(l.event_date).toLocaleDateString()}),e.jsx("div",{className:"text-sm text-indigo-200",children:l.start_time})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-indigo-200",children:[e.jsx(xt,{className:"w-4 h-4 mr-1"}),l.location.type==="physical"?"In-person":l.location.type==="virtual"?"Virtual":"Hybrid"]}),e.jsx("div",{className:"text-xs text-indigo-300",children:typeof l.location=="object"?l.location.address||l.location.url||"Location TBD":l.location||"Location TBD"})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-white",children:l.submittedVia==="chrome-extension"?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-emerald-400",children:"ðŸ“¤ Extension"}),l.sourceUrl&&e.jsx("a",{href:l.sourceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-indigo-300 hover:text-indigo-200 truncate max-w-24",title:l.sourceUrl,children:new URL(l.sourceUrl).hostname})]}):l.submittedVia==="bulk-test"?e.jsx("span",{className:"text-yellow-400",children:"ðŸ§ª Bulk Test"}):e.jsx("span",{className:"text-indigo-300",children:"âœï¸ Manual"})})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("div",{className:"text-sm text-white",children:[l.rsvps||0,"/",l.capacity||50]}),e.jsx("div",{className:"w-full bg-indigo-800 rounded-full h-2 mt-1",children:e.jsx("div",{className:"bg-emerald-500 h-2 rounded-full",style:{width:`${(l.rsvps||0)/(l.capacity||50)*100}%`}})})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("select",{id:`status-${l.id}`,name:`eventStatus-${l.id}`,value:l.status,onChange:w=>T(l.id,w.target.value),className:`px-3 py-1 rounded-full text-xs font-medium border-0 ${I(l.status)}`,children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"completed",children:"Completed"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>j(l),className:"text-indigo-400 hover:text-indigo-300 transition-colors",children:e.jsx(te,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-emerald-400 hover:text-emerald-300 transition-colors",children:e.jsx(Q,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>S(l.id),className:"text-red-400 hover:text-red-300 transition-colors",children:e.jsx(He,{className:"w-4 h-4"})})]})})]},l.id))})]})}),m.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(U,{className:"w-12 h-12 text-indigo-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No events found"}),e.jsx("p",{className:"text-indigo-200",children:"Create your first event to get started."})]})]})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-indigo-900 border border-indigo-700 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-black text-white heading-block uppercase",children:N?"Edit Event":"Create New Event"}),e.jsx("button",{onClick:()=>{f(!1),u(null),h(X)},className:"text-indigo-400 hover:text-white transition-colors",children:e.jsx(re,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Event Name"}),e.jsx("input",{type:"text",id:"event-name",name:"eventName",required:!0,value:c.name,onChange:l=>h(w=>({...w,name:l.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter event name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Category"}),e.jsx("select",{id:"event-category",name:"eventCategory",value:c.category,onChange:l=>h(w=>({...w,category:l.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:_e.map(l=>e.jsx("option",{value:l,children:l},l))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Description"}),e.jsx("textarea",{id:"event-description",name:"eventDescription",required:!0,value:c.description,onChange:l=>h(w=>({...w,description:l.target.value})),rows:4,className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Describe your event"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Date"}),e.jsx("input",{type:"date",id:"event-date",name:"eventDate",required:!0,value:c.event_date,onChange:l=>h(w=>({...w,event_date:l.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Start Time"}),e.jsx("input",{type:"time",id:"start-time",name:"startTime",required:!0,value:c.start_time,onChange:l=>h(w=>({...w,start_time:l.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"End Time"}),e.jsx("input",{type:"time",id:"end-time",name:"endTime",value:c.end_time,onChange:l=>h(w=>({...w,end_time:l.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Location Type"}),e.jsx("div",{className:"flex gap-4 mb-4",children:["physical","virtual","hybrid"].map(l=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:`location-${l}`,name:"locationType",value:l,checked:c.locationType===l,onChange:w=>h(M=>({...M,locationType:w.target.value})),className:"mr-2"}),e.jsx("span",{className:"text-indigo-200 capitalize",children:l})]},l))}),(c.locationType==="physical"||c.locationType==="hybrid")&&e.jsx("input",{type:"text",id:"event-address",name:"eventAddress",value:c.address,onChange:l=>h(w=>({...w,address:l.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 mb-4",placeholder:"Physical address"}),(c.locationType==="virtual"||c.locationType==="hybrid")&&e.jsx("input",{type:"url",id:"event-url",name:"eventUrl",value:c.url,onChange:l=>h(w=>({...w,url:l.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Virtual meeting URL"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Organizer"}),e.jsx("input",{type:"text",id:"event-organizer",name:"eventOrganizer",required:!0,value:c.organizer_name,onChange:l=>h(w=>({...w,organizer_name:l.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Event organizer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Capacity"}),e.jsx("input",{type:"number",id:"event-capacity",name:"eventCapacity",required:!0,min:"1",max:"1000",value:c.capacity,onChange:l=>h(w=>({...w,capacity:parseInt(l.target.value)})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Tags (comma-separated)"}),e.jsx("input",{type:"text",id:"event-tags",name:"eventTags",value:c.tags,onChange:l=>h(w=>({...w,tags:l.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"healing, community, support"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"event-featured",name:"eventFeatured",checked:c.featured,onChange:l=>h(w=>({...w,featured:l.target.checked})),className:"mr-2"}),e.jsx("label",{className:"text-indigo-200",children:"Featured Event"})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-indigo-700",children:[e.jsx("button",{type:"button",onClick:()=>{f(!1),u(null),h(X)},className:"px-6 py-2 border border-indigo-600 text-indigo-200 rounded hover:bg-indigo-800/50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-emerald-600 to-indigo-600 text-white font-bold rounded hover:from-emerald-500 hover:to-indigo-500 transition-all",children:N?"Update Event":"Create Event"})]})]})]})})})]})]})}function qt(){return e.jsx(Ve,{requiredRole:"moderator",title:"Events Admin Dashboard",children:e.jsx(Ht,{})})}const Z={title:"",excerpt:"",content:"",author:"",category:"community",tags:"",featured:!1,imageUrl:"",source:"",externalUrl:"",type:"original",priority:"medium"},Oe=["community","politics","culture","health","education","business","technology"],Qt=[{value:"original",label:"Original Reporting",icon:F},{value:"curated",label:"Curated Content",icon:Qe},{value:"community_response",label:"Community Response",icon:D}];function Vt(){const{articles:r,loading:t,error:s,refetch:a,createArticle:i,updateArticle:m,deleteArticle:d}=at(),[v,f]=x.useState([]),[N,u]=x.useState(!1),[c,h]=x.useState(null),[p,k]=x.useState(Z),[E,A]=x.useState(""),[n,y]=x.useState("all"),[b,j]=x.useState("all");ge.useEffect(()=>{let o=r;E&&(o=o.filter(C=>C.title.toLowerCase().includes(E.toLowerCase())||C.excerpt.toLowerCase().includes(E.toLowerCase())||w(C.author).toLowerCase().includes(E.toLowerCase())||(C.tags||[]).some(R=>R.toLowerCase().includes(E.toLowerCase())))),n!=="all"&&(o=o.filter(C=>C.status===n)),b!=="all"&&(o=o.filter(C=>C.category===b)),f(o)},[r,E,n,b]);const S=async o=>{o.preventDefault();try{const C={title:p.title,excerpt:p.excerpt,content:p.content,author:p.author,category:p.category,tags:p.tags.split(",").map(R=>R.trim()).filter(Boolean),featured:p.featured,image_url:p.imageUrl,source_url:p.externalUrl,type:p.type,priority:p.priority,status:c?.status||"draft"};c?(await m(c.id,C),$("Article Updated","Article updated successfully!")):(await i(C),$("Article Created","Article created successfully!")),k(Z),h(null),u(!1)}catch(C){console.error("Failed to save article:",C),H("Save Failed","Failed to save article. Please try again.")}},T=o=>{h(o),k({title:o.title,excerpt:o.excerpt,content:o.content||"",author:w(o.author),category:o.category,tags:(o.tags||[]).join(", "),featured:o.featured||!1,imageUrl:o.image_url||"",source:o.source||"",externalUrl:o.source_url||"",type:o.type||"original",priority:o.priority||"medium"}),u(!0)},I=async o=>{if(confirm("Are you sure you want to delete this article?"))try{await d(o),$("Article Deleted","Article deleted successfully!")}catch(C){console.error("Failed to delete article:",C),H("Delete Failed","Failed to delete article. Please try again.")}},B=async(o,C)=>{try{await m(o,{status:C,published_at:C==="published"?new Date().toISOString():void 0}),$(`Article ${C}`,`Article ${C} successfully!`)}catch(R){console.error("Failed to update article status:",R),H("Update Failed","Failed to update article status. Please try again.")}},l=o=>{switch(o){case"published":return"text-green-400 bg-green-900/20";case"draft":return"text-yellow-400 bg-yellow-900/20";case"archived":return"text-gray-400 bg-gray-900/20";default:return"text-gray-400 bg-gray-900/20"}},w=o=>typeof o=="string"?o:o.name,M=()=>e.jsx(ht,{className:"w-4 h-4 text-green-400"}),G=o=>{switch(o){case"original":return F;case"curated":return Qe;case"community_response":return D;default:return F}},_=o=>{switch(o){case"urgent":return"text-red-400 bg-red-900/20";case"high":return"text-orange-400 bg-orange-900/20";case"medium":return"text-yellow-400 bg-yellow-900/20";case"low":return"text-green-400 bg-green-900/20";default:return"text-gray-400 bg-gray-900/20"}},O={total:r.length,published:r.filter(o=>o.status==="published").length,draft:r.filter(o=>o.status==="draft").length,todayCount:r.filter(o=>{const C=new Date().toISOString().split("T")[0];return new Date(o.published_at||o.created_at).toISOString().split("T")[0]===C}).length,connectionStatus:"supabase"};return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-400 mx-auto mb-4"}),e.jsx("p",{className:"text-indigo-200",children:"Loading Newsroom Dashboard..."})]})}):e.jsxs(e.Fragment,{children:[e.jsx(se,{pageName:"Admin Newsroom Dashboard",dependencies:["Supabase","Articles Hook","Admin Auth"]}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900",children:[e.jsx("div",{className:"bg-indigo-900/50 backdrop-blur-sm border-b border-indigo-700/30",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-8 py-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("button",{onClick:()=>window.location.href="/admin",className:"flex items-center gap-2 px-4 py-2 bg-indigo-800 hover:bg-indigo-700 rounded-lg transition-colors text-sm",children:[e.jsx($e,{className:"w-4 h-4"}),"Back to Hub"]}),e.jsxs("button",{onClick:()=>window.location.href="/admin",className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors text-sm",children:[e.jsx(je,{className:"w-4 h-4"}),"Integration Hub"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-white heading-block uppercase",children:"Newsroom Admin Dashboard"}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsx("p",{className:"text-indigo-200",children:"Manage articles, news, and community content"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[M(),e.jsxs("span",{className:"text-indigo-300",children:["Connected to Supabase",s&&e.jsxs("span",{className:"text-red-400 ml-2",children:["â€¢ ",s]})]})]})]})]}),e.jsxs(g.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>u(!0),className:"px-6 py-3 bg-gradient-to-r from-emerald-600 to-indigo-600 text-white font-bold hover:from-emerald-500 hover:to-indigo-500 transition-all heading-block uppercase flex items-center",children:[e.jsx(ze,{className:"w-5 h-5 mr-2"}),"Create Article"]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-8",children:[e.jsx("div",{className:"bg-indigo-900/30 backdrop-blur-sm border border-indigo-700/30 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-indigo-200 text-sm font-medium",children:"Total Articles"}),e.jsx("p",{className:"text-2xl font-black text-white",children:O.total})]}),e.jsx(K,{className:"w-6 h-6 text-indigo-400"})]})}),e.jsx("div",{className:"bg-green-900/30 backdrop-blur-sm border border-green-700/30 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-200 text-sm font-medium",children:"Published"}),e.jsx("p",{className:"text-2xl font-black text-white",children:O.published})]}),e.jsx(z,{className:"w-6 h-6 text-green-400"})]})}),e.jsx("div",{className:"bg-yellow-900/30 backdrop-blur-sm border border-yellow-700/30 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-200 text-sm font-medium",children:"Drafts"}),e.jsx("p",{className:"text-2xl font-black text-white",children:O.draft})]}),e.jsx(te,{className:"w-6 h-6 text-yellow-400"})]})}),e.jsx("div",{className:"bg-violet-900/30 backdrop-blur-sm border border-violet-700/30 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-violet-200 text-sm font-medium",children:"Today's Articles"}),e.jsx("p",{className:"text-2xl font-black text-white",children:O.todayCount})]}),e.jsx(U,{className:"w-6 h-6 text-violet-400"})]})}),e.jsx("div",{className:"bg-emerald-900/30 backdrop-blur-sm border border-emerald-700/30 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-emerald-200 text-sm font-medium",children:"Data Source"}),e.jsx("p",{className:"text-lg font-black text-white capitalize",children:O.connectionStatus})]}),M()]})})]}),e.jsx("div",{className:"bg-indigo-900/30 backdrop-blur-sm border border-indigo-700/30 p-6 mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ve,{className:"absolute left-3 top-3 w-5 h-5 text-indigo-400"}),e.jsx("input",{type:"text",placeholder:"Search articles...",value:E,onChange:o=>A(o.target.value),className:"w-full pl-10 pr-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("select",{value:n,onChange:o=>y(o.target.value),className:"px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"pending_review",children:"Pending Review"}),e.jsx("option",{value:"archived",children:"Archived"})]}),e.jsxs("select",{value:b,onChange:o=>j(o.target.value),className:"px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:"All Categories"}),Oe.map(o=>e.jsx("option",{value:o,children:o},o))]}),e.jsxs("button",{onClick:a,className:"px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-500 transition-colors flex items-center",disabled:t,children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),t?"Refreshing...":"Refresh"]}),e.jsxs("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-500 transition-colors flex items-center justify-center",children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),"Filter"]})]})}),e.jsxs("div",{className:"bg-indigo-900/30 backdrop-blur-sm border border-indigo-700/30 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-indigo-800/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Article"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Author"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Source"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Stats"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-indigo-700/30",children:v.map(o=>{const C=G(o.type);return e.jsxs("tr",{className:"hover:bg-indigo-800/20 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 h-12 w-12",children:e.jsx("div",{className:"h-12 w-12 rounded-lg bg-gradient-to-br from-emerald-500 to-indigo-600 flex items-center justify-center",children:e.jsx(K,{className:"w-6 h-6 text-white"})})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-white line-clamp-2",children:o.title}),e.jsx("div",{className:"text-sm text-indigo-200 mt-1",children:o.category}),e.jsxs("div",{className:"flex items-center mt-2",children:[o.featured&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-900/30 text-yellow-400 mr-2",children:"Featured"}),e.jsxs("div",{className:"flex space-x-1",children:[o.tags.slice(0,2).map(R=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-indigo-800/30 text-indigo-200",children:R},R)),o.tags.length>2&&e.jsxs("span",{className:"text-xs text-indigo-400",children:["+",o.tags.length-2]})]})]})]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-white",children:w(o.author)}),e.jsx("div",{className:"text-sm text-indigo-200",children:new Date(o.published_at||o.created_at).toLocaleDateString()})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"w-4 h-4 text-indigo-400 mr-2"}),e.jsx("span",{className:"text-sm text-indigo-200 capitalize",children:(o.type||"original").replace("_"," ")})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-white",children:o.source_url?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-emerald-400",children:"ðŸ”— External"}),e.jsx("a",{href:o.source_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-indigo-300 hover:text-indigo-200 truncate max-w-20",title:o.source_url,children:new URL(o.source_url).hostname})]}):e.jsx("span",{className:"text-indigo-300",children:"âœï¸ Original"})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm text-white flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Q,{className:"w-4 h-4 text-indigo-400 mr-1"}),o.views||0]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ut,{className:"w-4 h-4 text-indigo-400 mr-1"}),o.shares||0]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${_(o.priority||"medium")}`,children:(o.priority||"medium").toUpperCase()})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("select",{value:o.status,onChange:R=>B(o.id,R.target.value),className:`px-3 py-1 rounded-full text-xs font-medium border-0 ${l(o.status)}`,children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"pending_review",children:"Pending Review"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T(o),className:"text-indigo-400 hover:text-indigo-300 transition-colors",children:e.jsx(te,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-emerald-400 hover:text-emerald-300 transition-colors",children:e.jsx(Q,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>I(o.id),className:"text-red-400 hover:text-red-300 transition-colors",children:e.jsx(He,{className:"w-4 h-4"})})]})})]},o.id)})})]})}),v.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(K,{className:"w-12 h-12 text-indigo-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No articles found"}),e.jsx("p",{className:"text-indigo-200",children:"Create your first article to get started."})]})]})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-indigo-900 border border-indigo-700 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-black text-white heading-block uppercase",children:c?"Edit Article":"Create New Article"}),e.jsx("button",{onClick:()=>{u(!1),h(null),k(Z)},className:"text-indigo-400 hover:text-white transition-colors",children:e.jsx(re,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Article Title"}),e.jsx("input",{type:"text",required:!0,value:p.title,onChange:o=>k(C=>({...C,title:o.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter article title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Category"}),e.jsx("select",{value:p.category,onChange:o=>k(C=>({...C,category:o.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:Oe.map(o=>e.jsx("option",{value:o,children:o},o))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Content Type"}),e.jsx("select",{value:p.type,onChange:o=>k(C=>({...C,type:o.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:Qt.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Excerpt"}),e.jsx("textarea",{required:!0,value:p.excerpt,onChange:o=>k(C=>({...C,excerpt:o.target.value})),rows:3,className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Brief excerpt or summary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Content"}),e.jsx("textarea",{required:!0,value:p.content,onChange:o=>k(C=>({...C,content:o.target.value})),rows:10,className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Full article content"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Author"}),e.jsx("input",{type:"text",required:!0,value:p.author,onChange:o=>k(C=>({...C,author:o.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Article author"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Priority"}),e.jsxs("select",{value:p.priority,onChange:o=>k(C=>({...C,priority:o.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),p.type==="curated"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Source"}),e.jsx("input",{type:"text",value:p.source,onChange:o=>k(C=>({...C,source:o.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Original source name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Source URL"}),e.jsx("input",{type:"url",value:p.externalUrl,onChange:o=>k(C=>({...C,externalUrl:o.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"https://..."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Tags (comma-separated)"}),e.jsx("input",{type:"text",value:p.tags,onChange:o=>k(C=>({...C,tags:o.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"policy, rights, community"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Featured Image URL"}),e.jsx("input",{type:"url",value:p.imageUrl,onChange:o=>k(C=>({...C,imageUrl:o.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"https://..."})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:p.featured,onChange:o=>k(C=>({...C,featured:o.target.checked})),className:"mr-2"}),e.jsx("label",{className:"text-indigo-200",children:"Featured Article"})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-indigo-700",children:[e.jsx("button",{type:"button",onClick:()=>{u(!1),h(null),k(Z)},className:"px-6 py-2 border border-indigo-600 text-indigo-200 rounded hover:bg-indigo-800/50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-emerald-600 to-indigo-600 text-white font-bold rounded hover:from-emerald-500 hover:to-indigo-500 transition-all",children:c?"Update Article":"Create Article"})]})]})]})})})]})]})}function Kt(){return e.jsx(Ve,{requiredRole:"moderator",title:"Newsroom Admin Dashboard",children:e.jsx(Vt,{})})}const Jt=()=>{const[r,t]=x.useState([]),[s,a]=x.useState({pendingSocial:0,approvedToday:0,scheduledPosts:0,platforms:{twitter:0,instagram:0,linkedin:0,facebook:0}}),[i,m]=x.useState(!0),[d,v]=x.useState(null);x.useEffect(()=>{f();const n=setInterval(f,3e4);return()=>clearInterval(n)},[]);const f=async()=>{try{m(!0);const y=await(await fetch("/api/social-content")).json();if(y.success&&y.content_entries){const b=[];y.content_entries.forEach(j=>{Object.entries(j.content).forEach(([S,T])=>{T.text&&T.status==="success"&&b.push({id:`${j.id}_${S}`,type:S,content_type:j.type,title:`${j.type} - ${S}`,content:{text:T.text,scheduled_date:j.scheduled_date,hashtags:N(T.text)},status:j.status||"pending",moderation_result:j.moderation_result,workflow_run_id:j.workflow_runs[S]||"",generated_at:T.generated_at,approved_at:j.approved_at,rejected_at:j.rejected_at,rejection_reason:j.rejection_reason})})}),t(b),u(b)}}catch(n){console.error("Failed to load social media queue:",n),t([])}finally{m(!1)}},N=n=>(n.match(/#[\w]+/g)||[]).map(b=>b.substring(1)),u=n=>{const y=n.filter(S=>S.status==="pending").length,b=n.filter(S=>S.approved_at&&new Date(S.approved_at).toDateString()===new Date().toDateString()).length,j={twitter:n.filter(S=>S.type==="twitter").length,instagram:n.filter(S=>S.type==="instagram").length,linkedin:n.filter(S=>S.type==="linkedin").length,facebook:n.filter(S=>S.type==="facebook").length};a({pendingSocial:y,approvedToday:b,scheduledPosts:n.filter(S=>S.status==="approved").length,platforms:j})},c=async(n,y,b)=>{try{const j=r.find(l=>l.id===n);if(!j)return;const[S,T]=n.split("_");if(!(await fetch("/api/social-content/moderate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content_id:S,platform:T,action:y,reason:b,moderator:"admin",moderated_at:new Date().toISOString()})})).ok)throw new Error("Failed to update social content");t(l=>l.map(w=>w.id===n?{...w,status:y==="approve"?"approved":"rejected",approved_at:y==="approve"?new Date().toISOString():void 0,rejected_at:y==="reject"?new Date().toISOString():void 0,rejection_reason:b}:w)),$(`Social Content ${y==="approve"?"Approved":"Rejected"}`,`${T} content for ${j.content_type} has been ${y==="approve"?"approved":"rejected"}`);const B=r.map(l=>l.id===n?{...l,status:y==="approve"?"approved":"rejected"}:l);u(B)}catch(j){console.error("Social moderation failed:",j),H("Moderation Failed","Failed to process social media moderation. Please try again.")}},h=n=>{switch(n){case"twitter":return e.jsx(yt,{className:"w-5 h-5 text-blue-400"});case"instagram":return e.jsx(ft,{className:"w-5 h-5 text-pink-500"});case"linkedin":return e.jsx(bt,{className:"w-5 h-5 text-blue-600"});case"facebook":return e.jsx(pt,{className:"w-5 h-5 text-blue-800"});default:return e.jsx(xe,{className:"w-5 h-5 text-gray-500"})}},p=n=>{switch(n){case"carnival":return"bg-purple-100 text-purple-800";case"recruitment":return"bg-blue-100 text-blue-800";case"alain_locke":return"bg-green-100 text-green-800";case"business_network":return"bg-orange-100 text-orange-800";case"website_launch":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},k=n=>new Date(n).toLocaleString(),E=r.filter(n=>n.status==="pending"),A=r.filter(n=>n.status==="approved");return i?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Loading social media queue..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Social"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:s.pendingSocial})]}),e.jsx(q,{className:"w-8 h-8 text-purple-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Approved Today"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:s.approvedToday})]}),e.jsx(z,{className:"w-8 h-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Scheduled Posts"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:s.scheduledPosts})]}),e.jsx(U,{className:"w-8 h-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Content"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:r.length})]}),e.jsx(we,{className:"w-8 h-8 text-orange-600"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Platform Breakdown"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(s.platforms).map(([n,y])=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[h(n),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 capitalize",children:n}),e.jsxs("p",{className:"text-sm text-gray-600",children:[y," items"]})]})]},n))})]}),E.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pending Social Media Content"}),e.jsx("p",{className:"text-gray-600",children:"Review and approve generated social media posts"})]}),e.jsx("div",{className:"divide-y divide-gray-200",children:E.map(n=>e.jsx("div",{className:"px-6 py-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[h(n.type),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${p(n.content_type)}`,children:n.content_type.replace("_"," ").toUpperCase()}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Scheduled: ",k(n.content.scheduled_date)]})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-3",children:e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:n.content.text})}),n.content.hashtags&&n.content.hashtags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsx(gt,{className:"w-4 h-4 text-gray-400 mt-1"}),n.content.hashtags.map((y,b)=>e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:["#",y]},b))]}),n.moderation_result?.issues&&n.moderation_result.issues.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"text-sm font-medium text-red-600 mb-1",children:"Issues:"}),e.jsx("ul",{className:"text-sm text-red-600 list-disc list-inside",children:n.moderation_result.issues.map((y,b)=>e.jsx("li",{children:y},b))})]}),n.moderation_result?.recommendations&&n.moderation_result.recommendations.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-600 mb-1",children:"Recommendations:"}),e.jsx("ul",{className:"text-sm text-yellow-600 list-disc list-inside",children:n.moderation_result.recommendations.map((y,b)=>e.jsx("li",{children:y},b))})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Generated: ",k(n.generated_at)," â€¢ ",n.content.text.length," characters"]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-6",children:[e.jsxs("button",{onClick:()=>c(n.id,"approve"),className:"flex items-center gap-1 px-3 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(z,{className:"w-4 h-4"}),"Approve"]}),e.jsxs("button",{onClick:()=>{const y=prompt("Reason for rejection:");y&&c(n.id,"reject",y)},className:"flex items-center gap-1 px-3 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(re,{className:"w-4 h-4"}),"Reject"]}),e.jsxs("button",{onClick:()=>v(n),className:"flex items-center gap-1 px-3 py-2 bg-gray-600 text-white text-sm rounded-lg hover:bg-gray-700 transition-colors",children:[e.jsx(Q,{className:"w-4 h-4"}),"Preview"]})]})]})},n.id))})]}),A.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recently Approved Content"}),e.jsx("p",{className:"text-gray-600",children:"Content ready for publishing"})]}),e.jsx("div",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto",children:A.slice(0,5).map(n=>e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[h(n.type),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${p(n.content_type)}`,children:n.content_type.replace("_"," ").toUpperCase()}),e.jsxs("span",{className:"text-sm text-gray-900 truncate max-w-xs",children:[n.content.text.substring(0,60),"..."]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-600",children:"Approved"}),e.jsx("span",{className:"text-xs text-gray-500",children:n.approved_at&&k(n.approved_at)})]})]})},n.id))})]}),E.length===0&&A.length===0&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(xe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Social Media Content"}),e.jsx("p",{className:"text-gray-600",children:"No social media content found. Generate some content first!"})]})]})},Wt=()=>{const[r,t]=x.useState({pendingCount:0,todayActions:0,activeModerators:1,newsroomQueue:0,eventsQueue:0,communityQueue:0,socialQueue:0}),[s,a]=x.useState([]),[i,m]=x.useState("all"),[d,v]=x.useState(""),[f,N]=x.useState(!0),[u,c]=x.useState("traditional");x.useEffect(()=>{h()},[]);const h=async()=>{try{N(!0);let n=[];try{console.log("Fetching data from Supabase...");const[j,S]=await Promise.all([L.from("events").select("*").in("status",["draft","pending"]),L.from("newsroom_articles").select("*").in("status",["draft","pending"])]);console.log("Events result:",j),console.log("Articles result:",S),j.data?(console.log("Processing events:",j.data),j.data.forEach(T=>{console.log("Adding event to queue:",T.title),n.push({id:T.id,type:"event",title:T.title,content:{description:T.description,date:T.date,time:T.start_time,location:T.location||"TBD"},submittedBy:T.source==="manual"?"Chrome Extension":T.organizer||"Unknown",submittedAt:new Date(T.created_at),status:"pending",flags:T.tags?.includes("community-submitted")?["community-submitted"]:[],priority:"medium"})})):console.log("No events data found"),S.data?(console.log("Processing articles:",S.data),S.data.forEach(T=>{console.log("Adding article to queue:",T.title),n.push({id:T.id,type:"newsroom_article",title:T.title,content:{excerpt:T.excerpt||T.content},submittedBy:T.source_url?"Chrome Extension":"Unknown",submittedAt:new Date(T.created_at),status:"pending",flags:["community-submitted"],priority:"medium"})})):console.log("No articles data found")}catch(j){console.error("Supabase error:",j),console.log("ERROR - Skipping fallback to focus on Supabase data only")}n.sort((j,S)=>S.submittedAt.getTime()-j.submittedAt.getTime()),a(n);const y=n.filter(j=>j.type==="event").length,b=n.filter(j=>j.type==="newsroom_article").length;t({pendingCount:n.length,todayActions:0,activeModerators:1,newsroomQueue:b,eventsQueue:y,communityQueue:0,socialQueue:0})}catch(n){console.error("Failed to load moderation queue:",n),a([])}finally{N(!1)}},p=async(n,y,b)=>{try{const j=s.find(S=>S.id===n);if(!j)return;if(j.type==="event"){if(!(await fetch(`/api/events?id=${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:y==="approved"?"approved":"rejected",moderatorNotes:b,moderatedAt:new Date().toISOString(),moderatedBy:"admin"})})).ok)throw new Error("Failed to update event")}else if(j.type==="newsroom_article"&&!(await fetch(`/api/articles?id=${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:y==="approved"?"approved":"rejected",moderatorNotes:b,moderatedAt:new Date().toISOString(),moderatedBy:"admin"})})).ok)throw new Error("Failed to update article");a(S=>S.filter(T=>T.id!==n)),t(S=>({...S,pendingCount:S.pendingCount-1,todayActions:S.todayActions+1,newsroomQueue:j.type==="newsroom_article"?S.newsroomQueue-1:S.newsroomQueue,eventsQueue:j.type==="event"?S.eventsQueue-1:S.eventsQueue})),$(`${j.type==="event"?"Event":"Article"} ${y}`,`The ${j.type} has been ${y} successfully`)}catch(j){console.error("Moderation action failed:",j),H("Moderation Failed","Failed to process moderation action. Please try again.")}},k=n=>{switch(n){case"urgent":return"text-red-600 bg-red-50 border-red-200";case"high":return"text-orange-600 bg-orange-50 border-orange-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},E=n=>{switch(n){case"newsroom_article":return e.jsx(F,{className:"w-5 h-5"});case"event":return e.jsx(U,{className:"w-5 h-5"});case"community_story":return e.jsx(D,{className:"w-5 h-5"});case"comment":return e.jsx(ue,{className:"w-5 h-5"});default:return e.jsx(F,{className:"w-5 h-5"})}},A=s.filter(n=>{const y=i==="all"||n.type===i,b=d===""||n.title.toLowerCase().includes(d.toLowerCase())||n.submittedBy.toLowerCase().includes(d.toLowerCase());return y&&b&&n.status==="pending"});return f?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading moderation dashboard..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"py-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"BLKOUT Moderation Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Community content management and safety"}),e.jsxs("div",{className:"flex space-x-1 mt-6",children:[e.jsx("button",{onClick:()=>c("traditional"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${u==="traditional"?"bg-purple-600 text-white":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4"}),"Traditional Content"]})}),e.jsx("button",{onClick:()=>c("social"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${u==="social"?"bg-purple-600 text-white":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"w-4 h-4"}),"Social Media"]})})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:u==="social"?e.jsx(Jt,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Review"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:r.pendingCount})]}),e.jsx(q,{className:"w-8 h-8 text-purple-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Today's Actions"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:r.todayActions})]}),e.jsx(we,{className:"w-8 h-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Moderators"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:r.activeModerators})]}),e.jsx(D,{className:"w-8 h-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Flagged Items"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:s.filter(n=>n.status==="flagged").length})]}),e.jsx(jt,{className:"w-8 h-8 text-red-600"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Newsroom Queue"}),e.jsx(F,{className:"w-6 h-6 text-purple-600"})]}),e.jsx("p",{className:"text-3xl font-bold text-purple-600 mb-2",children:r.newsroomQueue}),e.jsx("button",{className:"w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors",children:"Review Articles"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Events Queue"}),e.jsx(U,{className:"w-6 h-6 text-blue-600"})]}),e.jsx("p",{className:"text-3xl font-bold text-blue-600 mb-2",children:r.eventsQueue}),e.jsx("button",{className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Review Events"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Community Queue"}),e.jsx(D,{className:"w-6 h-6 text-green-600"})]}),e.jsx("p",{className:"text-3xl font-bold text-green-600 mb-2",children:r.communityQueue}),e.jsx("button",{className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors",children:"Review Stories"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(qe,{className:"w-5 h-5 text-gray-400"}),e.jsxs("select",{value:i,onChange:n=>m(n.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"All Content"}),e.jsx("option",{value:"newsroom_article",children:"Newsroom Articles"}),e.jsx("option",{value:"event",children:"Events"}),e.jsx("option",{value:"community_story",children:"Community Stories"}),e.jsx("option",{value:"comment",children:"Comments"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ve,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),e.jsx("input",{type:"text",placeholder:"Search content...",value:d,onChange:n=>v(n.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm w-full sm:w-80"})]})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:A.length===0?e.jsxs("div",{className:"px-6 py-12 text-center",children:[e.jsx(q,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No items in queue"}),e.jsx("p",{className:"text-gray-600",children:"All content has been reviewed. Great work!"})]}):A.map(n=>e.jsx("div",{className:"px-6 py-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[E(n.type),e.jsx("h3",{className:"font-medium text-gray-900",children:n.title}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${k(n.priority)}`,children:n.priority.toUpperCase()})]}),e.jsxs("p",{className:"text-gray-600 mb-3",children:[n.type==="newsroom_article"&&n.content.excerpt,n.type==="event"&&`${new Date(n.content.date).toLocaleDateString()} - ${n.content.location}`,n.type==="community_story"&&n.content.excerpt]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:n.flags.map((y,b)=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:y},b))}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Submitted by ",n.submittedBy," â€¢ ",new Date(n.submittedAt).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-6",children:[e.jsxs("button",{onClick:()=>p(n.id,"approved"),className:"flex items-center gap-1 px-3 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(z,{className:"w-4 h-4"}),"Approve"]}),e.jsxs("button",{onClick:()=>{const y=prompt("Reason for rejection:");y&&p(n.id,"rejected",y)},className:"flex items-center gap-1 px-3 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(re,{className:"w-4 h-4"}),"Reject"]}),e.jsxs("button",{onClick:()=>p(n.id,"flagged"),className:"flex items-center gap-1 px-3 py-2 bg-yellow-600 text-white text-sm rounded-lg hover:bg-yellow-700 transition-colors",children:[e.jsx(vt,{className:"w-4 h-4"}),"Flag"]}),e.jsxs("button",{className:"flex items-center gap-1 px-3 py-2 bg-gray-600 text-white text-sm rounded-lg hover:bg-gray-700 transition-colors",children:[e.jsx(Q,{className:"w-4 h-4"}),"Preview"]})]})]})},n.id))})]})]})})]})},Gt={showToast:!0,logToConsole:!0,retryable:!0,fallbackMessage:"An unexpected error occurred. Please try again."},Je=(r={})=>{const t={...Gt,...r},[s,a]=x.useState(null),i=x.useCallback((u,c)=>{let h;if(u instanceof Error?h={hasError:!0,message:u.message||t.fallbackMessage,details:u.stack,retryable:t.retryable}:typeof u=="string"?h={hasError:!0,message:u,retryable:t.retryable}:u?.message?h={hasError:!0,message:u.message||t.fallbackMessage,code:u.code||u.status,details:u.details||JSON.stringify(u),retryable:u.retryable??t.retryable}:h={hasError:!0,message:t.fallbackMessage,details:JSON.stringify(u),retryable:t.retryable},t.logToConsole){const p=c?`[${c}]`:"[Error]";console.error(`${p}:`,u)}return a(h),t.showToast&&console.warn("Toast notification:",h.message),h},[t]),m=x.useCallback(()=>{a(null)},[]),d=x.useCallback(u=>{if(s?.retryable){m();try{const c=u();c instanceof Promise&&c.catch(h=>i(h,"Retry failed"))}catch(c){i(c,"Retry failed")}}},[s,m,i]),v=x.useCallback((u,c)=>{const h=c?`API Error - ${c}`:"API Error";return u?.response?.status===401?i("Authentication required. Please sign in.",h):u?.response?.status===403?i("Access denied. You do not have permission for this action.",h):u?.response?.status===404?i("The requested resource was not found.",h):u?.response?.status===429?i("Too many requests. Please wait a moment and try again.",h):u?.response?.status>=500?i("Server error. Please try again later.",h):u?.code==="NETWORK_ERROR"||u?.message?.includes("fetch")?i("Network connection error. Please check your internet connection.",h):i(u,h)},[i]),f=x.useCallback((u,c)=>{const h=c?`Supabase Error - ${c}`:"Supabase Error";return u?.code==="23505"?i("This item already exists.",h):u?.code==="23503"?i("Cannot perform this action due to related data.",h):u?.code==="42501"?i("Insufficient permissions for this operation.",h):u?.message?.includes("JWT")?i("Authentication expired. Please sign in again.",h):i(u,h)},[i]),N=x.useCallback(u=>{const c=Object.values(u)[0];return i(c||"Please check your input and try again.","Form Validation")},[i]);return{error:s,hasError:!!s,handleError:i,handleAPIError:v,handleSupabaseError:f,handleFormValidationError:N,clearError:m,retry:d}};class Yt{baseUrl;timeout;retries;defaultHeaders;authToken=null;constructor(t={}){this.baseUrl=t.baseUrl||this.detectApiUrl(),this.timeout=t.timeout||1e4,this.retries=t.retries||3,this.defaultHeaders={"Content-Type":"application/json",Accept:"application/json",...t.headers},this.loadAuthToken()}detectApiUrl(){return typeof window<"u"&&window.location.hostname==="localhost"&&(window.location.port==="5173"||window.location.port==="3000")?"http://localhost:3000/api":"/api"}loadAuthToken(){try{const t=localStorage.getItem("blkout_auth_token");t&&(this.authToken=t,this.defaultHeaders.Authorization=`Bearer ${t}`)}catch(t){console.warn("Failed to load auth token:",t)}}setAuthToken(t){this.authToken=t,t?(this.defaultHeaders.Authorization=`Bearer ${t}`,localStorage.setItem("blkout_auth_token",t)):(delete this.defaultHeaders.Authorization,localStorage.removeItem("blkout_auth_token"))}async makeRequest(t,s={},a=0){const i=`${this.baseUrl}${t}`,m={...s,headers:{...this.defaultHeaders,...s.headers},signal:AbortSignal.timeout(this.timeout)};try{console.log(`ðŸŒ API Request: ${s.method||"GET"} ${i}`);const d=await fetch(i,m);if(!d.ok){if(d.status===401)throw this.setAuthToken(null),new Error("Authentication required");if(d.status===403)throw new Error("Access denied");if(d.status===404)throw new Error("Resource not found");if(d.status>=500)throw new Error("Server error");try{const f=await d.json();throw new Error(f.message||f.error||`HTTP ${d.status}`)}catch{throw new Error(`HTTP ${d.status}: ${d.statusText}`)}}const v=await d.json();return console.log(`âœ… API Success: ${s.method||"GET"} ${i}`),v}catch(d){return console.error(`âŒ API Error: ${s.method||"GET"} ${i}`,d),a<this.retries&&this.isRetryableError(d)?(console.log(`ðŸ”„ Retrying request (${a+1}/${this.retries})`),await this.delay(Math.pow(2,a)*1e3),this.makeRequest(t,s,a+1)):{success:!1,error:d instanceof Error?d.message:"Unknown error occurred",data:void 0}}}isRetryableError(t){return t instanceof TypeError&&t.message.includes("fetch")?!0:(t.name==="AbortError",!1)}delay(t){return new Promise(s=>setTimeout(s,t))}buildQueryString(t){const s=new URLSearchParams;Object.entries(t).forEach(([i,m])=>{m!=null&&m!==""&&(Array.isArray(m)?m.forEach(d=>s.append(i,d.toString())):s.append(i,m.toString()))});const a=s.toString();return a?`?${a}`:""}async checkHealth(){try{const t=await this.makeRequest("/health");return{healthy:t.success,backend:this.baseUrl,timestamp:t.data?.timestamp||new Date().toISOString()}}catch{return{healthy:!1,backend:this.baseUrl,timestamp:new Date().toISOString()}}}async getArticles(t={}){const s=this.buildQueryString({page:t.page||1,limit:t.limit||20,category:t.category,status:t.status,author_id:t.author_id,search:t.search,sort:t.sort||"published_at",order:t.order||"desc"});return this.makeRequest(`/newsroom/articles${s}`)}async getArticle(t){return this.makeRequest(`/newsroom/articles/${t}`)}async createArticle(t){return this.makeRequest("/newsroom/articles",{method:"POST",body:JSON.stringify(t)})}async updateArticle(t,s){return this.makeRequest(`/newsroom/articles/${t}`,{method:"PUT",body:JSON.stringify(s)})}async deleteArticle(t){return this.makeRequest(`/newsroom/articles/${t}`,{method:"DELETE"})}async getEvents(t={}){const s=this.buildQueryString({page:t.page||1,limit:t.limit||20,start_date:t.start_date,end_date:t.end_date,event_type:t.event_type,location:t.location,status:t.status,organizer_id:t.organizer_id,search:t.search,sort:t.sort||"start_date",order:t.order||"asc"});return this.makeRequest(`/events${s}`)}async getEvent(t){return this.makeRequest(`/events/${t}`)}async createEvent(t){return this.makeRequest("/events",{method:"POST",body:JSON.stringify(t)})}async updateEvent(t,s){return this.makeRequest(`/events/${t}`,{method:"PUT",body:JSON.stringify(s)})}async deleteEvent(t){return this.makeRequest(`/events/${t}`,{method:"DELETE"})}async signIn(t,s){return this.makeRequest("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:s})})}async signOut(){const t=await this.makeRequest("/auth/logout",{method:"POST"});return t.success&&this.setAuthToken(null),t}async getCommunityStats(){return this.makeRequest("/community/stats")}async getCommunityDocumentation(){return this.makeRequest("/documentation")}async uploadFile(t,s="image"){const a=new FormData;a.append("file",t),a.append("type",s);const i={...this.defaultHeaders};return delete i["Content-Type"],this.makeRequest("/upload",{method:"POST",body:a,headers:i})}}const Xt=new Yt;let Zt;try{Zt=require("react")}catch{}const he={"Breaking News":{color:"bg-red-600",textColor:"text-red-400",gradient:"from-red-500 via-red-600 to-red-700",glowColor:"shadow-red-500/25"},Analysis:{color:"bg-indigo-600",textColor:"text-indigo-400",gradient:"from-indigo-500 via-indigo-600 to-indigo-700",glowColor:"shadow-indigo-500/25"},"Community News":{color:"bg-emerald-600",textColor:"text-emerald-400",gradient:"from-emerald-500 via-emerald-600 to-emerald-700",glowColor:"shadow-emerald-500/25"},"Policy Update":{color:"bg-slate-600",textColor:"text-slate-400",gradient:"from-slate-500 via-slate-600 to-slate-700",glowColor:"shadow-slate-500/25"},International:{color:"bg-violet-600",textColor:"text-violet-400",gradient:"from-violet-500 via-violet-600 to-violet-700",glowColor:"shadow-violet-500/25"}},es=[{id:"fallback_001",title:"BLKOUT Newsroom Loading",excerpt:"Loading live content from our community contributors and newsroom team.",category:"System",author:"BLKOUT Team",publishedAt:new Date().toISOString(),image:"/images/squared/WELLDEF_SQUARED.png",featured:!1,tags:["loading"],priority:"medium",readTime:1,isBreaking:!1,source:"System"}],ts=({backendStatus:r})=>e.jsxs("section",{className:"relative py-24 bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-emerald-500 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-48 h-48 bg-violet-500 rounded-full blur-3xl"})]}),e.jsx("div",{className:"relative z-10 max-w-6xl mx-auto px-8 text-center",children:e.jsxs(g.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[e.jsxs(g.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2},className:"flex items-center justify-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-emerald-600 to-indigo-600 flex items-center justify-center mr-6",children:e.jsx(K,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-black heading-block uppercase",children:[e.jsx("span",{className:"bg-gradient-to-r from-emerald-400 to-indigo-400 bg-clip-text text-transparent",children:"BLKOUT"}),e.jsx("span",{className:"bg-gradient-to-r from-violet-400 to-slate-400 bg-clip-text text-transparent ml-2",children:"NEWSROOM"})]}),e.jsx("p",{className:"text-indigo-300 font-mono uppercase tracking-wider text-sm",children:"COMMUNITY NEWS & LIBERATION ANALYSIS"})]})]}),e.jsx(g.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"text-xl md:text-2xl text-indigo-100 max-w-4xl mx-auto leading-relaxed font-light mb-12",children:"Curated news, analysis, and community updates that matter to Black queer liberation. Stay informed about policy changes, community events, and movement developments."}),e.jsxs(g.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},className:"flex items-center justify-center space-x-4 mb-12",children:[r==="checking"&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ee,{size:"sm",color:"indigo"}),e.jsx("span",{className:"text-indigo-400 font-bold heading-block text-sm uppercase",children:"CONNECTING TO NEWSROOM"})]}),r==="connected"&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(z,{className:"w-5 h-5 text-emerald-400"}),e.jsx("span",{className:"text-emerald-400 font-bold heading-block text-sm uppercase",children:"NEWSROOM LIVE"}),e.jsxs("div",{className:"flex items-center text-indigo-300 text-sm font-light",children:[e.jsx("span",{children:"â€¢ Real-time updates active"}),lastUpdated&&e.jsxs("span",{className:"ml-3 text-xs",children:["Last updated: ",lastUpdated.toLocaleTimeString()]})]})]}),r==="offline"&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ne,{className:"w-5 h-5 text-amber-400"}),e.jsx("span",{className:"text-amber-400 font-bold heading-block text-sm uppercase",children:"USING CACHED CONTENT"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-indigo-300 text-sm font-light",children:"â€¢ Showing recent stories"}),e.jsxs("button",{onClick:handleRetry,className:"text-amber-400 hover:text-amber-300 text-sm font-medium flex items-center",children:[e.jsx(J,{className:"w-4 h-4 mr-1"}),"Retry"]})]})]})]}),hasError&&e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-4xl mx-auto mb-12",children:e.jsx("div",{className:"bg-red-900/30 backdrop-blur-sm border border-red-700/30 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx(ye,{className:"w-6 h-6 text-red-400 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-red-300 font-bold text-lg mb-2",children:"Connection Error"}),e.jsx("p",{className:"text-red-200 mb-4",children:error?.message}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:handleRetry,className:"flex items-center px-4 py-2 bg-red-600 hover:bg-red-500 text-white font-medium rounded-lg transition-colors",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Retry Connection"]}),e.jsx("button",{onClick:clearError,className:"text-red-300 hover:text-red-200 font-medium",children:"Dismiss"}),retryCount>0&&e.jsxs("span",{className:"text-red-300 text-sm",children:["Retry attempts: ",retryCount]})]})]})]})})}),e.jsx(g.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.8},className:"grid grid-cols-3 gap-8 max-w-2xl mx-auto",children:[{label:"STORIES TODAY",value:"12"},{label:"SOURCES MONITORED",value:"47"},{label:"COMMUNITY UPDATES",value:"8"}].map((t,s)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl md:text-4xl font-black text-white heading-block mb-2",children:t.value}),e.jsx("div",{className:"text-sm text-indigo-300 font-mono uppercase tracking-wider",children:t.label})]},s))})]})})]}),ss=({selectedCategory:r,onCategorySelect:t})=>e.jsx("section",{className:"py-16 bg-indigo-50/5 backdrop-blur-sm border-y border-indigo-800/30",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("h2",{className:"text-3xl md:text-4xl font-black heading-block mb-4 uppercase",children:[e.jsx("span",{className:"bg-gradient-to-r from-emerald-400 to-violet-400 bg-clip-text text-transparent",children:"NEWS"}),e.jsx("span",{className:"bg-gradient-to-r from-indigo-400 to-slate-400 bg-clip-text text-transparent ml-4",children:"CATEGORIES"})]}),e.jsx("p",{className:"text-indigo-200 font-light text-lg",children:"Stay informed across all areas that impact our community"})]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-4",children:["All",...Object.keys(he)].map(s=>e.jsx(g.button,{onClick:()=>t(s),whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},className:`px-6 py-3 font-bold text-sm transition-all duration-300 heading-block uppercase ${r===s?"bg-gradient-to-r from-indigo-600 to-violet-600 text-white":"bg-indigo-900/30 text-indigo-300 hover:bg-indigo-800/50 hover:text-white border border-indigo-700/30"}`,children:s},s))})]})}),as=({articles:r,loading:t,onRefresh:s})=>e.jsx("section",{className:"py-24",children:e.jsx("div",{className:"max-w-6xl mx-auto px-8",children:t?e.jsxs(g.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-24",children:[e.jsx(ee,{size:"xl",color:"indigo",text:"Loading Articles"}),e.jsx("p",{className:"text-indigo-200 font-light mt-6",children:"Fetching the latest community news and updates..."})]}):r.length===0?e.jsxs(g.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-24",children:[e.jsx(be,{className:"w-16 h-16 text-indigo-400 mx-auto mb-6"}),e.jsx("h3",{className:"text-2xl font-black text-white heading-block mb-4 uppercase",children:"NO ARTICLES AVAILABLE"}),e.jsx("p",{className:"text-indigo-200 font-light mb-8",children:"Newsroom backend is connecting. Articles will appear here as they are aggregated."}),e.jsxs(g.button,{onClick:s,whileHover:{scale:1.02},whileTap:{scale:.98},className:"px-8 py-3 bg-indigo-600 text-white font-bold hover:bg-indigo-500 transition-colors heading-block uppercase flex items-center mx-auto",children:[e.jsx(J,{className:"w-4 h-4 mr-3"}),"REFRESH"]})]}):e.jsx("div",{className:"space-y-8",children:r.map((a,i)=>{const m=he[a.category]||he.Analysis;return e.jsx(g.article,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:i*.1},className:"bg-indigo-900/20 backdrop-blur-sm border border-indigo-700/20 overflow-hidden hover:bg-indigo-900/40 transition-all duration-500 cursor-pointer group",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.image&&e.jsx("div",{className:"lg:col-span-1 aspect-[4/3] overflow-hidden",children:e.jsx("img",{src:a.image,alt:a.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"})}),e.jsxs("div",{className:`${a.image?"lg:col-span-2":"lg:col-span-3"} p-8`,children:[e.jsxs("div",{className:"flex items-center mb-4",children:[a.isBreaking&&e.jsx("span",{className:"px-3 py-1 bg-red-600 text-white text-xs font-bold heading-block uppercase mr-4 animate-pulse",children:"BREAKING"}),e.jsx("div",{className:`w-3 h-3 bg-gradient-to-r ${m.gradient} mr-3`}),e.jsx("span",{className:"text-indigo-300 font-mono uppercase tracking-wider text-sm",children:a.category}),e.jsx("span",{className:"mx-3 text-indigo-600",children:"â€¢"}),e.jsx("span",{className:"text-sm text-indigo-400",children:a.source})]}),e.jsx("h2",{className:"text-2xl md:text-3xl font-black heading-block mb-4 leading-tight group-hover:text-white transition-colors",children:e.jsx("span",{className:`bg-gradient-to-r ${m.gradient} bg-clip-text text-transparent group-hover:text-white`,children:a.title})}),e.jsx("p",{className:"text-indigo-100 mb-6 leading-relaxed font-light text-lg",children:a.excerpt}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6 text-sm text-indigo-300",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),a.readTime," min read"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ke,{className:"w-4 h-4 mr-2"}),a.author]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),new Date(a.publishedAt).toLocaleDateString()]})]}),e.jsxs(g.button,{whileHover:{x:5},className:"flex items-center text-indigo-400 hover:text-white transition-colors font-bold heading-block uppercase text-sm",children:["READ FULL STORY",e.jsx(Se,{className:"w-4 h-4 ml-2"})]})]})]})]})},a.id)})})})});function rs(){const[r,t]=x.useState(es),[s,a]=x.useState(!0),[i,m]=x.useState("checking"),[d,v]=x.useState("All"),[f,N]=x.useState(0),[u,c]=x.useState(null),{handleAPIError:h,clearError:p,retry:k}=Je({showToast:!0,retryable:!0}),E=b=>{const j=b.profiles?.full_name||"BLKOUT Team",S=j.split(" ").map(T=>T[0]).join("").toUpperCase();return{...b,readTime:Math.max(1,Math.ceil((b.content?.length||0)/1e3)),isBreaking:b.status==="published"&&b.featured_image!==null,publishedAtFormatted:new Date(b.published_at||b.created_at).toLocaleDateString(),authorName:j,authorInitials:S,author:j,publishedAt:b.published_at||b.created_at,image:b.featured_image||"/images/squared/WELLDEF_SQUARED.png",featured:!!b.featured_image,priority:"medium",source:"BLKOUT Newsroom"}},A=async()=>{try{p(),a(!0),m("checking"),console.log("ðŸ”„ Fetching articles from Supabase API...");const b=await Xt.getArticles({status:"published",sort:"published_at",order:"desc",limit:20});if(console.log("ðŸ“Š Articles API response:",b),b.success&&b.data&&Array.isArray(b.data)){const j=b.data.map(E);console.log("âœ… Articles transformed successfully:",j.length),j.length>0?(t(j),m("connected")):(console.log("ðŸ“° No published articles found, keeping fallback content"),m("connected")),c(new Date)}else throw new Error(b.error||"Failed to fetch articles")}catch(b){console.error("âŒ Error fetching articles:",b),h(b,"newsroom API"),m("offline")}finally{a(!1)}};x.useEffect(()=>{A()},[]);const n=()=>{N(b=>b+1),k(()=>A())},y=r.filter(b=>d==="All"||b.category===d);return e.jsxs(me,{children:[e.jsx(se,{pageName:"Newsroom",dependencies:["Supabase","API Client"]}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900",children:[e.jsx(W,{}),e.jsx(ts,{backendStatus:i}),e.jsx(ss,{selectedCategory:d,onCategorySelect:v}),e.jsx(me,{onError:(b,j)=>{console.error("NewsArticlesGrid Error:",b,j),h(b,"NewsArticlesGrid")},children:e.jsx(as,{articles:y,loading:s,onRefresh:n})}),e.jsx(pe,{})]})]})}class is{baseUrl;isConnected=!1;supabaseConnected=!1;useSupabase=!0;constructor(){this.baseUrl="/api",this.checkSupabaseConnection()}async checkSupabaseConnection(){try{const{connected:t}=await Ce.testConnection();return this.supabaseConnected=t,t?console.log("âœ… Supabase events connection established"):console.warn("âš ï¸ Supabase events connection failed, falling back to legacy backend"),t}catch(t){return console.error("âŒ Supabase events connection test failed:",t),this.supabaseConnected=!1,!1}}async getAllEvents(){if(this.useSupabase&&this.supabaseConnected)try{return await this.getEventsFromSupabase()}catch(t){console.warn("Supabase events fetch failed, trying legacy backend:",t)}try{const t=await fetch(`${this.baseUrl}/events`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();return s.success&&s.events?s.events.map(a=>({id:a.id,title:a.title,description:a.description,date:a.date,startTime:a.time,endTime:a.endTime,location:typeof a.location=="string"?a.location:a.location?.address||"TBD",url:a.url||a.registrationUrl,source:a.category?.toLowerCase()||"community",status:a.status==="published"?"approved":a.status,cost:a.cost||(a.capacity,"Free"),organizer:a.organizer,image:a.image,tags:a.tags||[],createdAt:a.createdAt,updatedAt:a.updatedAt||a.createdAt})):[]}catch(t){return console.error("âŒ Events backend failed, using mock data:",t),this.getMockEvents()}}async getEventsFromSupabase(t){let s=L.from("events").select(`
        *,
        organizer:contacts(name)
      `).order("event_date",{ascending:!0});t?.source&&t.source!=="all"&&(s=s.eq("source",t.source)),t?.status&&t.status!=="all"&&(t.status==="pending"?s=s.in("status",["draft","reviewing"]):t.status==="approved"?s=s.eq("status","published"):t.status==="rejected"?s=s.eq("status","archived"):s=s.eq("status",t.status));const{data:a,error:i}=await s;if(i)throw i;const m=(a||[]).map(d=>({id:d.id,title:d.name,description:d.description,date:d.event_date,startTime:this.extractTimeFromDate(d.event_date),endTime:void 0,location:typeof d.location=="string"?d.location:JSON.stringify(d.location),url:d.source_url||d.registration_link,source:d.source,status:this.mapSupabaseStatus(d.status),cost:d.price||"Free",organizer:d.organizer?.name||d.organizer_name||"Unknown Organizer",image:d.image_url||void 0,tags:d.tags||[],createdAt:d.created_at,updatedAt:d.updated_at}));return this.applyClientFilters(m,t)}mapSupabaseStatus(t){switch(t){case"published":return"approved";case"draft":case"reviewing":return"pending";case"archived":return"rejected";default:return"pending"}}extractTimeFromDate(t){try{const s=new Date(t);return s.getHours()===0&&s.getMinutes()===0?void 0:s.toTimeString().substring(0,5)}catch{return}}applyClientFilters(t,s){return s?t.filter(a=>{if(s.dateRange!=="all"){const i=new Date(a.date),m=new Date,d=Math.ceil((i.getTime()-m.getTime())/(1e3*60*60*24));if(s.dateRange==="today"&&d!==0||s.dateRange==="week"&&d>7||s.dateRange==="month"&&d>30)return!1}if(s.location&&!a.location.toLowerCase().includes(s.location.toLowerCase()))return!1;if(s.searchTerm){const i=s.searchTerm.toLowerCase();return a.title.toLowerCase().includes(i)||a.description.toLowerCase().includes(i)||a.tags&&a.tags.some(m=>m.toLowerCase().includes(i))}return!0}):t}async getEventStats(){if(this.useSupabase&&this.supabaseConnected)try{return await this.getStatsFromSupabase()}catch(t){console.warn("Supabase stats fetch failed, trying legacy backend:",t)}try{const t=await fetch(`${this.baseUrl}/events/stats`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){console.warn("Events stats not available, using mock data:",t);const s=await this.getMockEvents();return{pending:s.filter(a=>a.status==="pending").length,approved:s.filter(a=>a.status==="approved").length,rejected:s.filter(a=>a.status==="rejected").length,total:s.length}}}async getStatsFromSupabase(){const{data:t,error:s}=await L.from("events").select("status");return s||!t?{pending:0,approved:0,rejected:0,total:0}:t.reduce((i,m)=>(i.total++,(m.status==="draft"||m.status==="reviewing")&&i.pending++,m.status==="published"&&i.approved++,m.status==="archived"&&i.rejected++,i),{pending:0,approved:0,rejected:0,total:0})}async submitEvent(t){if(this.useSupabase&&this.supabaseConnected)try{return await this.submitEventToSupabase(t)}catch(s){console.warn("Supabase event submission failed, trying legacy backend:",s)}try{const s=await fetch(`${this.baseUrl}/events`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(s){throw console.error("Failed to submit event:",s),s}}async submitEventToSupabase(t){let s=null;if(t.organizer){const{data:m}=await L.from("contacts").select("id").eq("name",t.organizer).single();if(m)s=m.id;else{const{data:d,error:v}=await L.from("contacts").insert({name:t.organizer,email:`${t.organizer.toLowerCase().replace(/\s+/g,".")}@example.com`}).select().single();!v&&d&&(s=d.id)}}const{data:a,error:i}=await L.from("events").insert({name:t.title||"",description:t.description||"",event_date:t.date||new Date().toISOString(),location:t.location||"TBD",source:t.source||"community",source_url:t.url,organizer_id:s,organizer_name:t.organizer,tags:t.tags||[],status:"draft",scraped_date:new Date().toISOString(),image_url:t.image,price:t.cost,registration_link:t.url}).select().single();if(i)throw i;return{id:a.id,title:a.name,description:a.description,date:a.event_date,location:typeof a.location=="string"?a.location:JSON.stringify(a.location),url:a.source_url||a.registration_link,source:a.source,status:this.mapSupabaseStatus(a.status),cost:a.price||"Free",organizer:a.organizer_name||"Unknown Organizer",image:a.image_url||void 0,tags:a.tags||[],createdAt:a.created_at,updatedAt:a.updated_at}}async updateEventStatus(t,s){if(!this.useSupabase||!this.supabaseConnected)throw new Error("Event status updates require Supabase connection");const a=s==="approved"?"published":s==="rejected"?"archived":"draft",{error:i}=await L.from("events").update({status:a,listed_date:s==="approved"?new Date().toISOString():null}).eq("id",t);return!i}async deleteEvent(t){if(!this.useSupabase||!this.supabaseConnected)throw new Error("Event deletion requires Supabase connection");const{error:s}=await L.from("events").delete().eq("id",t);return!s}async updateEvent(t,s){if(!this.useSupabase||!this.supabaseConnected)throw new Error("Event updates require Supabase connection");const{data:a,error:i}=await L.from("events").update({name:s.title,description:s.description,event_date:s.date,location:s.location,organizer_name:s.organizer,tags:s.tags,price:s.cost,image_url:s.image,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(i)throw i;return a?this.transformSupabaseEvent(a):null}transformSupabaseEvent(t){return{id:t.id,title:t.name,description:t.description,date:t.event_date,startTime:this.extractTimeFromDate(t.event_date),location:typeof t.location=="string"?t.location:JSON.stringify(t.location),url:t.source_url||t.registration_link,source:t.source,status:this.mapSupabaseStatus(t.status),cost:t.price||"Free",organizer:t.organizer_name||"Unknown Organizer",image:t.image_url||void 0,tags:t.tags||[],createdAt:t.created_at,updatedAt:t.updated_at}}async checkBackendHealth(){if(this.useSupabase&&(await this.checkSupabaseConnection(),this.supabaseConnected))return{available:!0,url:"supabase",source:"supabase"};try{return{available:(await fetch(`${this.baseUrl}/health`,{method:"GET"})).ok,url:this.baseUrl,source:"legacy"}}catch{return{available:!1,url:this.baseUrl,source:"fallback"}}}subscribeToEventUpdates(t){return!this.useSupabase||!this.supabaseConnected?(console.warn("Real-time subscriptions require Supabase connection"),null):Ce.subscribeToEvents(t)}getConnectionStatus(){return{supabase:this.supabaseConnected,legacy:this.isConnected,primary:this.supabaseConnected?"supabase":this.isConnected?"legacy":"fallback"}}setPreferSupabase(t){this.useSupabase=t}getMockEvents(){return[{id:"1",title:"Black QTIPOC Community Gathering",description:"Monthly community meetup for Black QTIPOC folks to connect, share resources, and build community. Join us for food, conversation, and mutual support.",date:"2025-08-15",startTime:"18:00",endTime:"21:00",location:"Community Center, Brixton, London",url:"https://www.eventbrite.com/e/black-qtipoc-community-gathering-tickets",source:"community",status:"approved",organizer:"BLKOUT Community",tags:["community","networking","support","social"],createdAt:"2025-07-31",updatedAt:"2025-07-31",cost:"Free"},{id:"2",title:"Liberation Workshop Series: Part 1",description:"Educational workshop exploring liberation theory and practice for Black queer and trans communities. This first session covers historical foundations.",date:"2025-08-22",startTime:"14:00",endTime:"17:00",location:"Online via Zoom",url:"https://liberation-collective.org/workshops/part-1",source:"education",status:"approved",organizer:"Liberation Collective",tags:["education","workshop","liberation","theory"],createdAt:"2025-07-31",updatedAt:"2025-07-31",cost:"Sliding scale Â£5-Â£25"},{id:"3",title:"Black Trans Joy Celebration",description:"A celebration of Black trans joy, resilience, and community. Music, art, performance, and good vibes. All Black trans and gender non-conforming folks welcome.",date:"2025-08-29",startTime:"19:00",endTime:"23:00",location:"South London Community Space",url:"https://blacktranscollectiveuk.org/events/joy-celebration",source:"celebration",status:"approved",organizer:"Black Trans Collective UK",tags:["celebration","trans","joy","performance","music"],createdAt:"2025-07-31",updatedAt:"2025-07-31",cost:"Free with donations welcome"},{id:"4",title:"Wellness Wednesday: Self-Care for Activists",description:"Monthly wellness session focused on self-care practices for Black QTIPOC activists. Meditation, movement, and mutual care practices.",date:"2025-09-05",startTime:"18:30",endTime:"20:30",location:"East London Wellness Center",url:"https://healingjusticecollective.org/wellness-wednesday",source:"wellness",status:"approved",organizer:"Healing Justice Collective",tags:["wellness","self-care","meditation","activism"],createdAt:"2025-07-31",updatedAt:"2025-07-31",cost:"Free"},{id:"5",title:"Queer Black History Walking Tour",description:"Guided walking tour exploring Black queer history in London. Learn about historical figures, locations, and community spaces that shaped our heritage.",date:"2025-09-12",startTime:"11:00",endTime:"13:30",location:"Starting from Piccadilly Circus, London",url:"https://blackhistorywalks.uk/queer-history-tour",source:"education",status:"approved",organizer:"Black History Walks UK",tags:["history","education","walking-tour","heritage"],createdAt:"2025-07-31",updatedAt:"2025-07-31",cost:"Â£15 (concessions available)"},{id:"6",title:"Community Skill Share: Digital Security",description:"Learn essential digital security skills for activists and community organizers. Covers secure communication, privacy tools, and online safety.",date:"2025-09-19",startTime:"15:00",endTime:"18:00",location:"North London Library, Digital Hub",url:"https://techjusticecollective.org/digital-security-workshop",source:"education",status:"approved",organizer:"Tech Justice Collective",tags:["technology","security","education","skills"],createdAt:"2025-07-31",updatedAt:"2025-07-31",cost:"Free"}]}}const le=new is,ns=({event:r,isOpen:t,onClose:s})=>{if(!t||!r)return null;const a=m=>new Date(m).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),i=m=>{if(!m)return"";const[d,v]=m.split(":"),f=new Date;return f.setHours(parseInt(d),parseInt(v)),f.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})};return e.jsx(g.div,{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s,children:e.jsxs(g.div,{className:"bg-yellow-900/90 backdrop-blur-sm border border-yellow-600/40 rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-8",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-yellow-100",children:r.title}),e.jsx("button",{onClick:s,className:"text-yellow-400 hover:text-yellow-300 text-2xl",children:"Ã—"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-yellow-200 mb-3",children:"Event Details"}),e.jsx("p",{className:"text-yellow-100 leading-relaxed",children:r.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-yellow-200",children:[e.jsx(U,{className:"w-5 h-5 mr-3 text-yellow-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:a(r.date)}),r.startTime&&e.jsxs("div",{className:"text-sm",children:[i(r.startTime),r.endTime&&` - ${i(r.endTime)}`]})]})]}),r.location&&e.jsxs("div",{className:"flex items-center text-yellow-200",children:[e.jsx("svg",{className:"w-5 h-5 mr-3 text-yellow-400 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),e.jsx("span",{children:r.location})]}),r.organizer&&e.jsxs("div",{className:"flex items-center text-yellow-200",children:[e.jsx(ke,{className:"w-5 h-5 mr-3 text-yellow-400"}),e.jsx("span",{children:r.organizer})]}),r.cost&&e.jsxs("div",{className:"flex items-center text-yellow-200",children:[e.jsx("svg",{className:"w-5 h-5 mr-3 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),e.jsx("span",{children:r.cost})]})]}),e.jsx("div",{children:r.tags&&r.tags.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-yellow-200 mb-3",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.tags.map((m,d)=>e.jsxs("span",{className:"px-3 py-1 text-sm bg-yellow-600/40 text-yellow-100 rounded-full border border-yellow-500/50",children:["#",m]},d))})]})})]}),r.url&&e.jsx("div",{className:"pt-4 border-t border-yellow-600/30",children:e.jsxs("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-6 py-3 bg-yellow-600 hover:bg-yellow-500 text-white font-semibold rounded-lg transition-colors group",children:["Visit Event Page",e.jsx(Se,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})})]})]})})},os=({event:r,onClick:t})=>{const s=i=>new Date(i).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),a=i=>{if(!i)return"";const[m,d]=i.split(":"),v=new Date;return v.setHours(parseInt(m),parseInt(d)),v.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})};return e.jsxs(g.div,{className:"bg-yellow-800/20 backdrop-blur-sm border border-yellow-600/30 rounded-2xl overflow-hidden hover:bg-yellow-800/30 hover:border-yellow-500/50 transition-all duration-300 group cursor-pointer",whileHover:{scale:1.02},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},onClick:()=>t(r),children:[r.image&&e.jsx("div",{className:"h-48 bg-gradient-to-br from-yellow-600 to-amber-500"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"text-xl font-bold text-yellow-100 line-clamp-2 group-hover:text-yellow-50 transition-colors",children:r.title}),e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${r.status==="approved"?"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30":r.status==="pending"?"bg-yellow-500/20 text-yellow-300 border border-yellow-500/30":"bg-red-500/20 text-red-300 border border-red-500/30"}`,children:r.status})]}),e.jsx("p",{className:"text-yellow-200 mb-4 line-clamp-3",children:r.description}),e.jsxs("div",{className:"space-y-2 text-sm text-yellow-300",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"w-4 h-4 mr-2 text-yellow-400"}),e.jsx("span",{children:s(r.date)}),r.startTime&&e.jsxs("span",{className:"ml-2",children:["at ",a(r.startTime)]})]}),r.location&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),e.jsx("span",{children:r.location})]}),r.organizer&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(ke,{className:"w-4 h-4 mr-2 text-yellow-400"}),e.jsx("span",{children:r.organizer})]}),r.cost&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),e.jsx("span",{children:r.cost})]})]}),r.tags&&r.tags.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:r.tags.map((i,m)=>e.jsxs("span",{className:"px-2 py-1 text-xs bg-yellow-600/30 text-yellow-200 rounded-full border border-yellow-500/40",children:["#",i]},m))}),r.url&&e.jsx("div",{className:"mt-4",children:e.jsxs("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-yellow-400 hover:text-yellow-300 font-medium transition-colors group",children:["Learn More",e.jsx(Se,{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"})]})})]})]})},ls=({filters:r,onFiltersChange:t})=>e.jsx(g.div,{className:"bg-yellow-800/20 backdrop-blur-sm border border-yellow-600/30 rounded-2xl p-6 mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-200 mb-2",children:"Search Events"}),e.jsx("input",{type:"text",placeholder:"Search by title or description...",className:"w-full px-4 py-3 bg-yellow-900/30 border border-yellow-600/40 rounded-lg text-yellow-100 placeholder-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",value:r.searchTerm,onChange:s=>t({...r,searchTerm:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-200 mb-2",children:"Date Range"}),e.jsxs("select",{className:"w-full px-4 py-3 bg-yellow-900/30 border border-yellow-600/40 rounded-lg text-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",value:r.dateRange,onChange:s=>t({...r,dateRange:s.target.value}),children:[e.jsx("option",{value:"all",children:"All Dates"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-200 mb-2",children:"Location"}),e.jsx("input",{type:"text",placeholder:"Filter by location...",className:"w-full px-4 py-3 bg-yellow-900/30 border border-yellow-600/40 rounded-lg text-yellow-100 placeholder-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",value:r.location,onChange:s=>t({...r,location:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-200 mb-2",children:"Source"}),e.jsxs("select",{className:"w-full px-4 py-3 bg-yellow-900/30 border border-yellow-600/40 rounded-lg text-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",value:r.source,onChange:s=>t({...r,source:s.target.value}),children:[e.jsx("option",{value:"all",children:"All Sources"}),e.jsx("option",{value:"community",children:"Community"}),e.jsx("option",{value:"education",children:"Education"}),e.jsx("option",{value:"entertainment",children:"Entertainment"}),e.jsx("option",{value:"activism",children:"Activism"})]})]})]})}),cs=()=>{const[r,t]=x.useState([]),[s,a]=x.useState([]),[i,m]=x.useState(!0),[d,v]=x.useState("checking"),[f,N]=x.useState({pending:0,approved:0,rejected:0,total:0}),[u,c]=x.useState(0),[h,p]=x.useState(null),{error:k,hasError:E,handleAPIError:A,clearError:n,retry:y}=Je({showToast:!0,retryable:!0}),[b,j]=x.useState(null),[S,T]=x.useState(!1),[I,B]=x.useState({dateRange:"all",source:"all",location:"",searchTerm:""}),l=_=>{j(_),T(!0)},w=()=>{T(!1),j(null)},M=async()=>{try{n(),m(!0),v("checking"),console.log("ðŸ”„ Loading events from service...");const _=await le.checkBackendHealth();console.log("ðŸ“‹ Health check result:",_),v(_.available?"connected":"offline");const[O,o]=await Promise.all([le.getAllEvents(),le.getEventStats()]);console.log("âœ… Events loaded successfully:",O.length),t(O),N(o),p(new Date)}catch(_){console.error("âŒ Error loading events:",_),A(_,"events loading"),v("offline")}finally{m(!1)}};x.useEffect(()=>{M()},[]);const G=()=>{c(_=>_+1),y(()=>M())};return x.useEffect(()=>{let _=r.filter(O=>O.status==="approved"||O.status==="published");if(I.searchTerm){const O=I.searchTerm.toLowerCase();_=_.filter(o=>o.title.toLowerCase().includes(O)||o.description.toLowerCase().includes(O))}if(I.location){const O=I.location.toLowerCase();_=_.filter(o=>o.location.toLowerCase().includes(O))}if(I.source!=="all"&&(_=_.filter(O=>O.source===I.source)),I.dateRange!=="all"){const O=new Date,o=new Date(O.getFullYear(),O.getMonth(),O.getDate());_=_.filter(C=>{const R=new Date(C.date);switch(I.dateRange){case"today":return R>=o&&R<new Date(o.getTime()+1440*60*1e3);case"week":const We=new Date(o.getTime()+10080*60*1e3);return R>=o&&R<=We;case"month":const Ge=new Date(o.getFullYear(),o.getMonth()+1,o.getDate());return R>=o&&R<=Ge;default:return!0}})}a(_)},[r,I]),e.jsxs(me,{children:[e.jsx(se,{pageName:"Events",dependencies:["Supabase","Events Service"]}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yellow-950 via-yellow-900 to-amber-900",children:[e.jsx(W,{}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(g.h1,{className:"text-5xl font-black heading-block mb-4 uppercase",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsx("span",{className:"bg-gradient-to-r from-yellow-400 to-amber-300 bg-clip-text text-transparent",children:"Community Events"})}),e.jsx(g.p,{className:"text-xl text-yellow-100 font-light",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:"Liberation through connection â€¢ Discover Black QTIPOC community events"})]}),e.jsxs(g.div,{className:"flex items-center space-x-4",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.4},children:[e.jsx("div",{className:"bg-yellow-800/30 backdrop-blur-sm border border-yellow-600/30 rounded-lg px-4 py-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[d==="checking"?e.jsx(ee,{size:"sm",color:"yellow"}):e.jsx("div",{className:`w-2 h-2 rounded-full ${d==="connected"?"bg-emerald-400":"bg-red-400"}`}),e.jsx("span",{className:"text-xs text-yellow-200",children:d==="connected"?"Live Data":d==="offline"?"Mock Data":"Connecting..."}),h&&d==="connected"&&e.jsxs("span",{className:"text-xs text-yellow-300 ml-2",children:["â€¢ ",h.toLocaleTimeString()]})]})}),e.jsxs("div",{className:"bg-yellow-800/30 backdrop-blur-sm border border-yellow-600/30 rounded-lg px-6 py-4",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-300",children:f.total}),e.jsx("div",{className:"text-sm text-yellow-200",children:"Total Events"})]}),e.jsxs("div",{className:"bg-yellow-800/30 backdrop-blur-sm border border-yellow-600/30 rounded-lg px-6 py-4",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:f.approved}),e.jsx("div",{className:"text-sm text-yellow-200",children:"Approved"})]})]})]})}),E&&e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsx("div",{className:"bg-red-900/30 backdrop-blur-sm border border-red-700/30 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx(ye,{className:"w-6 h-6 text-red-400 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-red-300 font-bold text-lg mb-2",children:"Connection Error"}),e.jsx("p",{className:"text-red-200 mb-4",children:k?.message}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:G,className:"flex items-center px-4 py-2 bg-red-600 hover:bg-red-500 text-white font-medium rounded-lg transition-colors",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Retry Connection"]}),e.jsx("button",{onClick:n,className:"text-red-300 hover:text-red-200 font-medium",children:"Dismiss"}),u>0&&e.jsxs("span",{className:"text-red-300 text-sm",children:["Retry attempts: ",u]})]})]})]})})}),d==="offline"&&!E&&e.jsxs(g.div,{className:"bg-amber-900/40 backdrop-blur-sm border border-amber-600/40 rounded-2xl p-6 mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.7},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ne,{className:"w-5 h-5 text-amber-400"}),e.jsx("span",{className:"text-amber-300 font-bold heading-block text-sm uppercase",children:"SHOWING EXAMPLE COMMUNITY EVENTS"})]}),e.jsxs("button",{onClick:G,className:"flex items-center text-amber-400 hover:text-amber-300 text-sm font-medium",children:[e.jsx(J,{className:"w-4 h-4 mr-1"}),"Retry Connection"]})]}),e.jsx("p",{className:"text-amber-100 leading-relaxed",children:"These are example events to demonstrate functionality. The community events backend is not currently connected. Real community events will be displayed when the events API is available."})]}),e.jsx(ls,{filters:I,onFiltersChange:B}),i?e.jsxs(g.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-24",children:[e.jsx(ee,{size:"xl",color:"yellow",text:"Loading Events"}),e.jsx("p",{className:"text-yellow-200 font-light mt-6",children:"Fetching the latest community events and gatherings..."})]}):s.length>0?e.jsx(g.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.8},children:s.map((_,O)=>e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1*O},children:e.jsx(os,{event:_,onClick:l})},_.id))}):e.jsx(g.div,{className:"text-center py-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsxs("div",{className:"bg-yellow-800/20 backdrop-blur-sm border border-yellow-600/30 rounded-2xl p-12 max-w-md mx-auto",children:[e.jsx(U,{className:"w-16 h-16 text-yellow-400 mx-auto mb-6"}),e.jsx("h3",{className:"text-2xl font-bold text-yellow-100 mb-4",children:"No events found"}),e.jsx("p",{className:"text-yellow-200",children:I.searchTerm||I.location||I.source!=="all"||I.dateRange!=="all"?"Try adjusting your filters to discover more community events.":"Check back soon for upcoming Black QTIPOC community events."})]})}),e.jsx(g.div,{className:"mt-16 bg-gradient-to-br from-amber-900 via-yellow-900 to-yellow-800 rounded-2xl p-8 border border-yellow-600/30",initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.8,delay:1},children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[e.jsx(g.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.6,delay:1.2},children:e.jsx(Le,{className:"w-16 h-16 text-yellow-400 mx-auto mb-6"})}),e.jsx(g.h3,{className:"text-3xl font-black heading-block mb-6 uppercase",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:1.4},children:e.jsx("span",{className:"bg-gradient-to-r from-yellow-300 to-amber-200 bg-clip-text text-transparent",children:"Building Community Together"})}),e.jsx(g.p,{className:"text-lg text-yellow-100 mb-8 font-light leading-relaxed",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:1.6},children:"These events are curated to support and celebrate Black QTIPOC communities. Join us in creating spaces of liberation, joy, and collective power."}),e.jsxs(g.div,{className:"flex flex-col sm:flex-row justify-center items-center space-y-4 sm:space-y-0 sm:space-x-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:1.8},children:[e.jsx("button",{className:"bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-400 hover:to-amber-400 text-yellow-950 font-bold px-8 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg",children:"Submit an Event"}),e.jsx("button",{className:"bg-transparent border-2 border-yellow-400 hover:bg-yellow-400/10 text-yellow-100 font-bold px-8 py-4 rounded-xl transition-all duration-300 transform hover:scale-105",children:"Join Our Community"})]})]})})]}),e.jsx(pe,{}),e.jsx(Ie,{children:S&&e.jsx(ns,{event:b,isOpen:S,onClose:w})})]})]})};class ds{baseUrl;isConnected=!1;constructor(){const t=["https://services-deploy.vercel.app","https://ivor.vercel.app","https://blkout-ivor-api.vercel.app"];this.baseUrl=t[0]}async checkConnection(){const t=["https://services-deploy.vercel.app","https://ivor.vercel.app","https://blkout-ivor-api.vercel.app"];for(const s of t)try{if((await fetch(`${s}/api/health`,{method:"GET"})).ok)return this.baseUrl=s,this.isConnected=!0,!0}catch(a){console.warn(`IVOR backend ${s} not available:`,a)}return this.isConnected=!1,!1}async sendMessage(t,s){try{if(this.isConnected||await this.checkConnection(),!this.isConnected)return this.getFallbackResponse(t);const a=await fetch(`${this.baseUrl}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t,context:s})});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){return console.error("IVOR communication error:",a),this.getFallbackResponse(t)}}async getResources(t,s){try{if(this.isConnected||await this.checkConnection(),!this.isConnected)return this.getFallbackResources(t);const a=await fetch(`${this.baseUrl}/resources`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t,filters:s,source:"blkout-website"})});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return(await a.json()).resources||[]}catch(a){return console.error("IVOR resources error:",a),this.getFallbackResources(t)}}async getPathwayContext(t){try{if(this.isConnected||await this.checkConnection(),!this.isConnected)return this.getFallbackPathwayContext(t);const s=await fetch(`${this.baseUrl}/pathway-context`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pathway:t.pathway,focus:t.focus,description:t.description,userId:t.userId||"website-user"})});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(s){return console.error("IVOR pathway context error:",s),this.getFallbackPathwayContext(t)}}getFallbackResponse(t){const s=t.toLowerCase(),a=localStorage.getItem("pathwayContext");let i=null;try{i=a?JSON.parse(a):null}catch{}if(s.includes("mental health")||s.includes("therapy"))return{message:"I understand you're looking for mental health support. BLKOUT connects Black QTIPOC folks with culturally competent mental health resources. I can help guide you to our community resources and support networks.",suggestions:["Explore community support groups","Find QTIPOC-affirming therapists","Access crisis support resources"]};if(s.includes("housing")||s.includes("accommodation"))return{message:"Housing security is crucial for our community. BLKOUT works with organizations that provide QTIPOC-safe housing options and advocacy. I can help connect you with current housing resources and support.",suggestions:["Community housing programs","LGBTQ+ friendly accommodations","Housing rights advocacy"]};if(s.includes("legal")||s.includes("discrimination"))return{message:"Legal support is essential for protecting our rights. Even in offline mode, I can tell you that BLKOUT connects folks with legal advocates who understand the unique challenges facing Black QTIPOC communities, including discrimination and identity document issues.",suggestions:["QTIPOC legal advocacy","Discrimination reporting","Identity document support"]};let m="I'm currently operating in offline mode, but I'm still here to help! ";if(i?.pathway)switch(i.pathway){case"Community Healer":m+="As someone identified as a Community Healer, you're focused on healing trauma and supporting collective wellness. ";break;case"Culture Keeper":m+="As a Culture Keeper, you're vital to preserving and sharing our community's rich heritage. ";break;case"System Disruptor":m+="As a System Disruptor, your work challenges oppression and creates systemic change. ";break;case"Wisdom Keeper":m+="As a Wisdom Keeper, you carry essential knowledge and insights for our community. ";break}return m+="BLKOUT provides comprehensive support for Black QTIPOC communities including mental health resources, housing assistance, legal advocacy, and community connections. How can I point you toward the support you need?",{message:m,suggestions:i?.pathway?[`Explore ${i.pathway} resources`,"Connect with similar pathway holders","Access specialized support networks","Join pathway-specific discussions"]:["Browse community resources","Connect with local support groups","Access liberation pathways","Join community discussions"]}}getFallbackResources(t){const s=t.toLowerCase();return s.includes("mental health")?[{id:"mh-1",title:"Black QTIPOC Therapy Network",description:"Directory of culturally competent therapists",type:"mental-health",url:"#",location:"UK-wide"},{id:"mh-2",title:"Community Healing Circles",description:"Peer support groups for Black QTIPOC folks",type:"peer-support",url:"#",location:"London, Manchester, Birmingham"}]:s.includes("housing")?[{id:"h-1",title:"QTIPOC Safe Housing Network",description:"LGBTQ+ affirming accommodation options",type:"housing",url:"#",location:"UK-wide"}]:[{id:"general-1",title:"BLKOUT Community Hub",description:"Central resource for Black QTIPOC community support",type:"community",url:"/community",location:"Online & UK-wide"},{id:"general-2",title:"Liberation Pathways",description:"Personalized support journey assessment",type:"pathway",url:"/quiz",location:"Online"}]}getFallbackPathwayContext(t){return{context:`Based on your liberation pathway responses, you've indicated interests in ${t.interests?.join(", ")||"community connection"}. While my full analysis system is offline, I can help connect you with relevant community resources and support networks.`,recommendations:["Join community discussions","Explore local support groups","Access educational resources","Connect with peer networks"],urgency:t.urgency||"standard",followUp:"Visit our community hub for immediate connection opportunities."}}getConnectionStatus(){return this.isConnected}}const ce=new ds;function ms(){const[r,t]=x.useState(!1),[s,a]=x.useState([{id:"1",text:"Hey! I'm IVOR, BLKOUT's community AI. I'm here to help connect you with our movement for cooperative ownership. What brings you to our community today?",sender:"ivor",timestamp:new Date}]),[i,m]=x.useState(""),[d,v]=x.useState(null),[f,N]=x.useState(!1);x.useEffect(()=>{(async()=>{const h=await ce.checkConnection();v(h)})()},[]);const u=async()=>{if(!i.trim())return;const c={id:Date.now().toString(),text:i,sender:"user",timestamp:new Date};a(p=>[...p,c]);const h=i;m(""),N(!0);try{const p=localStorage.getItem("pathwayContext");let k=null;try{k=p?JSON.parse(p):null}catch{}const E=await ce.sendMessage(h,k),A={id:(Date.now()+1).toString(),text:E.message||"I'm here to help with your community needs!",sender:"ivor",timestamp:new Date};a(n=>[...n,A]),v(ce.getConnectionStatus())}catch(p){console.error("Failed to send message to IVOR:",p);const k={id:(Date.now()+1).toString(),text:"I'm having trouble connecting right now, but I'm still here to help! BLKOUT supports Black queer liberation through community organizing, cooperative ownership, and mutual aid. How can I point you toward the resources you need?",sender:"ivor",timestamp:new Date};a(E=>[...E,k]),v(!1)}finally{N(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(g.button,{onClick:()=>t(!0),className:`fixed bottom-6 right-6 z-50 ${r?"hidden":"flex"} 
          items-center justify-center w-14 h-14 bg-blkout-primary text-white 
          rounded-full shadow-lg hover:bg-blkout-warm transition-colors
          focus:outline-none focus:ring-4 focus:ring-blkout-primary focus:ring-opacity-50`,whileHover:{scale:1.1},whileTap:{scale:.9},"aria-label":"Open IVOR community chatbot",children:e.jsx(ue,{size:24})}),e.jsx(Ie,{children:r&&e.jsxs(g.div,{initial:{opacity:0,y:100,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:100,scale:.8},className:`fixed bottom-6 right-6 z-50 w-80 h-96 bg-white rounded-lg shadow-2xl 
              border border-gray-200 flex flex-col overflow-hidden
              md:w-96 md:h-[500px]`,children:[e.jsxs("div",{className:"bg-blkout-primary text-white p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"font-semibold",children:"IVOR"}),d===null?e.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse",title:"Connecting..."}):d?e.jsx(wt,{size:16,className:"text-green-400",title:"Connected"}):e.jsx(Ne,{size:16,className:"text-red-400",title:"Offline"})]}),e.jsx("p",{className:"text-xs opacity-90",children:d===null?"Connecting...":d?"Community AI Assistant":"Offline Mode"})]}),e.jsx("button",{onClick:()=>t(!1),className:`p-1 hover:bg-blkout-warm rounded transition-colors
                  focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50`,"aria-label":"Close chat",children:e.jsx(Me,{size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[s.map(c=>e.jsx(g.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex ${c.sender==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${c.sender==="user"?"bg-blkout-primary text-white":"bg-gray-100 text-gray-800"}`,children:[e.jsx("p",{className:"text-sm",children:c.text}),e.jsx("p",{className:`text-xs mt-1 ${c.sender==="user"?"text-blkout-secondary":"text-gray-500"}`,children:c.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},c.id)),f&&e.jsx(g.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex justify-start",children:e.jsx("div",{className:"bg-gray-100 p-3 rounded-lg",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200",children:[e.jsxs("form",{onSubmit:c=>{c.preventDefault(),u()},className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:i,onChange:c=>m(c.target.value),placeholder:d===null?"Connecting to IVOR...":d===!1?"IVOR is offline, but still helpful...":"Ask IVOR about our community...",disabled:f,className:`flex-1 p-2 border border-gray-300 rounded-md 
                    focus:outline-none focus:ring-2 focus:ring-blkout-primary 
                    focus:border-transparent text-sm disabled:bg-gray-100`,"aria-label":"Message input"}),e.jsx("button",{type:"submit",disabled:!i.trim()||f,className:`px-3 py-2 bg-blkout-primary text-white rounded-md 
                    hover:bg-blkout-warm transition-colors disabled:opacity-50 
                    disabled:cursor-not-allowed focus:outline-none focus:ring-2 
                    focus:ring-blkout-primary focus:ring-opacity-50`,"aria-label":"Send message",children:e.jsx(Nt,{size:16})})]}),d===!1&&e.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center",children:"Running in offline mode with community resources"})]}),e.jsx("div",{className:"px-4 py-2 bg-gray-50 text-xs text-gray-600 text-center",children:"ðŸ³ï¸â€ðŸŒˆ Building cooperative ownership together"})]})})]})}class xs{static async submitEvent(t){try{const{title:s,description:a,date:i,time:m,location:d,organizer:v,category:f,capacity:N,sourceUrl:u,submittedVia:c,moreInfoUrl:h,ticketInfo:p,attendeeCount:k,registrationLink:E,tags:A,status:n="draft"}=t;if(!s||!i)throw new Error("Title and date are required");const{data:y,error:b}=await L.from("events").insert([{title:s,description:a||"",location:typeof d=="string"?d:d?.address||"TBD",status:n||"draft",date:i,start_time:m||"18:00",source:"manual",url:u,tags:A||["community-submitted"]}]).select().single();if(b)throw b;return{success:!0,message:"Event created successfully",event:y}}catch(s){throw console.error("Event submission error:",s),new Error(s.message||"Failed to create event")}}static async submitArticle(t){try{const{title:s,excerpt:a,content:i,category:m,author:d,priority:v,sourceUrl:f,submittedVia:N,moreInfoUrl:u,publishDate:c,section:h,tags:p,status:k="draft"}=t;if(!s||!a)throw new Error("Title and excerpt are required");const{data:E,error:A}=await L.from("newsroom_articles").insert([{title:s,excerpt:a,content:i||a,status:k||"draft",source_url:f}]).select().single();if(A)throw A;return{success:!0,message:"Article created successfully",article:E}}catch(s){throw console.error("Article submission error:",s),new Error(s.message||"Failed to create article")}}static async getEvents(){try{const{data:t,error:s}=await L.from("events").select("*").order("created_at",{ascending:!1});if(s)throw s;return{success:!0,events:t||[]}}catch(t){throw console.error("Events fetch error:",t),new Error(t.message||"Failed to fetch events")}}static async getArticles(){try{const{data:t,error:s}=await L.from("newsroom_articles").select("*").order("created_at",{ascending:!1});if(s)throw s;return{success:!0,articles:t||[]}}catch(t){throw console.error("Articles fetch error:",t),new Error(t.message||"Failed to fetch articles")}}}typeof window<"u"&&(window.BlkoutExtensionApi=xs);function us(){const{pathname:r}=tt();return ge.useEffect(()=>{window.scrollTo(0,0)},[r]),null}const hs=()=>e.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 z-50 bg-blue-600 text-white px-4 py-2",children:"Skip to main content"}),de=({children:r})=>e.jsxs(e.Fragment,{children:[e.jsx(W,{}),r]}),gs=()=>e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900",children:[e.jsx(W,{}),e.jsxs("section",{className:"relative py-20 bg-gradient-to-br from-purple-950 via-indigo-950 to-emerald-950 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-purple-500 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-48 h-48 bg-emerald-500 rounded-full blur-3xl animate-pulse"})]}),e.jsx("div",{className:"relative z-10 max-w-6xl mx-auto px-8 text-center",children:e.jsxs(g.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[e.jsxs("h1",{className:"text-6xl font-black text-white mb-8 leading-tight",children:[e.jsx("span",{className:"bg-gradient-to-r from-purple-400 to-emerald-400 bg-clip-text text-transparent",children:"BLKOUT"}),e.jsx("br",{}),"Community Platform"]}),e.jsx("p",{className:"text-xl text-indigo-200 mb-12 max-w-3xl mx-auto leading-relaxed",children:"Liberation through collective action and cooperative ownership. Building power, sharing resources, and centering Black queer joy."}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-6 mb-16",children:[e.jsx(g.a,{href:"/governance",className:"px-8 py-4 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold rounded-full hover:from-purple-700 hover:to-indigo-700 transition-all duration-300 shadow-lg hover:shadow-xl",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Community Governance"}),e.jsx(g.a,{href:"/movement",className:"px-8 py-4 bg-gradient-to-r from-emerald-600 to-teal-600 text-white font-bold rounded-full hover:from-emerald-700 hover:to-teal-700 transition-all duration-300 shadow-lg hover:shadow-xl",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Our Movement"}),e.jsx(g.a,{href:"/newsroom",className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-bold rounded-full hover:from-blue-700 hover:to-cyan-700 transition-all duration-300 shadow-lg hover:shadow-xl",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Newsroom"}),e.jsx(g.a,{href:"/events",className:"px-8 py-4 bg-gradient-to-r from-orange-600 to-red-600 text-white font-bold rounded-full hover:from-orange-700 hover:to-red-700 transition-all duration-300 shadow-lg hover:shadow-xl",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Events"})]})]})})]}),e.jsx("section",{className:"py-16 bg-slate-900/50",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-8",children:[e.jsx("h2",{className:"text-4xl font-bold text-white text-center mb-12",children:"Our Values"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsxs(g.div,{className:"text-center p-6 bg-white/5 rounded-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ³ï¸â€âš§ï¸"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Trans Liberation"}),e.jsx("p",{className:"text-gray-300",children:"Centering trans joy and safety in all we do"})]}),e.jsxs(g.div,{className:"text-center p-6 bg-white/5 rounded-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ¤"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Cooperative Ownership"}),e.jsx("p",{className:"text-gray-300",children:"Community-owned, democratically governed"})]}),e.jsxs(g.div,{className:"text-center p-6 bg-white/5 rounded-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[e.jsx("div",{className:"text-4xl mb-4",children:"âœŠðŸ¿"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Black Power"}),e.jsx("p",{className:"text-gray-300",children:"Liberation through collective action"})]})]})]})}),e.jsx("footer",{className:"bg-slate-950 py-12",children:e.jsx("div",{className:"max-w-6xl mx-auto px-8 text-center",children:e.jsx("p",{className:"text-gray-400",children:"Â© 2024 BLKOUT - Community Platform | Liberation through Cooperation"})})})]}),ps=()=>e.jsx(it,{}),bs=()=>e.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-6xl font-bold mb-4",children:"404"}),e.jsx("p",{className:"text-xl mb-8",children:"Page not found"}),e.jsx("a",{href:"/",className:"text-blue-400 hover:text-blue-300",children:"â† Back to Home"})]})});function fs(){return e.jsxs(Ze,{children:[e.jsx(hs,{}),e.jsx(us,{}),e.jsxs(et,{children:[e.jsx(P,{path:"/",element:e.jsx(gs,{})}),e.jsx(P,{path:"/governance",element:e.jsx(ps,{})}),e.jsx(P,{path:"/movement",element:e.jsx(de,{children:e.jsx(Rt,{})})}),e.jsx(P,{path:"/newsroom",element:e.jsx(de,{children:e.jsx(rs,{})})}),e.jsx(P,{path:"/events",element:e.jsx(de,{children:e.jsx(cs,{})})}),e.jsx(P,{path:"/admin",element:e.jsx(V,{children:e.jsx(Bt,{})})}),e.jsx(P,{path:"/admin/moderation",element:e.jsx(V,{children:e.jsx(Wt,{})})}),e.jsx(P,{path:"/admin/events",element:e.jsx(V,{children:e.jsx(qt,{})})}),e.jsx(P,{path:"/admin/newsroom",element:e.jsx(V,{children:e.jsx(Kt,{})})}),e.jsx(P,{path:"/admin/governance",element:e.jsx(V,{children:e.jsx(rt,{})})}),e.jsx(P,{path:"*",element:e.jsx(bs,{})})]}),e.jsx(ms,{})]})}Ct.createRoot(document.getElementById("root")).render(e.jsx(ge.StrictMode,{children:e.jsx(fs,{})}));
