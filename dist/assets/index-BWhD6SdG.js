import{j as e,m as v,A as Me}from"./animations-DCf3BmZq.js";import{c as Re,b as Be,a as g,u as Ne,L as U,d as Fe,B as Pe,R as qe,e as M,f as we}from"./vendor-B9d9lqry.js";import{s as T,a as se,u as $e,b as ze,c as Ke,d as Ve,L as Qe,E as He}from"./governance-CynHAfut.js";import{X as ie,C as J,a as ne,L as V,S as Ge,P as ae,A as Z,b as Q,U as P,c as de,N as X,G as Je,d as me,V as xe,F as Ce,e as G,f as Se,g as ue,M as ke,R as _e,h as re,i as We,j as B,T as Ye,k as Ae,l as Ee,m as Te,E as Ze,n as ee,o as te,p as he,W as ge,q as Xe,r as et,D as pe,s as oe,H as tt,t as st,u as at,v as Ie,w as rt,x as it,y as be,z as nt}from"./ui-AiI3oxMJ.js";import{c as Le}from"./supabase-CyXonEzB.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function a(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=a(n);fetch(n.href,o)}})();var W={},fe;function ot(){if(fe)return W;fe=1;var p=Re();return W.createRoot=p.createRoot,W.hydrateRoot=p.hydrateRoot,W}var lt=ot();const ct=Be(lt);class dt{static async submitEvent(t){try{const{title:a,description:r,date:n,time:o,location:s,organizer:u,category:d,capacity:N,sourceUrl:b,submittedVia:A,moreInfoUrl:c,ticketInfo:S,attendeeCount:f,registrationLink:h,tags:y,status:m="draft"}=t;if(!a||!n)throw new Error("Title and date are required");const{data:w,error:_}=await T.from("events").insert([{title:a,description:r||"",location:typeof s=="string"?s:s?.address||"TBD",status:m||"draft",date:n,start_time:o||"18:00",source:"manual",url:b,tags:y||["community-submitted"]}]).select().single();if(_)throw _;return{success:!0,message:"Event created successfully",event:w}}catch(a){throw console.error("Event submission error:",a),new Error(a.message||"Failed to create event")}}static async submitArticle(t){try{const{title:a,excerpt:r,content:n,category:o,author:s,priority:u,sourceUrl:d,submittedVia:N,moreInfoUrl:b,publishDate:A,section:c,tags:S,status:f="draft"}=t;if(!a||!r)throw new Error("Title and excerpt are required");const{data:h,error:y}=await T.from("newsroom_articles").insert([{title:a,excerpt:r,content:n||r,status:f||"draft",source_url:d}]).select().single();if(y)throw y;return{success:!0,message:"Article created successfully",article:h}}catch(a){throw console.error("Article submission error:",a),new Error(a.message||"Failed to create article")}}static async getEvents(){try{const{data:t,error:a}=await T.from("events").select("*").order("created_at",{ascending:!1});if(a)throw a;return{success:!0,events:t||[]}}catch(t){throw console.error("Events fetch error:",t),new Error(t.message||"Failed to fetch events")}}static async getArticles(){try{const{data:t,error:a}=await T.from("newsroom_articles").select("*").order("created_at",{ascending:!1});if(a)throw a;return{success:!0,articles:t||[]}}catch(t){throw console.error("Articles fetch error:",t),new Error(t.message||"Failed to fetch articles")}}}typeof window<"u"&&(window.BlkoutExtensionApi=dt);const mt=()=>{const[p,t]=g.useState(!1),a=Ne(),r=[{id:"dashboard",label:"Main Platform",path:"/",icon:"ðŸ ",description:"Community hub overview"},{id:"journey",label:"Liberation Journey",path:"",external:"https://journey-blkout.vercel.app/",icon:"ðŸ“–",description:"Interactive storytelling experience"},{id:"newsroom",label:"Newsroom",path:"/newsroom",icon:"ðŸ“°",description:"Community stories & journalism"},{id:"events",label:"Events",path:"",external:"https://events-blkout.vercel.app/",icon:"ðŸ“…",description:"UK community events calendar"},{id:"ivor",label:"IVOR AI",path:"",external:"https://ivor-blkout.vercel.app/",icon:"ðŸ¤–",description:"AI assistant for organizing"},{id:"governance",label:"Governance",path:"/governance",icon:"ðŸ›ï¸",description:"Democratic community decisions"}],n=r.find(s=>s.path===a.pathname)||r[0],o=s=>{s.external&&window.open(s.external,"_blank"),t(!1)};return e.jsxs("div",{className:"ecosystem-navigation-hub fixed top-4 right-4 z-50",children:[e.jsxs("button",{onClick:()=>t(!p),className:`
          flex items-center gap-2 px-4 py-3 bg-white border-2 rounded-full shadow-lg
          transition-all duration-300 hover:shadow-xl
          ${p?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"}
        `,children:[e.jsx("span",{className:"text-lg",children:n?.icon||"ðŸŒ"}),e.jsx("span",{className:"font-medium text-gray-900",children:n?.label||"BLKOUT"}),e.jsx("span",{className:`text-gray-400 transition-transform duration-300 ${p?"rotate-180":""}`,children:"â–¼"})]}),e.jsx("div",{className:`
        absolute top-16 right-0 bg-white border border-gray-200 rounded-xl shadow-xl
        transition-all duration-300 overflow-hidden
        ${p?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}
      `,children:e.jsxs("div",{className:"p-2 w-80",children:[e.jsxs("div",{className:"px-3 py-2 border-b border-gray-100 mb-2",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸŒ"}),"BLKOUT Ecosystem"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Navigate the liberation platform"})]}),e.jsx("div",{className:"space-y-1",children:r.map(s=>{const u=s.path===a.pathname;return s.external?e.jsxs("button",{onClick:()=>o(s),className:`
                      w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left
                      transition-colors duration-200
                      ${u?"bg-indigo-100 text-indigo-700 border border-indigo-200":"hover:bg-gray-100 text-gray-700"}
                    `,children:[e.jsx("span",{className:"text-lg",children:s.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:s.label}),e.jsx("div",{className:"text-xs text-gray-500",children:s.description})]}),e.jsx("span",{className:"text-gray-400 text-sm",children:"â†—ï¸"})]},s.id):e.jsxs(U,{to:s.path,onClick:()=>t(!1),className:`
                    flex items-center gap-3 px-3 py-2 rounded-lg
                    transition-colors duration-200
                    ${u?"bg-indigo-100 text-indigo-700 border border-indigo-200":"hover:bg-gray-100 text-gray-700"}
                  `,children:[e.jsx("span",{className:"text-lg",children:s.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:s.label}),e.jsx("div",{className:"text-xs text-gray-500",children:s.description})]}),u&&e.jsx("span",{className:"text-indigo-600 text-sm",children:"âœ“"})]},s.id)})}),e.jsx("div",{className:"px-3 py-2 border-t border-gray-100 mt-2",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsx("span",{children:"ðŸŸ¢ 6 Core Components"}),e.jsx("span",{children:"ðŸ“¡ Phase 1 Platform"})]})})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-10 -z-10",onClick:()=>t(!1)})]})};class xt{baseUrl;isConnected=!1;supabaseConnected=!1;useSupabase=!0;constructor(){this.baseUrl="/api",this.checkSupabaseConnection()}async checkSupabaseConnection(){try{const{connected:t}=await se.testConnection();return this.supabaseConnected=t,t?console.log("âœ… Supabase newsroom connection established"):console.warn("âš ï¸ Supabase newsroom connection failed, falling back to legacy backend"),t}catch(t){return console.error("âŒ Supabase connection test failed:",t),this.supabaseConnected=!1,!1}}async checkConnection(){try{const t=await fetch(`${this.baseUrl.replace("/api","")}/health`,{method:"GET",timeout:5e3});return this.isConnected=t.ok,this.isConnected}catch(t){return console.warn("Newsroom backend not available:",t),this.isConnected=!1,!1}}async getArticles(t){if(this.useSupabase&&this.supabaseConnected)try{return await this.getArticlesFromSupabase(t)}catch(a){console.warn("Supabase articles fetch failed, trying legacy backend:",a)}try{if(this.isConnected||await this.checkConnection(),!this.isConnected)return this.getFallbackArticles(t);const a=new URLSearchParams;t?.category&&a.append("category",t.category),t?.featured!==void 0&&a.append("featured",t.featured.toString()),t?.limit&&a.append("limit",t.limit.toString()),t?.page&&a.append("page",t.page.toString()),t?.status&&a.append("status",t.status);const r=await fetch(`${this.baseUrl}/articles?${a}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return{...await r.json(),source:"legacy"}}catch(a){return console.error("Newsroom service error:",a),this.getFallbackArticles(t)}}async getArticlesFromSupabase(t){const a=t?.limit||20,r=t?.page||1,n=(r-1)*a,o=t?.status||"published";let s=T.from("newsroom_articles").select("*",{count:"exact"}).order("published_at",{ascending:!1}).range(n,n+a-1).neq("submitted_via","blkoutuk-migration");o!=="all"&&(s=s.eq("status",o)),t?.category&&(s=s.eq("category",t.category)),t?.featured!==void 0&&(s=s.eq("featured",t.featured));const{data:u,error:d,count:N}=await s;if(d)throw d;const b=(u||[]).map(c=>({id:c.id,title:c.title,excerpt:c.excerpt||c.content?.substring(0,200)||"",content:c.content,author:typeof c.author=="string"?{name:c.author,avatar:c.author.substring(0,2).toUpperCase()}:c.author,publishedAt:c.published_at,readTime:c.read_time||Math.max(1,Math.ceil((c.content?.length||0)/1e3)),category:c.category,featured:c.featured,tags:c.tags||[],imageUrl:c.image_url,source:c.submitted_via||"Newsroom",externalUrl:c.source_url,status:c.priority==="high"?"breaking":c.status==="published"?"published":"updated"})),A=await this.getStatsFromSupabase();return{articles:b,total:N||0,page:r,hasMore:(N||0)>n+a,stats:A,source:"supabase"}}async getStatsFromSupabase(){const{data:t,error:a}=await T.from("articles").select("status, published_at");if(a||!t)return{published:0,draft:0,total:0,todayCount:0};const r=new Date().toISOString().split("T")[0];return t.reduce((o,s)=>(o.total++,s.status==="published"&&o.published++,s.status==="draft"&&o.draft++,s.published_at?.startsWith(r)&&o.todayCount++,o),{published:0,draft:0,total:0,todayCount:0})}async getArticle(t){if(this.useSupabase&&this.supabaseConnected)try{const{data:a,error:r}=await T.from("articles").select("*").eq("id",t).single();if(!r&&a)return{id:a.id,title:a.title,excerpt:a.excerpt||a.content?.substring(0,200)||"",content:a.content,author:typeof a.author=="string"?{name:a.author,avatar:a.author.substring(0,2).toUpperCase()}:a.author,publishedAt:a.published_at,readTime:a.read_time||Math.max(1,Math.ceil((a.content?.length||0)/1e3)),category:a.category,featured:a.featured,tags:a.tags||[],imageUrl:a.image_url,source:a.submitted_via||"Newsroom",externalUrl:a.source_url,status:a.priority==="high"?"breaking":a.status==="published"?"published":"updated"}}catch(a){console.warn("Supabase article fetch failed, trying legacy backend:",a)}try{if(this.isConnected||await this.checkConnection(),!this.isConnected)return this.getFallbackArticle(t);const a=await fetch(`${this.baseUrl}/articles/${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){return console.error("Newsroom article fetch error:",a),this.getFallbackArticle(t)}}async createArticle(t){if(!this.useSupabase||!this.supabaseConnected)throw new Error("Article creation requires Supabase connection");const{data:a,error:r}=await T.from("articles").insert({title:t.title||"",excerpt:t.excerpt,content:t.content,author:typeof t.author=="string"?t.author:"Anonymous",published_at:t.published_at||new Date().toISOString(),category:t.category||"General",featured:t.featured||!1,status:t.status||"draft",tags:t.tags||[],image_url:t.image_url,source_url:t.source_url,read_time:t.read_time,priority:t.priority||"medium",submitted_via:"admin-panel"}).select().single();if(r)throw r;return a}async updateArticle(t,a){if(!this.useSupabase||!this.supabaseConnected)throw new Error("Article updates require Supabase connection");const{data:r,error:n}=await T.from("articles").update({...a,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw n;return r}async deleteArticle(t){if(!this.useSupabase||!this.supabaseConnected)throw new Error("Article deletion requires Supabase connection");const{error:a}=await T.from("articles").delete().eq("id",t);return!a}async getNewsroomStats(){let t={published:0,draft:0,total:0,todayCount:0},a="disconnected";if(this.useSupabase&&this.supabaseConnected)try{t=await this.getStatsFromSupabase(),a="supabase"}catch(r){console.warn("Failed to get Supabase stats:",r)}if(a==="disconnected"&&this.isConnected)try{const r=await fetch(`${this.baseUrl}/articles/stats`);if(r.ok){const n=await r.json();t={...t,...n},a="legacy"}}catch(r){console.warn("Failed to get legacy stats:",r)}return{...t,connectionStatus:a}}subscribeToArticleUpdates(t){return!this.useSupabase||!this.supabaseConnected?(console.warn("Real-time subscriptions require Supabase connection"),null):se.subscribeToArticles(t)}getConnectionStatus(){return{supabase:this.supabaseConnected,legacy:this.isConnected,primary:this.supabaseConnected?"supabase":this.isConnected?"legacy":"fallback"}}setPreferSupabase(t){this.useSupabase=t}async getArchiveArticles(t){if(console.log("ðŸ—„ï¸ NewsroomService.getArchiveArticles called with filters:",t),console.log("ðŸ—„ï¸ useSupabase:",this.useSupabase,"supabaseConnected:",this.supabaseConnected),!this.useSupabase||!this.supabaseConnected)return console.log("ðŸ—„ï¸ Using fallback articles"),this.getFallbackArticles(t);const a=t?.limit||50,r=t?.page||1,n=(r-1)*a,o=t?.status||"published";console.log("ðŸ—„ï¸ Query parameters:",{limit:a,page:r,offset:n,status:o});let s=T.from("newsroom_articles").select("*",{count:"exact"}).order("published_at",{ascending:!1}).range(n,n+a-1);o!=="all"&&(s=s.eq("status",o)),t?.category&&(s=s.eq("category",t.category)),t?.featured!==void 0&&(s=s.eq("featured",t.featured)),t?.submitted_via&&(s=s.eq("submitted_via",t.submitted_via)),console.log("ðŸ—„ï¸ Executing Supabase query...");const{data:u,error:d,count:N}=await s;if(console.log("ðŸ—„ï¸ Query result - data:",u?.length,"articles, error:",d,"count:",N),d)throw console.error("ðŸ—„ï¸ Supabase query error:",d),d;const b=(u||[]).map(c=>({id:c.id,title:c.title,excerpt:c.excerpt||c.content?.substring(0,200)||"",content:c.content,author:typeof c.author=="string"?{name:c.author,avatar:c.author.substring(0,2).toUpperCase()}:c.author,publishedAt:c.published_at,readTime:c.read_time||Math.max(1,Math.ceil((c.content?.length||0)/1e3)),category:c.category,featured:c.featured,tags:c.tags||[],imageUrl:c.image_url,source:c.submitted_via||"Newsroom",externalUrl:c.source_url,status:c.priority==="high"?"breaking":c.status==="published"?"published":"updated",submitted_via:c.submitted_via})),A={articles:b,total:N||0,page:r,hasMore:(N||0)>n+a,source:"supabase"};return console.log("ðŸ—„ï¸ Returning response with",b.length,"articles"),A}getFallbackArticles(t){let r=[{id:"1",title:"BREAKING: New QTIPOC+ Housing Initiative Launched in Manchester",excerpt:"Community-led housing cooperative provides safe, affordable homes for Black queer men in Greater Manchester area.",author:{name:"Marcus Johnson",avatar:"MJ"},publishedAt:"2025-08-01",readTime:5,category:"Breaking News",featured:!0,tags:["Housing","Community","Manchester"],status:"breaking"},{id:"2",title:"POLICY ANALYSIS: Impact of Recent Gender Recognition Changes",excerpt:"Comprehensive analysis of new gender recognition legislation and its effects on Black trans and non-binary communities.",author:{name:"Dr. Alex Thompson",avatar:"AT"},publishedAt:"2025-07-30",readTime:8,category:"Analysis",featured:!0,tags:["Policy","Trans Rights","Legal"],status:"published"},{id:"3",title:"COMMUNITY SPOTLIGHT: Birmingham Pride Planning Update",excerpt:"Local organizing committee shares plans for Birmingham Black Pride 2025 celebration.",author:{name:"Jordan Clarke",avatar:"JC"},publishedAt:"2025-07-28",readTime:4,category:"Community News",featured:!1,tags:["Pride","Birmingham","Events"],status:"published"},{id:"4",title:"MENTAL HEALTH: New Culturally Competent Therapy Network",excerpt:"Directory of Black QTIPOC+-affirming mental health professionals launches across the UK.",author:{name:"Dr. Sarah Williams",avatar:"SW"},publishedAt:"2025-07-25",readTime:6,category:"Health",featured:!1,tags:["Mental Health","Therapy","Resources"],status:"published"}];t?.category&&(r=r.filter(d=>d.category===t.category)),t?.featured!==void 0&&(r=r.filter(d=>d.featured===t.featured));const n=t?.limit||10,o=t?.page||1,s=(o-1)*n;return{articles:r.slice(s,s+n),total:r.length,page:o,hasMore:s+n<r.length,source:"fallback"}}getFallbackArticle(t){return this.getFallbackArticles().articles.find(r=>r.id===t)||null}}const ut=new xt;class ht{isConnected=!1;constructor(){this.checkConnection()}async checkConnection(){try{const t=await se.testConnection();return this.isConnected=t.connected,this.isConnected}catch(t){return console.warn("Supabase connection unavailable:",t),this.isConnected=!1,!1}}async getQueue(t){try{console.log("ðŸ” Fetching moderation queue with filters:",t);const[a,r]=await Promise.all([(async()=>{let s=T.from("events").select("*").limit(t?.limit||50);t?.status==="pending"?(console.log("ðŸ” Filtering for pending events (pending, draft, reviewing status)"),s=s.in("status",["pending","draft","reviewing"])):t?.status&&(s=s.eq("status",t.status==="approved"?"published":t.status)),t?.offset&&(s=s.range(t.offset,t.offset+(t.limit||50)-1));const u=await s.order("created_at",{ascending:!1});return console.log("ðŸ“Š Raw events query result:",{success:!u.error,count:u.data?.length||0,error:u.error?.message,firstTitle:u.data?.[0]?.title||u.data?.[0]?.name}),u})(),(async()=>{let s=T.from("newsroom_articles").select("*").limit(t?.limit||50).not("source_url","like","https://blkoutuk.com%");t?.status==="pending"?(console.log("ðŸ” Filtering for pending articles (draft, reviewing status)"),s=s.in("status",["draft","reviewing"])):t?.status&&(s=s.eq("status",t.status==="approved"?"published":t.status));const u=await s;return console.log("ðŸ“° Raw articles query result:",{success:!u.error,count:u.data?.length||0,error:u.error?.message,firstTitle:u.data?.[0]?.title}),u})()]);console.log("ðŸ“Š Events result:",a),console.log("ðŸ“° Newsroom Articles result:",r);const n=[];a.data&&(console.log("ðŸ”„ Converting events to moderation items:",a.data.length),a.data.forEach((s,u)=>{console.log(`ðŸ“… Processing event ${u+1}:`,{id:s.id,title:s.title||s.name,status:s.status,source:s.source,hasDescription:!!s.description});const d={id:s.id,type:"event",status:["draft","reviewing","pending"].includes(s.status)?"pending":s.status==="published"?"approved":"rejected",priority:"medium",content:{id:s.id,title:s.title||s.name||"Untitled Event",content:s.description||"",author:s.organizer||s.organizer_name||"Chrome Extension",category:s.tags?.[0]||"community"},submittedBy:s.organizer||s.organizer_name||"Chrome Extension",submittedAt:s.created_at,flags:[],metadata:{source:s.source||"chrome_extension",location:typeof s.location=="string"?s.location:s.location?.address||"Location TBD",event_date:s.event_date}};console.log("âœ… Created event moderation item:",{id:d.id,type:d.type,status:d.status,title:d.content.title}),n.push(d)}),console.log("ðŸ“‹ Total moderation items after events:",n.length)),r.data&&(console.log("ðŸ”„ Converting articles to moderation items:",r.data.length),r.data.forEach((s,u)=>{console.log(`ðŸ“„ Processing article ${u+1}:`,{id:s.id,title:s.title,status:s.status,author:s.author,hasContent:!!s.content,hasExcerpt:!!s.excerpt});const d={id:s.id,type:"newsroom_article",status:["draft","reviewing"].includes(s.status)?"pending":s.status==="published"?"approved":"rejected",priority:"medium",content:{id:s.id,title:s.title||"Untitled Article",content:s.content||s.excerpt||"",author:s.author||"Chrome Extension",category:s.category||"general"},submittedBy:s.author||"Chrome Extension",submittedAt:s.created_at,flags:[],metadata:{source:"chrome_extension",source_url:s.source_url,word_count:s.content?.split(" ").length||0}};console.log("âœ… Created moderation item:",{id:d.id,type:d.type,status:d.status,title:d.content.title}),n.push(d)}),console.log("ðŸ“‹ Total moderation items after articles:",n.length));let o=n;return t?.type&&(o=n.filter(s=>s.type===t.type)),{success:!0,data:{items:o,total:o.length}}}catch(a){return console.error("Error fetching moderation queue:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error",data:{items:[],total:0}}}}async getItem(t){try{const a=await fetch(`${this.baseUrl}/api/queue/${t}`);if(!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);return{success:!0,data:await a.json()}}catch(a){return console.error("Error fetching moderation item:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async submitForModeration(t){try{const a={type:t.type,content:{title:t.title,content:t.content,author:t.author,category:t.category},submittedBy:t.author,metadata:{source:"user_submission",word_count:t.content.split(" ").length,estimated_read_time:Math.ceil(t.content.split(" ").length/200),...t.metadata}},r=await fetch(`${this.baseUrl}/api/submit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);return{success:!0,data:await r.json(),message:"Story submitted for moderation"}}catch(a){return console.error("Error submitting for moderation:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async moderateContent(t,a,r){try{console.log(`ðŸ”„ Moderating content ${t}: ${a}`,{reason:r});const n=await T.from("events").update({status:a==="approve"?"published":"archived",updated_at:new Date().toISOString(),...r&&{moderation_reason:r}}).eq("id",t).select().single();if(console.log("ðŸ“Š Event update result:",n),n.data&&!n.error)return{success:!0,data:n.data,message:`Event "${n.data.title||n.data.name}" ${a==="approve"?"approved and published":"rejected and archived"} successfully`};const o=await T.from("newsroom_articles").update({status:a==="approve"?"published":"archived",updated_at:new Date().toISOString(),...r&&{moderation_reason:r}}).eq("id",t).select().single();return console.log("ðŸ“° Article update result:",o),o.data&&!o.error?{success:!0,data:o.data,message:`Article "${o.data.title}" ${a==="approve"?"approved and published":"rejected and archived"} successfully`}:{success:!1,error:`Content not found in events or articles tables. Event error: ${n.error?.message}, Article error: ${o.error?.message}`}}catch(n){return console.error("Error moderating content:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async getStats(){try{const[t,a]=await Promise.all([T.from("events").select("status, updated_at",{count:"exact"}),T.from("newsroom_articles").select("status, updated_at",{count:"exact"})]),r=t.data||[],n=a.data||[],o=r.filter(b=>b.status==="draft").length,s=n.filter(b=>b.status==="draft").length,u=o+s,d=new Date().toISOString().split("T")[0],N=[...r,...n].filter(b=>b.updated_at&&b.updated_at.startsWith(d)).length;return console.log("ðŸ“Š Stats calculated:",{pendingEvents:o,pendingArticles:s,totalPending:u,todayActions:N,totalEvents:r.length,totalArticles:n.length}),{success:!0,data:{pendingCount:u,todayActions:N,activeModerators:1,newsroomQueue:s,eventsQueue:o,communityQueue:0}}}catch(t){return console.error("Error fetching moderation stats:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error",data:{pendingCount:0,todayActions:0,activeModerators:1,newsroomQueue:0,eventsQueue:0,communityQueue:0}}}}async getHistory(t){try{const a=new URLSearchParams;t&&Object.entries(t).forEach(([o,s])=>{s!==void 0&&a.append(o,s.toString())});const r=await fetch(`${this.baseUrl}/api/history?${a}`);if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);return{success:!0,data:await r.json()}}catch(a){return console.error("Error fetching moderation history:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error",data:{history:[],total:0}}}}getConnectionStatus(){return{connected:this.isConnected,service:"supabase-moderation",baseUrl:"direct-supabase-connection"}}}const H=new ht,gt=({isOpen:p,onClose:t,onSubmitSuccess:a})=>{const[r,n]=g.useState({title:"",content:"",category:"Community News",author:""}),[o,s]=g.useState(!1),[u,d]=g.useState("idle"),[N,b]=g.useState(""),A=["Community News","Community Organizing","Economic Justice","Legal Victory","Healthcare","Housing","Cultural Events","Education","Safety & Security"],c=async f=>{if(f.preventDefault(),!r.title.trim()||!r.content.trim()||!r.author.trim()){d("error"),b("Please fill in all required fields");return}s(!0),d("idle");try{const h=await H.submitForModeration({type:"newsroom_article",title:r.title,content:r.content,author:r.author,category:r.category,metadata:{source:"user_submission",submission_timestamp:new Date().toISOString()}});h.success?(d("success"),b("Story submitted successfully! It will be reviewed before publication."),n({title:"",content:"",category:"Community News",author:""}),a?.(),setTimeout(()=>{t(),d("idle"),b("")},3e3)):(d("error"),b(h.error||"Submission failed. Please try again."))}catch(h){d("error"),b("Network error. Please check your connection and try again."),console.error("Submission error:",h)}finally{s(!1)}},S=(f,h)=>{n(y=>({...y,[f]:h})),u==="error"&&(d("idle"),b(""))};return p?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-gradient-to-br from-slate-900 to-gray-900 rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Submit Your Story"}),e.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors",disabled:o,children:e.jsx(ie,{className:"w-5 h-5"})})]}),N&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`mb-6 p-4 rounded-lg flex items-center gap-3 ${u==="success"?"bg-green-900/20 text-green-400 border border-green-500/20":"bg-red-900/20 text-red-400 border border-red-500/20"}`,children:[u==="success"?e.jsx(J,{className:"w-5 h-5"}):e.jsx(ne,{className:"w-5 h-5"}),e.jsx("span",{children:N})]}),e.jsxs("form",{onSubmit:c,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white font-medium mb-2",children:["Your Name ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",value:r.author,onChange:f=>S("author",f.target.value),className:"w-full px-4 py-3 bg-white/10 text-white rounded-lg border border-white/20 focus:border-blue-400 focus:outline-none transition-colors",placeholder:"Your name or organization",disabled:o,required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white font-medium mb-2",children:["Story Title ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",value:r.title,onChange:f=>S("title",f.target.value),className:"w-full px-4 py-3 bg-white/10 text-white rounded-lg border border-white/20 focus:border-blue-400 focus:outline-none transition-colors",placeholder:"Your story headline...",disabled:o,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-medium mb-2",children:"Category"}),e.jsx("select",{value:r.category,onChange:f=>S("category",f.target.value),className:"w-full px-4 py-3 bg-white/10 text-white rounded-lg border border-white/20 focus:border-blue-400 focus:outline-none transition-colors",disabled:o,children:A.map(f=>e.jsx("option",{value:f,className:"bg-gray-900 text-white",children:f},f))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white font-medium mb-2",children:["Story Content ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("textarea",{value:r.content,onChange:f=>S("content",f.target.value),className:"w-full px-4 py-3 bg-white/10 text-white rounded-lg border border-white/20 focus:border-blue-400 focus:outline-none transition-colors h-40 resize-none",placeholder:"Tell your story... What happened? How did it impact your community? What organizing or actions were involved?",disabled:o,required:!0}),e.jsxs("div",{className:"text-sm text-gray-400 mt-2",children:[r.content.split(" ").length," words â€¢ ~",Math.ceil(r.content.split(" ").length/200)," min read"]})]}),e.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/20 rounded-lg p-4",children:[e.jsx("h3",{className:"text-blue-400 font-medium mb-2",children:"Community Guidelines"}),e.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[e.jsx("li",{children:"â€¢ Stories should center Black queer experiences and liberation"}),e.jsx("li",{children:"â€¢ Focus on community organizing, victories, and positive impact"}),e.jsx("li",{children:"â€¢ Be respectful of others' privacy and safety"}),e.jsx("li",{children:"â€¢ All submissions are reviewed before publication"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"flex-1 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors font-medium",disabled:o,children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-lg transition-all duration-300 font-medium disabled:opacity-50 disabled:cursor-not-allowed",disabled:o||!r.title.trim()||!r.content.trim()||!r.author.trim(),children:o?e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"w-5 h-5 animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"w-5 h-5"}),"Submit Story"]})})]})]})]})}):null},pt=()=>{const[p,t]=g.useState([]),[a,r]=g.useState({total:0,pending:0,approved:0,rejected:0}),[n,o]=g.useState(!0),[s,u]=g.useState(!1),[d,N]=g.useState(null);g.useEffect(()=>{b();const m=w=>{w.data.type==="BLKOUT_STORY_SUBMISSION"&&A(w.data)};return window.addEventListener("message",m),()=>window.removeEventListener("message",m)},[]);const b=async()=>{o(!0),N(null);try{const m=await ut.getArticles({status:"published",limit:20});m.success&&m.data&&t(m.data.articles||[]);const w=await H.getQueue({type:"newsroom_article",limit:100});if(w.success&&w.data){const _=w.data.items||[];r({total:_.length,pending:_.filter(D=>D.status==="pending").length,approved:_.filter(D=>D.status==="approved").length,rejected:_.filter(D=>D.status==="rejected").length})}}catch(m){console.error("Error loading newsroom data:",m),N("Unable to load newsroom content. Please check your connection.")}finally{o(!1)}},A=async m=>{try{await H.submitForModeration({type:"newsroom_article",title:m.title,content:m.content,author:m.author||"Community Member",category:m.category||"Community News",metadata:{source:"chrome_extension",url:m.url}}),b()}catch(w){console.error("Error handling extension submission:",w)}},c=()=>{b()},S={"Community Organizing":"bg-emerald-600 text-emerald-100","Economic Justice":"bg-amber-600 text-amber-100","Legal Victory":"bg-blue-600 text-blue-100","Community News":"bg-purple-600 text-purple-100",Technology:"bg-cyan-600 text-cyan-100",Community:"bg-green-600 text-green-100"},f=m=>typeof m=="string"?m:m.name;if(n)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-gray-950 to-blue-950 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-3 text-white",children:[e.jsx(V,{className:"w-6 h-6 animate-spin"}),e.jsx("span",{children:"Loading community newsroom..."})]})});const h=p.filter(m=>m.featured),y=p.filter(m=>!m.featured);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-gray-950 to-blue-950",children:[e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-16",children:[e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-16",children:[e.jsxs("div",{className:"flex justify-center items-center gap-6 mb-6",children:[e.jsx("img",{src:"/images/squared/BLKOUTiconWHITE.png",alt:"BLKOUT",className:"w-16 h-16 object-contain",onError:m=>{const w=m.target;w.style.display="none"}}),e.jsxs("h1",{className:"text-5xl font-black text-white uppercase tracking-wide",children:["COMMUNITY ",e.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-emerald-400 bg-clip-text text-transparent",children:"NEWSROOM"})]})]}),e.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"Stories from the liberation movement. Amplifying Black queer voices, culture, and community organizing victories across the UK."}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4 mt-8",children:[e.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-300",children:[e.jsx(ae,{className:"w-5 h-5"}),"Submit Story"]}),e.jsxs(U,{to:"/newsroom/archive",className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-violet-600 text-white font-bold rounded-lg hover:from-purple-700 hover:to-violet-700 transition-all duration-300",children:[e.jsx(Z,{className:"w-5 h-5"}),"Story Archive"]}),e.jsxs("div",{className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white font-bold rounded-lg",children:[e.jsx(Z,{className:"w-5 h-5"}),"Submissions (",a.total,")"]}),a.pending>0&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-orange-600/20 text-orange-300 border border-orange-500/30 rounded-lg text-sm",children:[e.jsx(Q,{className:"w-4 h-4"}),a.pending," pending review"]})]})]}),d&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-8 p-4 bg-red-900/20 border border-red-500/20 rounded-lg flex items-center gap-3 text-red-400",children:[e.jsx(ne,{className:"w-5 h-5"}),e.jsx("span",{children:d})]}),h.length>0&&e.jsxs("div",{className:"mb-16",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-8",children:"Featured Stories"}),e.jsx("div",{className:"space-y-8",children:h.map((m,w)=>e.jsxs(v.article,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2+w*.1},className:"bg-gradient-to-r from-blue-900/20 to-emerald-900/20 rounded-2xl p-8 border border-blue-500/20",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${S[m.category]||"bg-gray-600 text-gray-100"}`,children:m.category}),e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-red-600 text-red-100",children:"Featured"})]}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-4 leading-tight",children:m.title}),e.jsx("p",{className:"text-lg text-gray-300 mb-6 leading-relaxed",children:m.excerpt}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 text-gray-400 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"w-4 h-4"}),f(m.author)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Q,{className:"w-4 h-4"}),m.readTime," min read"]}),e.jsx("span",{children:new Date(m.publishedAt).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("button",{className:"flex items-center gap-2 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:["Read Full Story",e.jsx(de,{className:"w-4 h-4"})]})]})]},m.id))})]}),y.length>0?e.jsxs("div",{className:"mb-16",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-8",children:"Latest Stories"}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:y.map((m,w)=>e.jsxs(v.article,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3+w*.1},className:"bg-white/5 rounded-xl p-6 hover:bg-white/10 transition-all duration-300 border border-white/10 hover:border-white/20",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${S[m.category]||"bg-gray-600 text-gray-100"}`,children:m.category})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-3 leading-tight",children:m.title}),e.jsx("p",{className:"text-gray-300 mb-4 leading-relaxed",children:m.excerpt}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"w-4 h-4"}),f(m.author)]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Q,{className:"w-4 h-4"}),m.readTime," min"]}),e.jsx("span",{children:new Date(m.publishedAt).toLocaleDateString("en-GB",{month:"short",day:"numeric"})})]})]})]},m.id))})]}):!n&&!d&&e.jsxs(v.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"text-center py-16",children:[e.jsx(X,{className:"w-16 h-16 text-gray-400 mx-auto mb-6"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"No Stories Published Yet"}),e.jsx("p",{className:"text-gray-400 mb-8 max-w-2xl mx-auto",children:"Be the first to share your community story! Stories go through a moderation process before publication to ensure community safety and quality."}),e.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 mx-auto px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-300",children:[e.jsx(ae,{className:"w-5 h-5"}),"Submit First Story"]})]}),e.jsxs(v.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},className:"bg-gradient-to-r from-purple-900/20 to-pink-900/20 rounded-2xl p-8 border border-purple-500/20 mb-12",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Our Editorial Values"}),e.jsx("p",{className:"text-gray-300 text-lg",children:"Community-centered journalism for liberation"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Je,{className:"w-12 h-12 text-emerald-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Community First"}),e.jsx("p",{className:"text-gray-300",children:"Stories by and for our community, centering lived experiences"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(de,{className:"w-12 h-12 text-blue-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Action-Oriented"}),e.jsx("p",{className:"text-gray-300",children:"Journalism that builds power and supports organizing"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(X,{className:"w-12 h-12 text-purple-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Truth-Telling"}),e.jsx("p",{className:"text-gray-300",children:"Honest reporting that challenges systems of oppression"})]})]})]}),e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:1},className:"text-center",children:e.jsx(U,{to:"/",className:"inline-flex items-center gap-2 px-8 py-4 bg-slate-600 hover:bg-slate-700 text-white rounded-full transition-colors font-medium",children:"â† Back to Community Platform"})})]}),e.jsx(gt,{isOpen:s,onClose:()=>u(!1),onSubmitSuccess:c})]})},bt=()=>{const p=[{id:1,icon:xe,title:"Community Voting",description:"Democratic decision-making on platform features, content guidelines, and partnership decisions",status:"Active",color:"from-blue-500 to-blue-600"},{id:2,icon:Ce,title:"Proposals",description:"Submit and discuss ideas for platform improvements and community initiatives",status:"Open",color:"from-emerald-500 to-emerald-600"},{id:3,icon:P,title:"Working Groups",description:"Safety, Content, Tech, and Community Organizing committees",status:"Recruiting",color:"from-purple-500 to-purple-600"},{id:4,icon:G,title:"Transparency",description:"Open budget, decision logs, and community impact reports",status:"Updated",color:"from-amber-500 to-amber-600"}],t=[{icon:Se,title:"Cooperative Ownership",description:"Community-owned platform with democratic control over decisions and resources"},{icon:me,title:"Democratic Governance",description:"Every member has a voice in platform decisions through transparent voting processes"},{icon:P,title:"Community Accountability",description:"Shared responsibility for maintaining safe, inclusive spaces for liberation"},{icon:ue,title:"Values-First Development",description:"All platform changes prioritize community needs over profit or growth metrics"}],a={Active:"bg-green-600 text-green-100",Open:"bg-blue-600 text-blue-100",Recruiting:"bg-purple-600 text-purple-100",Updated:"bg-amber-600 text-amber-100"};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-950 via-violet-950 to-indigo-950",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-16",children:[e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-16",children:[e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-6",children:[e.jsx(me,{className:"w-12 h-12 text-purple-400"}),e.jsxs("h1",{className:"text-5xl font-black text-white",children:["Democratic ",e.jsx("span",{className:"bg-gradient-to-r from-purple-400 to-emerald-400 bg-clip-text text-transparent",children:"Governance"})]})]}),e.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"Community-owned decision making. BLKOUT operates on principles of cooperative ownership and democratic governance."})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-8 mb-16",children:p.map((r,n)=>{const o=r.icon;return e.jsxs(v.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2+n*.1},className:"bg-white/5 rounded-xl p-8 hover:bg-white/10 transition-all duration-300 border border-white/10 hover:border-white/20",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsx("div",{className:`p-4 rounded-xl bg-gradient-to-r ${r.color}`,children:e.jsx(o,{className:"w-8 h-8 text-white"})}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${a[r.status]}`,children:r.status})]}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:r.title}),e.jsx("p",{className:"text-gray-300 leading-relaxed",children:r.description})]},r.id)})}),e.jsxs(v.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"bg-gradient-to-r from-indigo-900/20 to-purple-900/20 rounded-2xl p-8 border border-purple-500/20 mb-12",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Our Democratic Values"}),e.jsx("p",{className:"text-gray-300 text-lg",children:"The principles that guide our community governance"})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:t.map((r,n)=>{const o=r.icon;return e.jsxs(v.div,{initial:{opacity:0,x:n%2===0?-20:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.8+n*.1},className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-purple-600/20 flex-shrink-0",children:e.jsx(o,{className:"w-6 h-6 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:r.title}),e.jsx("p",{className:"text-gray-300 leading-relaxed",children:r.description})]})]},n)})})]}),e.jsxs(v.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:1},className:"bg-white/5 rounded-2xl p-8 border border-white/10 mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-8 text-center",children:"How Democratic Governance Works"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ke,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"1. Discuss"}),e.jsx("p",{className:"text-gray-300",children:"Community members propose ideas and discuss implications together"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(xe,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"2. Vote"}),e.jsx("p",{className:"text-gray-300",children:"Democratic voting process with transparent results and participation tracking"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-emerald-500 to-emerald-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ue,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"3. Implement"}),e.jsx("p",{className:"text-gray-300",children:"Community decisions are implemented with progress updates and accountability"})]})]})]}),e.jsxs(v.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:1.2},className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:"Get Involved in Governance"}),e.jsx("p",{className:"text-xl text-gray-300 mb-8 max-w-2xl mx-auto",children:"Every community member has the power to shape BLKOUT's future through democratic participation"}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[e.jsx("button",{className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-violet-600 text-white font-bold rounded-lg hover:from-purple-700 hover:to-violet-700 transition-all duration-300",children:"Join Working Group"}),e.jsx("button",{className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-300",children:"Submit Proposal"}),e.jsx("button",{className:"px-6 py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white font-bold rounded-lg hover:from-emerald-700 hover:to-teal-700 transition-all duration-300",children:"View Current Votes"})]})]}),e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:1.4},className:"text-center",children:e.jsx(U,{to:"/",className:"inline-flex items-center gap-2 px-8 py-4 bg-slate-600 hover:bg-slate-700 text-white rounded-full transition-colors font-medium",children:"â† Back to Community Platform"})})]})})},ye=()=>{const[p,t]=g.useState([]),[a,r]=g.useState(null),[n,o]=g.useState(!0),[s,u]=g.useState(null),[d,N]=g.useState("pending"),[b,A]=g.useState(null),[c,S]=g.useState(!1),[f,h]=g.useState({title:"",content:"",author:"",category:""});g.useEffect(()=>{y();const l=setInterval(y,3e4);return()=>clearInterval(l)},[d]);const y=async()=>{o(!0);try{const l={...d==="pending"&&{status:"pending"},...d==="high-priority"&&{priority:"high"},limit:50};console.log("ðŸ”„ Loading moderation data with filters:",l);const[j,k]=await Promise.all([H.getQueue(l),H.getStats()]);console.log("ðŸ“‹ Queue response:",{success:j.success,itemsCount:j.data?.items?.length||0,error:j.error}),j.success?(console.log("âœ… Setting queue items:",j.data?.items?.length||0),t(j.data?.items||[])):console.error("âŒ Queue loading failed:",j.error),k.success?(console.log("ðŸ“Š Setting stats:",k.data),r(k.data)):console.error("âŒ Stats loading failed:",k.error)}catch(l){console.error("Error loading moderation data:",l)}finally{o(!1)}},m=async(l,j,k)=>{A(l);try{const I=await H.moderateContent(l,j,k);I.success?(t(E=>E.filter(O=>O.id!==l)),u(null),S(!1),await y(),console.log(`Item ${j==="approve"?"approved":"rejected"} successfully`)):console.error("Moderation failed:",I.error)}catch(I){console.error("Error moderating content:",I)}finally{A(null)}},w=l=>{h({title:l.content.title,content:l.content.content||"",author:l.content.author,category:l.content.category}),S(!0)},_=async()=>{if(s)try{const l={...s,content:{...s.content,...f}};u(l),t(j=>j.map(k=>k.id===s.id?l:k)),S(!1),console.log("Content updated successfully")}catch(l){console.error("Error updating content:",l)}},D=()=>{S(!1),s&&h({title:s.content.title,content:s.content.content||"",author:s.content.author,category:s.content.category})},F=l=>{switch(l){case"urgent":return"text-red-400 bg-red-900/20";case"high":return"text-orange-400 bg-orange-900/20";case"medium":return"text-yellow-400 bg-yellow-900/20";default:return"text-gray-400 bg-gray-900/20"}},$=l=>{switch(l){case"approved":return"text-green-400 bg-green-900/20";case"rejected":return"text-red-400 bg-red-900/20";case"flagged":return"text-orange-400 bg-orange-900/20";default:return"text-blue-400 bg-blue-900/20"}};return n&&!a?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-gray-950 to-blue-950 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-3 text-white",children:[e.jsx(V,{className:"w-6 h-6 animate-spin"}),e.jsx("span",{children:"Loading moderation panel..."})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-gray-950 to-blue-950",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Content Moderation"}),e.jsx("p",{className:"text-gray-400",children:"Review and moderate community-submitted content (articles, events, and more)"})]}),e.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",disabled:n,children:[e.jsx(_e,{className:`w-4 h-4 ${n?"animate-spin":""}`}),"Refresh"]})]})}),a&&e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white/5 rounded-xl p-6 border border-white/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Q,{className:"w-8 h-8 text-blue-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:a.pendingCount}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Pending Review"})]})]})}),e.jsx("div",{className:"bg-white/5 rounded-xl p-6 border border-white/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ce,{className:"w-8 h-8 text-emerald-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:a.newsroomQueue}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Newsroom Queue"})]})]})}),e.jsx("div",{className:"bg-white/5 rounded-xl p-6 border border-white/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{className:"w-8 h-8 text-green-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:a.todayActions}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Actions Today"})]})]})}),e.jsx("div",{className:"bg-white/5 rounded-xl p-6 border border-white/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(re,{className:"w-8 h-8 text-purple-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:a.activeModerators}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Active Moderators"})]})]})})]}),e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center gap-4 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:"text-gray-400",children:"Filter:"})]}),["all","pending","high-priority"].map(l=>e.jsx("button",{onClick:()=>N(l),className:`px-4 py-2 rounded-lg transition-colors capitalize ${d===l?"bg-blue-600 text-white":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:l.replace("-"," ")},l))]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsxs(v.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-white/5 rounded-2xl p-6 border border-white/10",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Moderation Queue"}),n?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(V,{className:"w-8 h-8 animate-spin text-blue-400 mx-auto mb-3"}),e.jsx("div",{className:"text-gray-400",children:"Loading queue..."})]}):p.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(J,{className:"w-12 h-12 text-green-400 mx-auto mb-3"}),e.jsx("div",{className:"text-gray-400",children:"No items pending moderation"}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Great job keeping up!"})]}):e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:p.map(l=>e.jsxs("div",{onClick:()=>u(l),className:`p-4 rounded-lg border transition-all duration-200 cursor-pointer ${s?.id===l.id?"bg-blue-900/20 border-blue-500/50":"bg-white/5 border-white/10 hover:bg-white/10"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"font-medium text-white text-sm leading-tight",children:l.content.title}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs ${F(l.priority)}`,children:l.priority}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${$(l.status)}`,children:l.status})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(re,{className:"w-3 h-3"}),l.submittedBy]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(B,{className:"w-3 h-3"}),new Date(l.submittedAt).toLocaleDateString()]}),l.flags.length>0&&e.jsxs("span",{className:"flex items-center gap-1 text-orange-400",children:[e.jsx(Ye,{className:"w-3 h-3"}),l.flags.length," flag",l.flags.length!==1?"s":""]})]})]},l.id))})]}),e.jsxs(v.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white/5 rounded-2xl p-6 border border-white/10",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Content Preview"}),s?e.jsxs("div",{className:"space-y-6",children:[!c&&s.status==="pending"&&e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>w(s),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm transition-colors",children:[e.jsx(Ae,{className:"w-4 h-4"}),"Edit Content"]})}),e.jsx("div",{children:c?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title"}),e.jsx("input",{type:"text",value:f.title,onChange:l=>h(j=>({...j,title:l.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Author"}),e.jsx("input",{type:"text",value:f.author,onChange:l=>h(j=>({...j,author:l.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Category"}),e.jsx("input",{type:"text",value:f.category,onChange:l=>h(j=>({...j,category:l.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:s.content.title}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx("span",{className:"px-3 py-1 bg-gray-700 text-gray-300 rounded-full text-sm",children:s.content.category}),e.jsxs("span",{className:"px-3 py-1 bg-gray-700 text-gray-300 rounded-full text-sm",children:["By ",s.content.author]})]})]})}),e.jsx("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:c?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Content"}),e.jsx("textarea",{value:f.content,onChange:l=>h(j=>({...j,content:l.target.value})),rows:8,className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-vertical",placeholder:"Content preview..."})]}):e.jsx("p",{className:"text-gray-300 leading-relaxed",children:s.content.content||"No content preview available"})}),s.metadata&&e.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-white font-medium mb-2",children:"Submission Details"}),e.jsxs("div",{className:"text-sm text-gray-400 space-y-1",children:[e.jsxs("div",{children:["Source: ",s.metadata.source]}),s.metadata.word_count&&e.jsxs("div",{children:["Word count: ",s.metadata.word_count]}),s.metadata.estimated_read_time&&e.jsxs("div",{children:["Est. reading time: ",s.metadata.estimated_read_time," min"]})]})]}),s.flags.length>0&&e.jsxs("div",{className:"bg-orange-900/20 border border-orange-500/20 rounded-lg p-4",children:[e.jsx("h4",{className:"text-orange-400 font-medium mb-2",children:"Flags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.flags.map((l,j)=>e.jsx("span",{className:"px-2 py-1 bg-orange-600 text-orange-100 rounded text-sm",children:l},j))})]}),s.status==="pending"&&e.jsx("div",{className:"flex gap-3 pt-4",children:c?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:_,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[e.jsx(Ee,{className:"w-5 h-5"}),"Save Changes"]}),e.jsxs("button",{onClick:D,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",children:[e.jsx(ie,{className:"w-5 h-5"}),"Cancel"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>m(s.id,"approve"),disabled:b===s.id,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors disabled:opacity-50",children:[b===s.id?e.jsx(V,{className:"w-5 h-5 animate-spin"}):e.jsx(J,{className:"w-5 h-5"}),"Approve"]}),e.jsxs("button",{onClick:()=>m(s.id,"reject","Does not meet community guidelines"),disabled:b===s.id,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors disabled:opacity-50",children:[b===s.id?e.jsx(V,{className:"w-5 h-5 animate-spin"}):e.jsx(Te,{className:"w-5 h-5"}),"Reject"]})]})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ze,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("div",{className:"text-gray-400",children:"Select an item to preview"}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Click any item from the queue to review"})]})]})]})]})})},ft=({title:p,subtitle:t,className:a="",iconColor:r="white"})=>{const n=r==="white"?"/images/squared/BLKOUTiconWHITE.png":"/images/squared/BLKOUTiconBLACK.png";return e.jsxs("div",{className:`flex items-center space-x-4 mb-8 ${a}`,children:[e.jsx("img",{src:n,alt:"BLKOUT",className:"w-16 h-16 object-contain",onError:o=>{const s=o.target;s.style.display="none"}}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-5xl font-bold uppercase tracking-wide",children:p}),t&&e.jsx("p",{className:"text-xl text-opacity-80 mt-2",children:t})]})]})},je=()=>{const[p]=g.useState({services:[{name:"IVOR Frontend",status:"healthy",responseTime:45,description:"Main user interface for IVOR AI assistant",capabilities:["user-interface","chat-interface","community-access"]},{name:"IVOR API Gateway",status:"healthy",responseTime:52,description:"Central API routing and authentication",capabilities:["api-routing","authentication","rate-limiting"]},{name:"IVOR Core Service",status:"healthy",responseTime:78,description:"AI-powered support for Black queer communities",capabilities:["community-focused-responses","liberation-centered"]},{name:"IVOR Organizing Service",status:"healthy",responseTime:61,description:"Community organizing and collective action tools",capabilities:["organizing-support","collective-action"]},{name:"IVOR Community Service",status:"healthy",responseTime:69,description:"Community management and member support",capabilities:["community-management","member-support"]},{name:"IVOR Social Service",status:"healthy",responseTime:71,description:"Social media integration and content sharing",capabilities:["social-media","content-sharing"]}],overallStatus:"healthy",averageResponseTime:62,totalServices:6,healthyServices:6,lastUpdate:new Date().toISOString()}),[t]=g.useState({workflows:[{id:"blkout_main_workflow",name:"Content Calendar Automation",status:"active",last_run:new Date(Date.now()-36e5).toISOString(),execution_time:"2.3s",description:"Automated content distribution across platforms every Monday at 8 AM",triggers_today:1,success_rate:98.5,nodes:[{name:"Schedule Trigger",type:"cron",status:"success"},{name:"Fetch Content",type:"googleSheets",status:"success"},{name:"Post to Social",type:"httpRequest",status:"success"}]},{id:"blkout_community_monitoring",name:"Community Health Monitoring",status:"active",last_run:new Date(Date.now()-18e5).toISOString(),execution_time:"1.8s",description:"Engagement tracking and community analytics every 2 hours",triggers_today:12,success_rate:99.2,nodes:[{name:"Interval Trigger",type:"interval",status:"success"},{name:"Fetch Data",type:"httpRequest",status:"success"}]},{id:"blkout_emergent_response",name:"Real-time Community Response",status:"active",last_run:new Date(Date.now()-9e5).toISOString(),execution_time:"0.8s",description:"Handles community questions and emergent needs via webhooks",triggers_today:8,success_rate:96.8,nodes:[{name:"Webhook Trigger",type:"webhook",status:"success"},{name:"Query IVOR AI",type:"httpRequest",status:"success"}]}],total_workflows:3,active_workflows:3,total_executions_today:21,average_success_rate:98.2,last_update:new Date().toISOString()}),a=({status:r})=>{const n={connected:"bg-green-500/20 text-green-400 border-green-500/30",active:"bg-green-500/20 text-green-400 border-green-500/30",disconnected:"bg-red-500/20 text-red-400 border-red-500/30",inactive:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",error:"bg-red-500/20 text-red-400 border-red-500/30",healthy:"bg-green-500/20 text-green-400 border-green-500/30",loading:"bg-blue-500/20 text-blue-400 border-blue-500/30"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs border ${n[r]}`,children:r.charAt(0).toUpperCase()+r.slice(1)})};return e.jsx("div",{className:"min-h-screen bg-black text-white p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-12",children:e.jsx(ft,{title:"ADMIN HUB",subtitle:"Unified administration dashboard for community moderation, IVOR AI system, and liberation technology infrastructure",iconColor:"white",className:"text-white justify-center text-center"})}),e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-8",children:e.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 to-purple-900/30 rounded-xl p-6 border border-blue-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx(ee,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"IVOR SYSTEM STATUS"}),e.jsx("p",{className:"text-gray-400",children:"Intelligent Virtual Organizer for Revolution - Live Monitoring"})]})]}),e.jsx(a,{status:p.overallStatus})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(te,{className:"w-4 h-4 text-green-400"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Services Online"})]}),e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[p.healthyServices,"/",p.totalServices]})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Q,{className:"w-4 h-4 text-blue-400"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Avg Response"})]}),e.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:[p.averageResponseTime,"ms"]})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(he,{className:"w-4 h-4 text-purple-400"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Environment"})]}),e.jsx("div",{className:"text-2xl font-bold text-purple-400",children:"Production"})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ee,{className:"w-4 h-4 text-orange-400"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Last Update"})]}),e.jsx("div",{className:"text-sm font-bold text-orange-400",children:new Date(p.lastUpdate).toLocaleTimeString()})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.services.map((r,n)=>e.jsxs("div",{className:"bg-gray-900/30 rounded-lg p-4 border border-gray-700/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:r.name}),e.jsx(a,{status:r.status})]}),e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:r.description}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Response:"}),e.jsxs("span",{className:"text-blue-400",children:[r.responseTime,"ms"]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:r.capabilities.slice(0,2).map((o,s)=>e.jsx("span",{className:"px-1 py-0.5 bg-blue-500/20 text-blue-300 rounded text-xs",children:o},s))})]},r.name))})]})}),e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-8",children:e.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 to-emerald-900/30 rounded-xl p-6 border border-green-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center",children:e.jsx(ge,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"N8N AUTOMATION WORKFLOWS"}),e.jsx("p",{className:"text-gray-400",children:"Community-driven automation pipeline"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Total Workflows"}),e.jsx("div",{className:"text-2xl font-bold text-green-400",children:t.total_workflows})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(te,{className:"w-4 h-4 text-green-400"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Active Workflows"})]}),e.jsx("div",{className:"text-2xl font-bold text-green-400",children:t.active_workflows})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Q,{className:"w-4 h-4 text-blue-400"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Executions Today"})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:t.total_executions_today})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Xe,{className:"w-4 h-4 text-purple-400"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Success Rate"})]}),e.jsxs("div",{className:"text-2xl font-bold text-purple-400",children:[t.average_success_rate,"%"]})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(he,{className:"w-4 h-4 text-orange-400"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Last Update"})]}),e.jsx("div",{className:"text-sm font-bold text-orange-400",children:new Date(t.last_update).toLocaleTimeString()})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:t.workflows.map((r,n)=>e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+n*.1},className:"bg-gray-900/50 rounded-xl p-6 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:r.name}),e.jsx(a,{status:r.status})]}),e.jsx("p",{className:"text-gray-400 mb-4 text-sm",children:r.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Last Run:"}),e.jsx("span",{className:"text-white",children:new Date(r.last_run).toLocaleTimeString()})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Triggers Today:"}),e.jsx("span",{className:"text-green-400",children:r.triggers_today})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Success Rate:"}),e.jsxs("span",{className:"text-blue-400",children:[r.success_rate,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Execution:"}),e.jsx("span",{className:"text-purple-400",children:r.execution_time})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[e.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Nodes (",r.nodes.length,")"]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[r.nodes.slice(0,2).map((o,s)=>e.jsx("span",{className:"px-2 py-0.5 bg-emerald-500/20 text-emerald-300 rounded text-xs",children:o.name},s)),r.nodes.length>2&&e.jsxs("span",{className:"px-2 py-0.5 bg-gray-600/20 text-gray-400 rounded text-xs",children:["+",r.nodes.length-2," more"]})]})]})]},r.id))})]})}),e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"mb-8",children:e.jsxs("div",{className:"bg-gradient-to-br from-orange-900/30 to-red-900/30 rounded-xl p-6 border border-orange-500/20",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-red-600 rounded-full flex items-center justify-center",children:e.jsx(et,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"CHROME EXTENSION & ADMIN TOOLS"}),e.jsx("p",{className:"text-gray-400",children:"Community moderation and content submission tools"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-black/30 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center",children:[e.jsx(pe,{className:"w-5 h-5 mr-2 text-orange-400"}),"EXTENSION DOWNLOAD"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-orange-900/50 rounded-lg p-3",children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:"Complete Archive"}),e.jsxs("a",{href:"/chrome-extension.zip",download:"blkout-extension-v1.1.zip",className:"inline-flex items-center bg-orange-600 hover:bg-orange-500 text-white px-3 py-2 rounded-lg transition-colors text-sm",children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"Download v1.1 (18KB)"]})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:[e.jsx("p",{children:"âœ… Direct Supabase integration"}),e.jsx("p",{children:"âœ… Auto content detection"}),e.jsx("p",{children:"âœ… Real moderation queue"})]})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center",children:[e.jsx(G,{className:"w-5 h-5 mr-2 text-emerald-400"}),"ADMIN ACCESS"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-emerald-900/50 rounded-lg p-3",children:[e.jsxs("p",{className:"text-sm text-emerald-100 mb-2",children:["Admin Password: ",e.jsx("code",{className:"bg-emerald-950/50 px-2 py-1 rounded",children:"BLKOUT2025!"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("a",{href:"/admin/moderation",className:"text-xs px-2 py-1 bg-emerald-600 hover:bg-emerald-500 rounded transition-colors",children:"Moderation"}),e.jsx("a",{href:"/admin/newsroom",className:"text-xs px-2 py-1 bg-emerald-600 hover:bg-emerald-500 rounded transition-colors",children:"Newsroom"}),e.jsx("a",{href:"/admin/events",className:"text-xs px-2 py-1 bg-emerald-600 hover:bg-emerald-500 rounded transition-colors",children:"Events"})]})]}),e.jsx("div",{className:"text-xs text-gray-400",children:e.jsx("p",{children:"Content pipeline: Extension â†’ Moderation â†’ Publishing"})})]})]})]}),e.jsxs("div",{className:"mt-6 bg-gray-900/30 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-white mb-3",children:"QUICK INSTALLATION:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"bg-orange-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"1"}),e.jsx("span",{className:"text-gray-300",children:"Download & extract"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"bg-orange-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"2"}),e.jsx("span",{className:"text-gray-300",children:"Chrome â†’ Extensions â†’ Developer Mode"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"bg-orange-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"3"}),e.jsx("span",{className:"text-gray-300",children:"Load unpacked folder"})]})]})]})]})}),e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"mb-8",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-pink-900/30 rounded-xl p-6 border border-purple-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center",children:e.jsx(G,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"MODERATION QUEUE STATUS"}),e.jsx("p",{className:"text-gray-400",children:"Community content awaiting review"})]})]}),e.jsxs("a",{href:"/admin/moderation",className:"flex items-center bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-lg transition-colors",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Open Moderation"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(X,{className:"w-4 h-4 text-blue-400"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Pending Articles"})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:"--"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Chrome Extension + Form"})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(B,{className:"w-4 h-4 text-green-400"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Pending Events"})]}),e.jsx("div",{className:"text-2xl font-bold text-green-400",children:"--"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Community Submissions"})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(P,{className:"w-4 h-4 text-yellow-400"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Governance Items"})]}),e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:"--"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Proposals & Documents"})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(te,{className:"w-4 h-4 text-purple-400"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Total Queue"})]}),e.jsx("div",{className:"text-2xl font-bold text-purple-400",children:"--"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"All content types"})]})]}),e.jsxs("div",{className:"mt-6 bg-gray-900/30 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-white mb-3 flex items-center",children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"CONTENT PIPELINE FLOW:"]}),e.jsx("div",{className:"flex items-center justify-between text-sm",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-900/50 text-blue-300 rounded",children:"Chrome Extension"}),e.jsx("span",{className:"text-gray-400",children:"â†’"}),e.jsx("span",{className:"px-2 py-1 bg-purple-900/50 text-purple-300 rounded",children:"Moderation Queue"}),e.jsx("span",{className:"text-gray-400",children:"â†’"}),e.jsx("span",{className:"px-2 py-1 bg-green-900/50 text-green-300 rounded",children:"Published Content"})]})})]})]})}),e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-center uppercase tracking-wide",children:"QUICK ACTIONS"}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-300 mb-4 flex items-center justify-center gap-2",children:[e.jsx(oe,{className:"w-5 h-5"}),"EXTERNAL PLATFORMS"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:()=>window.open("https://calendar.google.com/calendar/u/0/r","_blank"),className:"bg-green-600 hover:bg-green-700 text-white p-4 rounded-xl transition-colors",children:[e.jsx(B,{className:"w-6 h-6 mb-2 mx-auto"}),e.jsx("div",{className:"text-sm font-semibold",children:"Create Event"})]}),e.jsxs("button",{onClick:()=>window.open("https://t.me/blkoutuk","_blank"),className:"bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-xl transition-colors",children:[e.jsx(ke,{className:"w-6 h-6 mb-2 mx-auto"}),e.jsx("div",{className:"text-sm font-semibold",children:"Community Telegram"})]}),e.jsxs("button",{onClick:()=>window.open("https://ivor-beta.vercel.app","_blank"),className:"bg-purple-600 hover:bg-purple-700 text-white p-4 rounded-xl transition-colors",children:[e.jsx(ee,{className:"w-6 h-6 mb-2 mx-auto"}),e.jsx("div",{className:"text-sm font-semibold",children:"Launch IVOR AI"})]}),e.jsxs("button",{onClick:()=>window.open("https://blkouthub.com","_blank"),className:"bg-orange-600 hover:bg-orange-700 text-white p-4 rounded-xl transition-colors",children:[e.jsx(P,{className:"w-6 h-6 mb-2 mx-auto"}),e.jsx("div",{className:"text-sm font-semibold",children:"BLKOUTHUB Portal"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-300 mb-4 flex items-center justify-center gap-2",children:[e.jsx(tt,{className:"w-5 h-5"}),"INTERNAL ADMIN"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:()=>window.location.href="/admin/moderation",className:"bg-purple-600 hover:bg-purple-700 text-white p-4 rounded-xl transition-colors",children:[e.jsx(G,{className:"w-6 h-6 mb-2 mx-auto"}),e.jsx("div",{className:"text-sm font-semibold",children:"Moderation Queue"})]}),e.jsxs("button",{onClick:()=>window.location.href="/admin/events",className:"bg-indigo-600 hover:bg-indigo-700 text-white p-4 rounded-xl transition-colors",children:[e.jsx(B,{className:"w-6 h-6 mb-2 mx-auto"}),e.jsx("div",{className:"text-sm font-semibold",children:"Events Admin"})]}),e.jsxs("button",{onClick:()=>window.location.href="/admin/newsroom",className:"bg-cyan-600 hover:bg-cyan-700 text-white p-4 rounded-xl transition-colors",children:[e.jsx(X,{className:"w-6 h-6 mb-2 mx-auto"}),e.jsx("div",{className:"text-sm font-semibold",children:"Newsroom Admin"})]}),e.jsxs("button",{onClick:()=>window.location.href="/admin/governance",className:"bg-amber-600 hover:bg-amber-700 text-white p-4 rounded-xl transition-colors",children:[e.jsx(P,{className:"w-6 h-6 mb-2 mx-auto"}),e.jsx("div",{className:"text-sm font-semibold",children:"Governance Admin"})]})]})]})]}),e.jsxs(v.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"text-center text-gray-500 text-sm",children:[e.jsx("p",{className:"uppercase tracking-wide",children:"BLKOUT UK ADMIN HUB - TECHNOLOGY FOR BLACK QUEER LIBERATION"}),e.jsx("p",{className:"mt-2",children:"All systems operational â€¢ Real-time monitoring active"})]})]})})},Y={name:"",description:"",event_date:"",location:{type:"physical",address:"",coordinates:null},source:"manual",organizer_name:"",tags:[],status:"draft",target_audience:[]},ve=["community","wellness","education","arts-culture","activism","social","professional-development","support-group","celebration","fundraising","protest","workshop"],yt=["Black QTIPOC","Youth (16-25)","Elders (50+)","Parents/Families","Students","Professionals","Artists","Activists","All Welcome"];function jt(){const{isAuthenticated:p}=$e(),{events:t,loading:a,error:r,refetch:n,createEvent:o,updateEvent:s,deleteEvent:u}=ze(),{stats:d,loading:N}=Ke(),{uploading:b}=Ve(),[A,c]=g.useState(!1),[S,f]=g.useState(null),[h,y]=g.useState(Y),[m,w]=g.useState(""),[_,D]=g.useState("all"),[F,$]=g.useState("all"),[l,j]=g.useState("event_date"),[k,I]=g.useState("asc"),[E,O]=g.useState([]),[z,K]=g.useState(!1),q=t.filter(i=>{if(m){const x=m.toLowerCase();return i.name.toLowerCase().includes(x)||i.description.toLowerCase().includes(x)||i.organizer_name?.toLowerCase().includes(x)}return!0}).filter(i=>_==="all"||i.status===_).filter(i=>F==="all"?!0:i.tags?.some(x=>x.toLowerCase().includes(F.toLowerCase()))).sort((i,x)=>{const C=i[l]||"",R=x[l]||"",ce=C.localeCompare(R);return k==="asc"?ce:-ce}),L=async i=>{i.preventDefault();try{const x={...h,event_date:new Date(h.event_date).toISOString(),location:typeof h.location=="string"?{type:"physical",address:h.location}:h.location,tags:Array.isArray(h.tags)?h.tags:[],target_audience:Array.isArray(h.target_audience)?h.target_audience:[]};S?await s(S.id,x):await o(x),y(Y),f(null),c(!1)}catch(x){console.error("Failed to save event:",x)}},Oe=i=>{f(i),y({name:i.name,description:i.description,event_date:i.event_date.split("T")[0],location:i.location,source:i.source,source_url:i.source_url||"",organizer_name:i.organizer_name||"",tags:i.tags||[],status:i.status,image_url:i.image_url||"",price:i.price||"",contact_email:i.contact_email||"",registration_link:i.registration_link||"",target_audience:i.target_audience||[]}),c(!0)},Ue=async i=>{if(confirm("Are you sure you want to delete this event? This action cannot be undone."))try{await u(i)}catch(x){console.error("Failed to delete event:",x)}},le=async i=>{try{await Promise.all(E.map(x=>t.find(R=>R.id===x)?s(x,{status:i}):Promise.resolve())),O([]),K(!1)}catch(x){console.error("Failed to update events:",x)}},De=i=>{switch(i){case"published":return"text-emerald-400 bg-emerald-900/20 border-emerald-500/30";case"reviewing":return"text-yellow-400 bg-yellow-900/20 border-yellow-500/30";case"draft":return"text-blue-400 bg-blue-900/20 border-blue-500/30";case"archived":return"text-gray-400 bg-gray-900/20 border-gray-500/30";default:return"text-gray-400 bg-gray-900/20 border-gray-500/30"}};return p?a?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900 flex items-center justify-center",children:e.jsx(Qe,{size:"xl",color:"indigo",text:"Loading Events Dashboard"})}):e.jsx(He,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900",children:[e.jsx("div",{className:"bg-indigo-900/50 backdrop-blur-sm border-b border-indigo-700/30",children:e.jsx("div",{className:"max-w-7xl mx-auto px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-600 to-indigo-600 flex items-center justify-center",children:e.jsx(B,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-white heading-block uppercase",children:"Community Events Dashboard"}),e.jsxs("p",{className:"text-indigo-200 flex items-center mt-1",children:[e.jsx(Se,{className:"w-4 h-4 mr-2"}),"Powered by community â€¢ Built for liberation"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(st,{className:"w-4 h-4 text-emerald-400"}),e.jsx("span",{className:"text-emerald-400 font-medium",children:"Supabase Connected"})]}),e.jsxs(v.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>c(!0),className:"px-6 py-3 bg-gradient-to-r from-emerald-600 to-indigo-600 text-white font-bold hover:from-emerald-500 hover:to-indigo-500 transition-all heading-block uppercase flex items-center",children:[e.jsx(ae,{className:"w-5 h-5 mr-2"}),"Create Event"]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-8 py-8",children:[!N&&d&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-indigo-900/30 backdrop-blur-sm border border-indigo-700/30 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-indigo-200 text-sm font-medium",children:"Total Events"}),e.jsx("p",{className:"text-3xl font-black text-white",children:d.events?.total||0})]}),e.jsx(B,{className:"w-8 h-8 text-indigo-400"})]})}),e.jsx("div",{className:"bg-emerald-900/30 backdrop-blur-sm border border-emerald-700/30 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-emerald-200 text-sm font-medium",children:"Published"}),e.jsx("p",{className:"text-3xl font-black text-white",children:d.events?.published||0})]}),e.jsx(J,{className:"w-8 h-8 text-emerald-400"})]})}),e.jsx("div",{className:"bg-yellow-900/30 backdrop-blur-sm border border-yellow-700/30 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-200 text-sm font-medium",children:"Upcoming"}),e.jsx("p",{className:"text-3xl font-black text-white",children:d.events?.upcoming||0})]}),e.jsx(at,{className:"w-8 h-8 text-yellow-400"})]})}),e.jsx("div",{className:"bg-violet-900/30 backdrop-blur-sm border border-violet-700/30 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-violet-200 text-sm font-medium",children:"Community Members"}),e.jsx("p",{className:"text-3xl font-black text-white",children:d.community?.totalContacts||0})]}),e.jsx(P,{className:"w-8 h-8 text-violet-400"})]})})]}),e.jsxs("div",{className:"bg-indigo-900/30 backdrop-blur-sm border border-indigo-700/30 p-6 mb-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"relative lg:col-span-2",children:[e.jsx(Ie,{className:"absolute left-3 top-3 w-5 h-5 text-indigo-400"}),e.jsx("input",{type:"text",placeholder:"Search events...",value:m,onChange:i=>w(i.target.value),className:"w-full pl-10 pr-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("select",{value:_,onChange:i=>D(i.target.value),className:"px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"reviewing",children:"Reviewing"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"archived",children:"Archived"})]}),e.jsxs("select",{value:F,onChange:i=>$(i.target.value),className:"px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:"All Categories"}),ve.map(i=>e.jsx("option",{value:i,children:i},i))]}),e.jsxs("select",{value:`${l}-${k}`,onChange:i=>{const[x,C]=i.target.value.split("-");j(x),I(C)},className:"px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"event_date-asc",children:"Date (Earliest)"}),e.jsx("option",{value:"event_date-desc",children:"Date (Latest)"}),e.jsx("option",{value:"created_at-desc",children:"Recently Added"}),e.jsx("option",{value:"name-asc",children:"Name (A-Z)"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:n,className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-500 transition-colors flex items-center",children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),"Refresh"]})})]}),E.length>0&&e.jsx("div",{className:"mt-4 p-4 bg-yellow-900/20 border border-yellow-600/30 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-yellow-300 font-medium",children:[E.length," event(s) selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>le("published"),className:"px-3 py-1 bg-emerald-600 text-white rounded text-sm hover:bg-emerald-500",children:"Publish All"}),e.jsx("button",{onClick:()=>le("archived"),className:"px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-500",children:"Archive All"}),e.jsx("button",{onClick:()=>O([]),className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-500",children:"Clear"})]})]})})]}),e.jsxs("div",{className:"bg-indigo-900/30 backdrop-blur-sm border border-indigo-700/30 rounded-lg overflow-hidden",children:[r&&e.jsx("div",{className:"p-4 bg-red-900/30 border-b border-red-700/30",children:e.jsxs("div",{className:"flex items-center text-red-300",children:[e.jsx(ne,{className:"w-5 h-5 mr-2"}),e.jsx("span",{children:r})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-indigo-800/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-4 text-left",children:e.jsx("input",{type:"checkbox",checked:E.length===q.length&&q.length>0,onChange:i=>{i.target.checked?O(q.map(x=>x.id)):O([])},className:"rounded"})}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Event"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Organizer"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-indigo-700/30",children:q.map(i=>e.jsxs("tr",{className:"hover:bg-indigo-800/20 transition-colors",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("input",{type:"checkbox",checked:E.includes(i.id),onChange:x=>{x.target.checked?O(C=>[...C,i.id]):O(C=>C.filter(R=>R!==i.id))},className:"rounded"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:i.image_url?e.jsx("img",{src:i.image_url,alt:i.name,className:"h-10 w-10 rounded-lg object-cover"}):e.jsx("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-emerald-500 to-indigo-600 flex items-center justify-center",children:e.jsx(B,{className:"w-5 h-5 text-white"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-white",children:i.name}),e.jsx("div",{className:"text-sm text-indigo-200 line-clamp-1",children:i.description}),i.tags&&i.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[i.tags.slice(0,3).map((x,C)=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-indigo-800/50 text-indigo-300",children:x},C)),i.tags.length>3&&e.jsxs("span",{className:"text-xs text-indigo-400",children:["+",i.tags.length-3," more"]})]})]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-white",children:new Date(i.event_date).toLocaleDateString()}),e.jsx("div",{className:"text-sm text-indigo-200",children:new Date(i.event_date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center text-sm text-indigo-200",children:[e.jsx(rt,{className:"w-4 h-4 mr-1"}),typeof i.location=="object"&&i.location.address?i.location.address:typeof i.location=="string"?i.location:"Location TBD"]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-white",children:i.organizer_name||"BLKOUT Team"}),e.jsx("div",{className:"text-xs text-indigo-300",children:i.source})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${De(i.status)}`,children:i.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Oe(i),className:"text-indigo-400 hover:text-indigo-300 transition-colors",title:"Edit event",children:e.jsx(Ae,{className:"w-4 h-4"})}),i.source_url&&e.jsx("a",{href:i.source_url,target:"_blank",rel:"noopener noreferrer",className:"text-emerald-400 hover:text-emerald-300 transition-colors",title:"View source",children:e.jsx(oe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Ue(i.id),className:"text-red-400 hover:text-red-300 transition-colors",title:"Delete event",children:e.jsx(it,{className:"w-4 h-4"})})]})})]},i.id))})]})}),q.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(B,{className:"w-12 h-12 text-indigo-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No events found"}),e.jsx("p",{className:"text-indigo-200",children:m||_!=="all"||F!=="all"?"Try adjusting your filters or search terms.":"Create your first community event to get started."})]})]})]}),e.jsx(Me,{children:A&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-indigo-900 border border-indigo-700 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-black text-white heading-block uppercase",children:S?"Edit Community Event":"Create Community Event"}),e.jsx("button",{onClick:()=>{c(!1),f(null),y(Y)},className:"text-indigo-400 hover:text-white transition-colors",children:e.jsx(Te,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold text-yellow-300 border-b border-yellow-600/30 pb-2",children:"Event Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Event Name"}),e.jsx("input",{type:"text",required:!0,value:h.name,onChange:i=>y(x=>({...x,name:i.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Community Healing Circle"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Event Date"}),e.jsx("input",{type:"date",required:!0,value:h.event_date,onChange:i=>y(x=>({...x,event_date:i.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Description"}),e.jsx("textarea",{required:!0,value:h.description,onChange:i=>y(x=>({...x,description:i.target.value})),rows:4,className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Describe your community event..."})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold text-yellow-300 border-b border-yellow-600/30 pb-2",children:"Location & Contact"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Organizer Name"}),e.jsx("input",{type:"text",required:!0,value:h.organizer_name,onChange:i=>y(x=>({...x,organizer_name:i.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"BLKOUT Community"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Contact Email"}),e.jsx("input",{type:"email",value:h.contact_email,onChange:i=>y(x=>({...x,contact_email:i.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"community@blkoutuk.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Location"}),e.jsx("input",{type:"text",required:!0,value:typeof h.location=="object"?h.location.address:h.location,onChange:i=>y(x=>({...x,location:{type:"physical",address:i.target.value}})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Community Center, London"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold text-yellow-300 border-b border-yellow-600/30 pb-2",children:"Categories & Audience"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Event Tags"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:ve.map(i=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:h.tags.includes(i),onChange:x=>{x.target.checked?y(C=>({...C,tags:[...C.tags,i]})):y(C=>({...C,tags:C.tags.filter(R=>R!==i)}))},className:"mr-2 rounded"}),e.jsx("span",{className:"text-indigo-200 text-sm capitalize",children:i.replace("-"," ")})]},i))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Target Audience"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:yt.map(i=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:h.target_audience.includes(i),onChange:x=>{x.target.checked?y(C=>({...C,target_audience:[...C.target_audience,i]})):y(C=>({...C,target_audience:C.target_audience.filter(R=>R!==i)}))},className:"mr-2 rounded"}),e.jsx("span",{className:"text-indigo-200 text-sm",children:i})]},i))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold text-yellow-300 border-b border-yellow-600/30 pb-2",children:"Additional Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Price/Cost"}),e.jsx("input",{type:"text",value:h.price,onChange:i=>y(x=>({...x,price:i.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Free / Â£10 / Pay what you can"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Status"}),e.jsxs("select",{value:h.status,onChange:i=>y(x=>({...x,status:i.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"reviewing",children:"Under Review"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Source"}),e.jsxs("select",{value:h.source,onChange:i=>y(x=>({...x,source:i.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"manual",children:"Manual Entry"}),e.jsx("option",{value:"community",children:"Community Submission"}),e.jsx("option",{value:"eventbrite",children:"Eventbrite"}),e.jsx("option",{value:"facebook",children:"Facebook"}),e.jsx("option",{value:"outsavvy",children:"Outsavvy"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Registration Link"}),e.jsx("input",{type:"url",value:h.registration_link,onChange:i=>y(x=>({...x,registration_link:i.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"https://eventbrite.com/..."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-indigo-700",children:[e.jsx("button",{type:"button",onClick:()=>{c(!1),f(null),y(Y)},className:"px-6 py-2 border border-indigo-600 text-indigo-200 rounded hover:bg-indigo-800/50 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:b,className:"px-6 py-2 bg-gradient-to-r from-emerald-600 to-indigo-600 text-white font-bold rounded hover:from-emerald-500 hover:to-indigo-500 transition-all flex items-center",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),S?"Update Event":"Create Event"]})]})]})]})})})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Authentication Required"}),e.jsx("p",{className:"text-indigo-200",children:"Please sign in to access the events admin dashboard."})]})})}const vt=Le("https://bgjengudzfickgomjqmz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJnamVuZ3VkemZpY2tnb21qcW16Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU2MTI3NjcsImV4cCI6MjA3MTE4ODc2N30.kYQ2oFuQBGmu4V_dnj_1zDMDVsd-qpDZJwNvswzO6M0");function Nt(){const[p,t]=g.useState(!0),[a,r]=g.useState(!1),[n,o]=g.useState([]),[s,u]=g.useState(null),[d,N]=g.useState(!0),[b,A]=g.useState(0),[c,S]=g.useState(0),[f,h]=g.useState(""),[y,m]=g.useState(!1),w=12,_=async(l=0,j=!1,k="")=>{j?r(!0):(t(!0),u(null));try{console.log(`ðŸ—ƒï¸ Fetching page ${l+1} (${w} items)...${k?` Search: "${k}"`:""}`),console.log("ðŸ—ƒï¸ Using Supabase URL:","https://bgjengudzfickgomjqmz.supabase.co");let I=vt.from("newsroom_articles").select("*",{count:"exact"}).like("source_url","https://blkoutuk.com%").eq("status","published");k.trim()&&(I=I.or(`title.ilike.%${k}%,content.ilike.%${k}%,excerpt.ilike.%${k}%`));const{data:E,error:O,count:z}=await I.order("created_at",{ascending:!1}).range(l*w,(l+1)*w-1);if(console.log("ðŸ—ƒï¸ Query result:",{data:E?.length,count:z,page:l+1,error:O,dataExists:!!E,dataArray:Array.isArray(E),firstTitle:E?.[0]?.title}),O)throw O;if(!j&&z!==null&&S(z),E&&E.length>0){const K=E.map(L=>({id:L.id,title:L.title,slug:L.slug,excerpt:L.excerpt||L.content?.substring(0,200)||"",author:{name:"BLKOUTUK",avatar:"BU"},published_at:L.published_at||L.created_at,category:"Community",tags:[],status:L.status,source_url:L.source_url,featured_image:L.featured_image}));console.log("ðŸ—ƒï¸ Transformed articles:",K.length),console.log("ðŸ—ƒï¸ BLKOUTUK articles:",K.filter(L=>L.source_url?.includes("blkoutuk.com")).length),o(j?L=>[...L,...K]:K);const q=(l+1)*w;N(q<(z||0)),A(l)}else j||(console.log("ðŸ—ƒï¸ No articles found - this is unexpected!",{data:E,count:z,queryError:O}),o([]),N(!1))}catch(I){console.error("ðŸ—ƒï¸ Error fetching archive:",I);const E=I instanceof Error?I.message:"Failed to load archive";u(E),j||(o([]),N(!1))}finally{j?r(!1):t(!1)}},D=async()=>{!a&&d&&await _(b+1,!0,f)},F=async l=>{h(l),m(!!l.trim()),await _(0,!1,l)},$=async()=>{h(""),m(!1),await _(0,!1,"")};return g.useEffect(()=>{_(0,!1)},[]),p?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-gray-950 to-blue-950 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400 mx-auto mb-4"}),e.jsx("p",{className:"text-white text-lg",children:"Loading archive..."})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-gray-950 to-blue-950",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-12",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx(Z,{className:"w-8 h-8 text-blue-400"}),e.jsx("h1",{className:"text-4xl font-bold text-white",children:"Story Archive"})]}),e.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto mb-8",children:"Our complete collection of community stories, including the preserved legacy of BLKOUTUK.com"}),e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ie,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",className:"block w-full pl-10 pr-12 py-4 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search 278 articles by title, content, or keywords...",value:f,onChange:l=>F(l.target.value)}),f&&e.jsx("button",{onClick:$,className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-white transition-colors",children:e.jsx(ie,{className:"h-5 w-5"})})]}),y&&e.jsxs("div",{className:"mt-2 text-sm text-blue-300",children:['ðŸ” Searching for "',f,'"...']})]})]}),s?e.jsxs("div",{className:"bg-red-500/20 border border-red-500/50 rounded-lg p-4 mb-8",children:[e.jsx("h3",{className:"text-red-400 font-bold mb-2",children:"âš ï¸ Database Connection Issue"}),e.jsx("p",{className:"text-red-300 text-sm mb-4",children:s}),e.jsx("button",{onClick:()=>_(0,!1),disabled:p,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded transition-colors disabled:opacity-50",children:p?"Retrying...":"Try Again"})]}):e.jsxs("div",{className:"bg-blue-500/20 border border-blue-500/50 rounded-lg p-4 mb-8",children:[e.jsx("h3",{className:"text-blue-400 font-bold mb-2",children:"ðŸ“Š Archive Status"}),e.jsxs("div",{className:"text-blue-300 text-sm space-y-1",children:[e.jsx("p",{children:y?e.jsxs(e.Fragment,{children:["Found ",n.length," of ",c,' articles matching "',f,'" â€¢ Searching BLKOUTUK legacy archive']}):e.jsxs(e.Fragment,{children:["Showing ",n.length," of ",c," BLKOUTUK legacy articles â€¢",c," migrated from BLKOUTUK.com â€¢ Complete historical archive of community stories"]})}),d&&!y&&e.jsxs("p",{children:["Loading in chunks of ",w," for better performance"]}),y&&c===0&&e.jsxs("p",{children:["Try different keywords or ",e.jsx("button",{onClick:$,className:"text-blue-400 hover:text-blue-300 underline",children:"clear search"})," to browse all articles"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map((l,j)=>e.jsx(U,{to:`/newsroom/article/${l.slug||l.id}`,className:"bg-white/5 backdrop-blur-sm rounded-lg overflow-hidden hover:bg-white/10 transition-all duration-300 cursor-pointer group block",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.source_url?.includes("blkoutuk.com")&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[e.jsx("span",{children:"ðŸ›ï¸"}),"BLKOUTUK Legacy"]}),e.jsx("span",{className:"text-xs text-gray-400",children:new Date(l.published_at).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})]}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-3 group-hover:text-blue-300 transition-colors",children:l.title}),e.jsx("p",{className:"text-gray-300 text-sm mb-4",children:l.excerpt}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[e.jsx("span",{children:l.author.name}),e.jsx("span",{children:l.category})]}),l.tags&&l.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-3",children:l.tags.slice(0,3).map((k,I)=>e.jsxs("span",{className:"px-2 py-1 bg-white/10 text-gray-300 rounded text-xs",children:["#",k]},I))})]})},l.id))}),d&&e.jsx("div",{className:"text-center mt-12",children:e.jsx("button",{onClick:D,disabled:a,className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Loading More..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"w-4 h-4"}),"Load More Articles (",c-n.length," remaining)"]})})}),e.jsx("div",{className:"text-center mt-12 pt-8 border-t border-white/10",children:e.jsxs("p",{className:"text-gray-400",children:["Archive loaded in ",w,"-article chunks for optimal performance â€¢",n.length," of ",c," articles shown"]})})]})})}const wt=Le("https://bgjengudzfickgomjqmz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJnamVuZ3VkemZpY2tnb21qcW16Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU2MTI3NjcsImV4cCI6MjA3MTE4ODc2N30.kYQ2oFuQBGmu4V_dnj_1zDMDVsd-qpDZJwNvswzO6M0");function Ct(){const{slug:p}=Fe(),[t,a]=g.useState(null),[r,n]=g.useState(!0),[o,s]=g.useState(null);g.useEffect(()=>{p&&u(p)},[p]);const u=async N=>{try{n(!0),s(null),console.log("ðŸ“– Loading article:",N);const{data:b,error:A}=await wt.from("newsroom_articles").select("*").eq("slug",N).single();if(A)throw A;if(!b)throw new Error("Article not found");console.log("âœ… Article loaded:",b.title),a(b)}catch(b){console.error("âŒ Error loading article:",b),s(b instanceof Error?b.message:"Failed to load article")}finally{n(!1)}};if(r)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-gray-950 to-blue-950 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400 mx-auto mb-4"}),e.jsx("p",{className:"text-white text-lg",children:"Loading article..."})]})});if(o||!t)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-gray-950 to-blue-950",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12",children:[e.jsxs(U,{to:"/newsroom/archive",className:"inline-flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-colors mb-8",children:[e.jsx(be,{className:"w-4 h-4"}),"Back to Archive"]}),e.jsxs("div",{className:"bg-red-500/20 border border-red-500/50 rounded-lg p-8 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-400 mb-4",children:"Article Not Found"}),e.jsx("p",{className:"text-red-300 mb-6",children:o||"The requested article could not be found."}),e.jsx(U,{to:"/newsroom/archive",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors",children:"Browse Archive"})]})]})});const d=t.source_url?.includes("blkoutuk.com");return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-gray-950 to-blue-950",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12",children:[e.jsxs(U,{to:"/newsroom/archive",className:"inline-flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-colors mb-8",children:[e.jsx(be,{className:"w-4 h-4"}),"Back to Archive"]}),e.jsx("article",{className:"bg-white/5 backdrop-blur-sm rounded-lg overflow-hidden",children:e.jsxs("div",{className:"p-8",children:[d&&e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800",children:[e.jsx("span",{children:"ðŸ›ï¸"}),"BLKOUTUK Legacy Article"]}),t.source_url&&e.jsxs("a",{href:t.source_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm text-blue-400 hover:text-blue-300 transition-colors",children:[e.jsx(oe,{className:"w-3 h-3"}),"View Original"]})]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-6 leading-tight",children:t.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-sm text-gray-300 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(t.published_at||t.created_at).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:"BLKOUTUK"})]}),t.moderation_reason&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(nt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs bg-blue-500/20 px-2 py-1 rounded",children:t.moderation_reason})]})]}),t.excerpt&&e.jsx("div",{className:"bg-white/10 rounded-lg p-6 mb-8",children:e.jsx("p",{className:"text-lg text-blue-100 leading-relaxed",children:t.excerpt})}),e.jsx("div",{className:`prose prose-lg prose-invert max-w-none
                prose-headings:text-white prose-headings:font-bold
                prose-p:text-gray-200 prose-p:leading-relaxed
                prose-a:text-blue-400 prose-a:no-underline hover:prose-a:text-blue-300
                prose-strong:text-white prose-em:text-blue-200
                prose-blockquote:border-l-blue-500 prose-blockquote:bg-white/5 prose-blockquote:pl-6
                prose-ul:text-gray-200 prose-ol:text-gray-200
                prose-li:text-gray-200 prose-li:leading-relaxed`,dangerouslySetInnerHTML:{__html:t.content}})]})}),e.jsx("div",{className:"text-center mt-12",children:e.jsx(U,{to:"/newsroom/archive",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-300",children:"Browse More Articles"})})]})})}const St=()=>e.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 z-50 bg-blue-600 text-white px-4 py-2",children:"Skip to main content"});function kt(){const{pathname:p}=Ne();return we.useEffect(()=>{window.scrollTo(0,0)},[p]),null}function _t(){return e.jsxs(Pe,{children:[e.jsx(St,{}),e.jsx(kt,{}),e.jsx(mt,{}),e.jsx("div",{id:"main-content",className:"min-h-screen bg-gradient-to-br from-purple-950 via-indigo-950 to-emerald-950",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-8 py-20 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center mb-8",children:[e.jsx("img",{src:"/images/squared/BLKOUTiconWHITE.png",alt:"BLKOUT",className:"w-20 h-20 object-contain mr-6",onError:p=>{const t=p.target;t.style.display="none"}}),e.jsxs("h1",{className:"text-6xl font-black text-white leading-tight",children:[e.jsx("span",{className:"bg-gradient-to-r from-purple-400 to-emerald-400 bg-clip-text text-transparent uppercase tracking-wide",children:"BLKOUT"}),e.jsx("br",{}),e.jsx("span",{className:"text-4xl text-white/90 uppercase tracking-wider",children:"Community Platform"})]})]}),e.jsx("p",{className:"text-xl text-indigo-200 mb-12 max-w-3xl mx-auto leading-relaxed",children:"A community-owned platform for Black queer liberation. Access to knowledge, resources, and connections for Black queer lives."}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-6 mb-16",children:[e.jsx(U,{to:"/newsroom",className:"px-8 py-4 bg-gradient-to-r from-slate-600 to-blue-600 text-white font-bold rounded-full hover:from-slate-700 hover:to-blue-700 transition-all duration-300 shadow-lg hover:shadow-xl",children:"ðŸ“° Newsroom"}),e.jsx("a",{href:"https://events-blkout.vercel.app/",target:"_blank",rel:"noopener noreferrer",className:"px-8 py-4 bg-gradient-to-r from-amber-600 to-orange-600 text-white font-bold rounded-full hover:from-amber-700 hover:to-orange-700 transition-all duration-300 shadow-lg hover:shadow-xl",children:"ðŸ“… Events"}),e.jsx(U,{to:"/governance",className:"px-8 py-4 bg-gradient-to-r from-purple-600 to-violet-600 text-white font-bold rounded-full hover:from-purple-700 hover:to-violet-700 transition-all duration-300 shadow-lg hover:shadow-xl",children:"ðŸ›ï¸ Governance"}),e.jsx("a",{href:"https://ivor-blkout.vercel.app/",target:"_blank",rel:"noopener noreferrer",className:"px-8 py-4 bg-gradient-to-r from-teal-600 to-cyan-600 text-white font-bold rounded-full hover:from-teal-700 hover:to-cyan-700 transition-all duration-300 shadow-lg hover:shadow-xl",children:"ðŸ¤– Chat with IVOR"}),e.jsx("a",{href:"https://journey-blkout.vercel.app/",target:"_blank",rel:"noopener noreferrer",className:"px-8 py-4 bg-gradient-to-r from-pink-600 to-rose-600 text-white font-bold rounded-full hover:from-pink-700 hover:to-rose-700 transition-all duration-300 shadow-lg hover:shadow-xl",children:"ðŸ“– Liberation Journey"})]}),e.jsxs(qe,{children:[e.jsx(M,{path:"/",element:e.jsxs("div",{className:"text-white mt-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Our Values"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center p-6 bg-white/5 rounded-lg",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ³ï¸â€âš§ï¸"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Trans Liberation"}),e.jsx("p",{className:"text-gray-300",children:"Centering trans joy and safety in all we do"})]}),e.jsxs("div",{className:"text-center p-6 bg-white/5 rounded-lg",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ¤"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Cooperative Ownership"}),e.jsx("p",{className:"text-gray-300",children:"Community-owned, democratically governed"})]}),e.jsxs("div",{className:"text-center p-6 bg-white/5 rounded-lg",children:[e.jsx("div",{className:"text-4xl mb-4",children:"âœŠðŸ¿"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Black Power"}),e.jsx("p",{className:"text-gray-300",children:"Liberation through collective action"})]})]})]})}),e.jsx(M,{path:"/newsroom",element:e.jsx(pt,{})}),e.jsx(M,{path:"/newsroom/archive",element:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-gray-950 to-blue-950",children:e.jsx(Nt,{})})}),e.jsx(M,{path:"/newsroom/article/:slug",element:e.jsx(Ct,{})}),e.jsx(M,{path:"/events",element:e.jsx("div",{className:"text-white min-h-screen bg-gradient-to-br from-amber-950 via-orange-950 to-red-950 p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-4xl font-bold mb-8",children:"ðŸ“… Community Events"}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[e.jsxs("p",{className:"text-gray-300 mb-4",children:["This page redirects to our live events calendar.",e.jsx("a",{href:"https://events-blkout.vercel.app/",target:"_blank",rel:"noopener noreferrer",className:"text-yellow-400 hover:text-yellow-300 underline ml-1",children:"Visit Events Calendar â†’"})]}),e.jsx(U,{to:"/",className:"inline-block mt-6 px-6 py-2 bg-orange-600 hover:bg-orange-700 rounded-lg transition-colors",children:"â† Back to Main Platform"})]})]})})}),e.jsx(M,{path:"/governance",element:e.jsx(bt,{})}),e.jsx(M,{path:"/admin/moderation",element:e.jsx(ye,{})}),e.jsx(M,{path:"/admin/events",element:e.jsx(jt,{})}),e.jsx(M,{path:"/admin/newsroom",element:e.jsx(ye,{})}),e.jsx(M,{path:"/admin",element:e.jsx(je,{})}),e.jsx(M,{path:"/admin/dashboard",element:e.jsx(je,{})})]})]})})]})}ct.createRoot(document.getElementById("root")).render(e.jsx(we.StrictMode,{children:e.jsx(_t,{})}));
