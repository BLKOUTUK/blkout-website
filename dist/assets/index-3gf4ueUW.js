import{j as e,m as x,A as qe}from"./animations-BBhkCnKM.js";import{c as Qe,b as Ge,L as ke,a as m,R as xe,B as Je,d as Ke,e as I,u as We}from"./vendor-DFUjLr5F.js";import{P as W,a as ue,u as Ve,b as ie,c as Ye,E as de,L as te,s as ye,d as $,G as Xe,C as Ze}from"./governance-BTfYMaLu.js";import{U as P,J as he,K as et,l as Se,N as J,Z as Ce,D as Ee,E as tt,F as z,O as Te,q as O,Q as Ae,W as _e,j as q,_ as Re,$ as De,a0 as st,a1 as at,c as it,i as se,o as ne,a2 as rt,a3 as nt,h as Q,P as Le,a as H,a4 as ae,S as ge,v as lt,a5 as ot,u as Oe,C as re,a6 as ee,k as pe,a7 as Pe,a8 as ct,a9 as Ie,aa as dt,ab as mt,ac as xt,ad as ut,I as ht,b as gt,ae as je,T as pt,af as bt,ag as Ue,R as K,d as Fe,r as be,ah as fe}from"./ui-04yHDqgS.js";import"./supabase-BdHe3KC0.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const c of d.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function s(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(o){if(o.ep)return;o.ep=!0;const d=s(o);fetch(o.href,d)}})();var Y={},we;function ft(){if(we)return Y;we=1;var a=Qe();return Y.createRoot=a.createRoot,Y.hydrateRoot=a.hydrateRoot,Y}var yt=ft();const jt=Ge(yt),wt=[{id:"1",title:"COMMUNITY CONTROL",description:"Democratic governance of content and platform decisions with community-owned data and full export capabilities.",icon:P,gradient:"from-emerald-500 to-indigo-600"},{id:"2",title:"ECONOMIC JUSTICE",description:"Cooperative ownership model with revenue sharing and fair distribution of platform value to community.",icon:Se,gradient:"from-indigo-500 to-violet-600"},{id:"3",title:"LIBERATION FOCUS",description:"All content and technology serves Black queer liberation and community building through cooperative ownership.",icon:J,gradient:"from-violet-500 to-emerald-600"},{id:"4",title:"ACCESSIBILITY",description:"Low barriers to participation with multiple formats and pathways for community contribution and engagement.",icon:Ce,gradient:"from-slate-500 to-blue-600"}],vt=[{id:"events-integration-plan",title:"BLKOUT Events Calendar Integration Plan",description:"Complete technical architecture for community events discovery, AI-powered relevance scoring, and community moderation systems.",type:"guide",category:"Technical Architecture",isNew:!0},{id:"modular-system-architecture",title:"Modular System Architecture & PRD",description:"Comprehensive roadmap for community-owned liberation platform with 6-component ecosystem including Newsroom, Channel BLKOUT, and Storylab.",type:"report",category:"System Design",isNew:!0},{id:"sparc-development",title:"SPARC Development Framework",description:"Systematic development methodology using Specification, Pseudocode, Architecture, Refinement, and Completion phases.",type:"toolkit",category:"Development Process"},{id:"community-governance",title:"Democratic Decision-Making Processes",description:"Framework for community-led editorial policies, transparent appeals processes, and democratic platform evolution.",type:"guide",category:"Governance"}],Nt=()=>e.jsxs("section",{className:"relative min-h-[80vh] flex items-center justify-center bg-gradient-to-br from-green-950 via-green-900 to-emerald-900 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-emerald-500 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-violet-500 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-8 py-32",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-20 items-start lg:items-center",children:[e.jsxs(x.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.8},className:"order-2 lg:order-1",children:[e.jsx(x.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-indigo-300 text-xl font-mono uppercase tracking-widest mb-6",children:"MOVEMENT BUILDING"}),e.jsxs(x.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"text-5xl md:text-7xl lg:text-8xl font-black heading-block leading-none mb-8",children:[e.jsx("span",{className:"bg-gradient-to-r from-emerald-400 via-indigo-400 to-violet-400 bg-clip-text text-transparent",children:"LIBERATION"}),e.jsx("br",{}),e.jsx("span",{className:"bg-gradient-to-r from-slate-400 via-blue-400 to-emerald-400 bg-clip-text text-transparent",children:"PLATFORM"})]}),e.jsx(x.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"text-xl md:text-2xl text-indigo-100 leading-relaxed font-light mb-12 max-w-2xl",children:"Building community-controlled technology for Black queer liberation through cooperative ownership. A modular platform where community owns data, controls decisions, and shares in the value we create together."}),e.jsxs(x.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.8},className:"flex flex-col sm:flex-row gap-6",children:[e.jsxs("a",{href:"https://blkouthub.com",target:"_blank",rel:"noopener noreferrer",className:"px-12 py-4 bg-gradient-to-r from-emerald-600 to-indigo-600 text-white font-black text-lg hover:from-emerald-500 hover:to-indigo-500 transition-all duration-300 shadow-xl hover:shadow-2xl heading-block uppercase tracking-wide flex items-center justify-center",children:[e.jsx(P,{className:"w-6 h-6 mr-3"}),"JOIN THE HUB"]}),e.jsxs(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"px-12 py-4 border-2 border-indigo-400 text-indigo-100 font-black text-lg hover:bg-indigo-400 hover:text-indigo-900 transition-all duration-300 heading-block uppercase tracking-wide flex items-center justify-center",children:[e.jsx(he,{className:"w-6 h-6 mr-3"}),"BROWSE RESOURCES"]})]})]}),e.jsx(x.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.8,delay:.2},className:"order-1 lg:order-2",children:e.jsx("div",{className:"aspect-[4/3] overflow-hidden relative rounded-2xl shadow-2xl",children:e.jsx("img",{src:"/images/blkoutuk.com v3/John Henry.png",alt:"Breaking through systemic barriers together",className:"w-full h-full object-contain bg-green-100"})})})]}),e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:1},className:"absolute bottom-12 left-1/2 transform -translate-x-1/2",children:e.jsxs(x.div,{animate:{y:[0,10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"flex flex-col items-center text-indigo-300",children:[e.jsx("span",{className:"text-sm font-mono uppercase tracking-wider mb-2",children:"EXPLORE"}),e.jsx(et,{className:"w-6 h-6"})]})})]})]}),kt=()=>e.jsx("section",{className:"py-24 bg-green-50/5 backdrop-blur-sm",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs(x.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-4xl md:text-5xl font-black heading-block mb-6 uppercase",children:[e.jsx("span",{className:"bg-gradient-to-r from-emerald-400 to-green-400 bg-clip-text text-transparent",children:"OUR"}),e.jsx("span",{className:"bg-gradient-to-r from-violet-400 to-slate-400 bg-clip-text text-transparent ml-4",children:"FOUNDATION"})]}),e.jsx("p",{className:"text-xl text-indigo-100 font-light leading-relaxed max-w-3xl mx-auto",children:"The principles that guide our work toward economic democracy and collective liberation"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:wt.map((a,t)=>{const s=a.icon;return e.jsxs(x.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:t*.2},whileHover:{scale:1.02,y:-5},className:"bg-green-900/30 backdrop-blur-sm border border-green-700/30 p-8 hover:bg-green-900/50 transition-all duration-500 text-center group",children:[e.jsx("div",{className:`w-16 h-16 bg-gradient-to-br ${a.gradient} flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300`,children:e.jsx(s,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-xl font-black heading-block mb-4 uppercase",children:e.jsx("span",{className:`bg-gradient-to-r ${a.gradient} bg-clip-text text-transparent`,children:a.title})}),e.jsx("p",{className:"text-indigo-100 leading-relaxed font-light",children:a.description})]},a.id)})})]})}),St=()=>{const a=s=>{switch(s){case"guide":return he;case"toolkit":return Te;case"report":return z;default:return z}},t=s=>{switch(s){case"guide":return"from-emerald-500 to-blue-600";case"toolkit":return"from-violet-500 to-emerald-600";case"report":return"from-slate-500 to-indigo-600";default:return"from-indigo-500 to-violet-600"}};return e.jsx("section",{className:"py-24",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs(x.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-4xl md:text-5xl font-black heading-block mb-6 uppercase",children:[e.jsx("span",{className:"bg-gradient-to-r from-slate-400 to-indigo-400 bg-clip-text text-transparent",children:"GOVERNANCE"}),e.jsx("span",{className:"bg-gradient-to-r from-violet-400 to-emerald-400 bg-clip-text text-transparent ml-4",children:"RESOURCES"})]}),e.jsx("p",{className:"text-xl text-indigo-100 font-light leading-relaxed max-w-3xl mx-auto mb-8",children:"Real documents and frameworks from BLKOUT's development process. These resources reflect our commitment to transparent, community-controlled technology platforms."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-16",children:vt.map((s,i)=>{const o=a(s.type),d=t(s.type);return e.jsx(x.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:i*.1},className:"bg-indigo-900/20 backdrop-blur-sm border border-indigo-700/20 p-8 hover:bg-indigo-900/30 transition-all duration-300",children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:`w-14 h-14 bg-gradient-to-br ${d} flex items-center justify-center flex-shrink-0`,children:e.jsx(o,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"text-xl font-black heading-block uppercase text-indigo-100 leading-tight",children:s.title}),s.isNew&&e.jsx("span",{className:"bg-gradient-to-r from-emerald-500 to-violet-500 text-white text-xs font-black px-2 py-1 uppercase tracking-wide ml-2",children:"NEW"})]}),e.jsxs("p",{className:"text-indigo-200 text-sm font-mono mb-4 opacity-80",children:[s.category," • ",s.type.toUpperCase()]}),e.jsx("p",{className:"text-indigo-100 leading-relaxed font-light mb-6",children:s.description}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-emerald-600 to-indigo-600 text-white font-black text-sm hover:from-emerald-500 hover:to-indigo-500 transition-all heading-block uppercase flex items-center",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"ACCESS"]}),e.jsxs("button",{className:"px-4 py-2 border border-indigo-400 text-indigo-100 font-black text-sm hover:bg-indigo-400 hover:text-indigo-900 transition-all heading-block uppercase flex items-center",children:[e.jsx(tt,{className:"w-4 h-4 mr-2"}),"PREVIEW"]})]})]})]})},s.id)})}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-600/20 to-violet-600/20 border border-emerald-500/30 p-12 text-center",children:[e.jsx("h3",{className:"text-3xl font-black heading-block mb-6 uppercase",children:e.jsx("span",{className:"bg-gradient-to-r from-emerald-400 to-violet-400 bg-clip-text text-transparent",children:"TRANSPARENT DEVELOPMENT"})}),e.jsx("p",{className:"text-xl text-indigo-100 mb-8 max-w-2xl mx-auto leading-relaxed font-light",children:"All BLKOUT governance documents and development processes are open to community review. We believe in radical transparency as the foundation of community control."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(ke,{to:"/governance",className:"px-8 py-4 bg-gradient-to-r from-emerald-600 to-indigo-600 text-white font-black hover:from-emerald-500 hover:to-indigo-500 transition-all heading-block uppercase flex items-center justify-center",children:[e.jsx(P,{className:"w-5 h-5 mr-3"}),"JOIN GOVERNANCE"]}),e.jsxs(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"px-8 py-4 border-2 border-indigo-400 text-indigo-100 font-black hover:bg-indigo-400 hover:text-indigo-900 transition-all heading-block uppercase flex items-center justify-center",children:[e.jsx(z,{className:"w-5 h-5 mr-3"}),"VIEW ALL DOCS"]})]})]})]})})},Ct=()=>e.jsx("section",{className:"py-24",children:e.jsx("div",{className:"max-w-5xl mx-auto px-8",children:e.jsxs(x.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"bg-gradient-to-br from-emerald-600 via-indigo-600 to-violet-600 p-16 text-center relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-white rounded-full blur-2xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-24 h-24 bg-white rounded-full blur-2xl"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(x.div,{animate:{scale:[1,1.1,1]},transition:{duration:3,repeat:1/0},className:"text-6xl mb-8",children:"🚀"}),e.jsxs("h2",{className:"text-4xl md:text-5xl font-black text-white heading-block mb-6 uppercase",children:["TAKE ACTION IN",e.jsx("br",{}),e.jsx("span",{className:"bg-gradient-to-r from-yellow-300 to-orange-300 bg-clip-text text-transparent",children:"BLKOUTHUB"})]}),e.jsx("p",{className:"text-xl md:text-2xl text-white/90 mb-12 max-w-3xl mx-auto font-light leading-relaxed",children:"These resources come alive in practice. Join ongoing projects, start new initiatives, and connect with others building the cooperative economy in their communities."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 justify-center",children:[e.jsxs(ke,{to:"/governance",className:"px-12 py-4 bg-white text-indigo-900 font-black text-lg hover:bg-gray-100 transition-colors heading-block uppercase flex items-center justify-center",children:[e.jsx(P,{className:"w-6 h-6 mr-3"}),"JOIN ACTIVE PROJECTS"]}),e.jsxs(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"px-12 py-4 border-2 border-white text-white font-black text-lg hover:bg-white hover:text-indigo-900 transition-colors heading-block uppercase flex items-center justify-center",children:[e.jsx(Te,{className:"w-6 h-6 mr-3"}),"SHARE YOUR PROJECT"]})]})]})]})})});function Et(){return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-950 via-green-900 to-emerald-900",children:[e.jsx(W,{}),e.jsx(Nt,{}),e.jsx(kt,{}),e.jsx(St,{}),e.jsx(Ct,{}),e.jsx(ue,{})]})}const Tt="BLKOUT2025!Admin",At="BLKOUT2025!Mod",le=new Date("2025-11-17");function G({children:a}){const[t,s]=m.useState(!1),[i,o]=m.useState(null),[d,c]=m.useState(""),[b,C]=m.useState(!1),[S,u]=m.useState(""),[h,p]=m.useState(!0);m.useEffect(()=>{try{const A=localStorage.getItem("blkout_admin_auth");if(A){const n=JSON.parse(A),f=Date.now();f>n.expires||f-n.authenticatedAt>1440*60*1e3?localStorage.removeItem("blkout_admin_auth"):(s(!0),o(n.role))}}catch(A){console.error("Error checking auth:",A),localStorage.removeItem("blkout_admin_auth")}p(!1)},[]);const w=A=>{if(A.preventDefault(),new Date>le){u("Temporary authentication has expired. Please contact administrators for updated access.");return}let f=null;if(d===Tt)f="admin";else if(d===At)f="moderator";else{u("Invalid password. Contact administrators if you need access."),c("");return}const g={role:f,authenticated:!0,expires:le.getTime(),authenticatedAt:Date.now()};localStorage.setItem("blkout_admin_auth",JSON.stringify(g)),s(!0),o(f),u("")},E=()=>{s(!1),o(null),localStorage.removeItem("blkout_admin_auth"),c("")},T=Math.ceil((le.getTime()-Date.now())/(1e3*60*60*24));return h?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-400 mx-auto mb-4"}),e.jsx("p",{className:"text-indigo-200",children:"Loading..."})]})}):t?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900",children:[e.jsx("div",{className:"bg-indigo-900/50 backdrop-blur-sm border-b border-indigo-700/30 sticky top-0 z-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-emerald-500 to-indigo-600 rounded-full flex items-center justify-center",children:e.jsx(J,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-white",children:"BLKOUT Admin Panel"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-indigo-800/50 rounded",children:[i==="admin"?e.jsx(Re,{className:"w-3 h-3 text-yellow-400"}):e.jsx(P,{className:"w-3 h-3 text-blue-400"}),e.jsx("span",{className:"text-xs text-indigo-200 capitalize font-medium",children:i})]}),T<=30&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-yellow-900/30 border border-yellow-700/50 rounded",children:[e.jsx(O,{className:"w-3 h-3 text-yellow-400"}),e.jsxs("span",{className:"text-xs text-yellow-200",children:[T," days left"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("nav",{className:"flex space-x-4",children:[e.jsx("a",{href:"/admin",className:"text-indigo-200 hover:text-white transition-colors text-sm",children:"Dashboard"}),e.jsx("a",{href:"/admin/events",className:"text-indigo-200 hover:text-white transition-colors text-sm",children:"Events"}),e.jsx("a",{href:"/admin/newsroom",className:"text-indigo-200 hover:text-white transition-colors text-sm",children:"Newsroom"}),e.jsx("a",{href:"/admin/governance",className:"text-indigo-200 hover:text-white transition-colors text-sm",children:"Governance"}),e.jsx("a",{href:"/admin/moderation",className:"text-indigo-200 hover:text-white transition-colors text-sm",children:"Moderation"})]}),e.jsxs(x.button,{onClick:E,whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center gap-2 px-3 py-1 bg-red-600/20 border border-red-600/30 text-red-200 rounded hover:bg-red-600/30 transition-colors text-sm",children:[e.jsx(De,{className:"w-4 h-4"}),"Sign Out"]})]})]})})}),a]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900 flex items-center justify-center",children:e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-indigo-900/50 backdrop-blur-sm border border-indigo-700/30 rounded-lg p-8 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-emerald-500 to-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(J,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-black text-white heading-block uppercase mb-2",children:"Admin Access Required"}),e.jsx("p",{className:"text-indigo-200",children:"Enter admin or moderator password to access the dashboard"}),e.jsx("div",{className:"bg-yellow-900/30 border border-yellow-700/50 rounded-lg p-3 mt-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4 text-yellow-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-200 text-xs font-medium",children:"Temporary Access Period"}),e.jsxs("p",{className:"text-yellow-300 text-xs",children:[T," days remaining • Expires November 17, 2025"]})]})]})})]}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Admin Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ae,{className:"absolute left-3 top-3 w-5 h-5 text-indigo-400"}),e.jsx("input",{type:b?"text":"password",required:!0,value:d,onChange:A=>c(A.target.value),className:"w-full pl-10 pr-12 py-3 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter admin password"}),e.jsx("button",{type:"button",onClick:()=>C(!b),className:"absolute right-3 top-3 text-indigo-400 hover:text-indigo-300 transition-colors",children:b?e.jsx(_e,{className:"w-5 h-5"}):e.jsx(q,{className:"w-5 h-5"})})]})]}),S&&e.jsx(x.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-red-900/30 border border-red-700/50 rounded p-3 text-red-200 text-sm",children:S}),e.jsx(x.button,{type:"submit",whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full px-6 py-3 bg-gradient-to-r from-emerald-600 to-indigo-600 text-white font-bold rounded hover:from-emerald-500 hover:to-indigo-500 transition-all uppercase",children:"Access Admin Panel"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("a",{href:"/",className:"text-indigo-400 hover:text-indigo-300 transition-colors text-sm",children:"← Back to Home"})})]})})}const _t=()=>{const[a,t]=m.useState([]),[s,i]=m.useState([]),[o,d]=m.useState("online");m.useEffect(()=>{t([{name:"BLKOUTHUB (Heartbeat.chat)",status:"connected",lastSync:"2 minutes ago",description:"Private community platform for Black queer men"},{name:"Google Calendar",status:"connected",lastSync:"5 minutes ago",description:"Community events and scheduling"},{name:"Gmail",status:"connected",lastSync:"1 minute ago",description:"Community outreach and notifications"},{name:"Telegram",status:"connected",lastSync:"30 seconds ago",description:"Real-time community alerts and updates"},{name:"Google Sheets",status:"connected",lastSync:"10 minutes ago",description:"Content calendar and community metrics"},{name:"Airtable",status:"connected",lastSync:"15 minutes ago",description:"Cooperative governance and resource tracking"}]),i([{id:"blkout_main_workflow",name:"Content Calendar Automation",status:"active",lastRun:"1 hour ago",description:"Automated content distribution across platforms (Mondays 8 AM)",triggers:24},{id:"blkout_community_monitoring_workflow",name:"Community Health Monitoring",status:"active",lastRun:"2 hours ago",description:"Engagement tracking and community analytics (Every 2 hours)",triggers:156},{id:"blkout_emergent_response_workflow",name:"Real-time Community Response",status:"active",lastRun:"30 minutes ago",description:"Handles community questions and emergent needs via webhooks",triggers:8}])},[]);const c=({status:b})=>{const C={connected:"bg-green-500/20 text-green-400 border-green-500/30",active:"bg-green-500/20 text-green-400 border-green-500/30",disconnected:"bg-red-500/20 text-red-400 border-red-500/30",inactive:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",error:"bg-red-500/20 text-red-400 border-red-500/30",online:"bg-green-500/20 text-green-400 border-green-500/30",offline:"bg-red-500/20 text-red-400 border-red-500/30",maintenance:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs border ${C[b]}`,children:b.charAt(0).toUpperCase()+b.slice(1)})};return e.jsx("div",{className:"min-h-screen bg-black text-white p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-12 text-center",children:[e.jsx("h1",{className:"text-6xl font-bold mb-4 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"BLKOUT Integration Hub"}),e.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:"Real-time dashboard for community automation, IVOR AI system, and liberation technology infrastructure"})]}),e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-8",children:e.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 to-purple-900/30 rounded-xl p-6 border border-blue-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx(st,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"IVOR System Status"}),e.jsx("p",{className:"text-gray-400",children:"Intelligent Virtual Organizer for Revolution"})]})]}),e.jsx(c,{status:o})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:"1,247"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Community Interactions"})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-400",children:"89%"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Response Accuracy"})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:"24/7"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Uptime"})]})]})]})}),e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(at,{className:"w-8 h-8 text-blue-400 mr-3"}),e.jsx("h2",{className:"text-3xl font-bold",children:"N8N Automation Workflows"})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:s.map((b,C)=>e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+C*.1},className:"bg-gray-900/50 rounded-xl p-6 border border-gray-700/50 hover:border-blue-500/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold",children:b.name}),e.jsx(c,{status:b.status})]}),e.jsx("p",{className:"text-gray-400 mb-4 text-sm",children:b.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Last Run:"}),e.jsx("span",{className:"text-white",children:b.lastRun})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Triggers:"}),e.jsx("span",{className:"text-blue-400",children:b.triggers})]})]})]},b.id))})]}),e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"mb-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Ce,{className:"w-8 h-8 text-purple-400 mr-3"}),e.jsx("h2",{className:"text-3xl font-bold",children:"Composio Platform Integrations"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map((b,C)=>e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5+C*.1},className:"bg-gray-900/50 rounded-xl p-6 border border-gray-700/50 hover:border-purple-500/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[b.name.includes("BLKOUTHUB")&&e.jsx(P,{className:"w-6 h-6 text-blue-400"}),b.name.includes("Calendar")&&e.jsx(O,{className:"w-6 h-6 text-green-400"}),b.name.includes("Gmail")&&e.jsx(it,{className:"w-6 h-6 text-red-400"}),b.name.includes("Telegram")&&e.jsx(se,{className:"w-6 h-6 text-blue-500"}),b.name.includes("Sheets")&&e.jsx(ne,{className:"w-6 h-6 text-green-500"}),b.name.includes("Airtable")&&e.jsx(rt,{className:"w-6 h-6 text-orange-400"}),e.jsx("h3",{className:"text-lg font-semibold",children:b.name})]}),e.jsx(c,{status:b.status})]}),e.jsx("p",{className:"text-gray-400 mb-3 text-sm",children:b.description}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Last sync: ",b.lastSync]})]},b.name))})]}),e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mb-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(ne,{className:"w-8 h-8 text-green-400 mr-3"}),e.jsx("h2",{className:"text-3xl font-bold",children:"Community Liberation Metrics"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 to-blue-700/30 rounded-xl p-6 border border-blue-500/20",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-400 mb-2",children:"487"}),e.jsx("div",{className:"text-sm text-gray-300",children:"Active BLKOUTHUB Members"}),e.jsx("div",{className:"text-xs text-green-400 mt-1",children:"+23 this month"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-purple-700/30 rounded-xl p-6 border border-purple-500/20",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:"92%"}),e.jsx("div",{className:"text-sm text-gray-300",children:"Community Health Score"}),e.jsx("div",{className:"text-xs text-green-400 mt-1",children:"Excellent engagement"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 to-green-700/30 rounded-xl p-6 border border-green-500/20",children:[e.jsx("div",{className:"text-3xl font-bold text-green-400 mb-2",children:"156"}),e.jsx("div",{className:"text-sm text-gray-300",children:"Events This Quarter"}),e.jsx("div",{className:"text-xs text-blue-400 mt-1",children:"Digital + In-person"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-900/30 to-orange-700/30 rounded-xl p-6 border border-orange-500/20",children:[e.jsx("div",{className:"text-3xl font-bold text-orange-400 mb-2",children:"2.3K"}),e.jsx("div",{className:"text-sm text-gray-300",children:"Liberation Stories Shared"}),e.jsx("div",{className:"text-xs text-purple-400 mt-1",children:"Cross-platform reach"})]})]})]}),e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:[e.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("button",{className:"bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-xl transition-colors",children:[e.jsx(nt,{className:"w-6 h-6 mb-2"}),e.jsx("div",{className:"text-sm font-semibold",children:"Trigger Content Distribution"})]}),e.jsxs("button",{className:"bg-purple-600 hover:bg-purple-700 text-white p-4 rounded-xl transition-colors",children:[e.jsx(se,{className:"w-6 h-6 mb-2"}),e.jsx("div",{className:"text-sm font-semibold",children:"Send Community Alert"})]}),e.jsxs("button",{className:"bg-green-600 hover:bg-green-700 text-white p-4 rounded-xl transition-colors",children:[e.jsx(O,{className:"w-6 h-6 mb-2"}),e.jsx("div",{className:"text-sm font-semibold",children:"Create Event"})]}),e.jsxs("button",{className:"bg-orange-600 hover:bg-orange-700 text-white p-4 rounded-xl transition-colors",children:[e.jsx(ne,{className:"w-6 h-6 mb-2"}),e.jsx("div",{className:"text-sm font-semibold",children:"Generate Report"})]})]})]}),e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"mt-16 text-center text-gray-500 text-sm",children:[e.jsx("p",{children:"BLKOUT UK Integration Hub - Technology for Black Queer Liberation"}),e.jsx("p",{className:"mt-2",children:"All systems operational • Real-time monitoring active"})]})]})})},Rt=()=>{const[a,t]=m.useState({role:null,authenticated:!1,expires:0,authenticatedAt:0}),[s,i]=m.useState(!0),o=m.useCallback(()=>{try{const S=localStorage.getItem("blkout_admin_auth");if(!S)return t({role:null,authenticated:!1,expires:0,authenticatedAt:0}),i(!1),!1;const u=JSON.parse(S),h=Date.now();if(h>u.expires)return localStorage.removeItem("blkout_admin_auth"),t({role:null,authenticated:!1,expires:0,authenticatedAt:0}),i(!1),!1;const p=1440*60*1e3;return h-u.authenticatedAt>p?(localStorage.removeItem("blkout_admin_auth"),t({role:null,authenticated:!1,expires:0,authenticatedAt:0}),i(!1),!1):(t(u),i(!1),!0)}catch(S){return console.error("Error checking auth:",S),localStorage.removeItem("blkout_admin_auth"),t({role:null,authenticated:!1,expires:0,authenticatedAt:0}),i(!1),!1}},[]);m.useEffect(()=>{o()},[o]);const d=m.useCallback(S=>{const u=new Date("2025-11-17").getTime(),h={role:S,authenticated:!0,expires:u,authenticatedAt:Date.now()};localStorage.setItem("blkout_admin_auth",JSON.stringify(h)),t(h)},[]),c=m.useCallback(()=>{localStorage.removeItem("blkout_admin_auth"),t({role:null,authenticated:!1,expires:0,authenticatedAt:0})},[]),b=m.useCallback(S=>a.authenticated?a.role==="admin"?!0:a.role===S:!1,[a]),C=Math.ceil((a.expires-Date.now())/(1e3*60*60*24));return{authenticated:a.authenticated,role:a.role,loading:s,daysRemaining:a.authenticated?Math.max(0,C):0,authenticate:d,signOut:c,checkAuth:o,hasRole:b,isAdmin:a.role==="admin",isModerator:a.role==="moderator"||a.role==="admin",expiresAt:new Date(a.expires)}},Be=a=>{const{type:t,title:s,message:i,duration:o=5e3}=a,d=document.createElement("div");d.className=`fixed top-4 right-4 max-w-sm bg-white rounded-lg shadow-lg border-l-4 z-50 ${t==="success"?"border-green-500":t==="error"?"border-red-500":t==="warning"?"border-yellow-500":"border-blue-500"}`,d.innerHTML=`
    <div class="flex items-start p-4">
      <div class="flex-shrink-0">
        ${t==="success"?"✅":t==="error"?"❌":t==="warning"?"⚠️":"ℹ️"}
      </div>
      <div class="ml-3 flex-1">
        <div class="text-sm font-medium text-gray-900">${s}</div>
        ${i?`<div class="text-sm text-gray-500 mt-1">${i}</div>`:""}
      </div>
      <button class="ml-4 text-gray-400 hover:text-gray-600" onclick="this.parentElement.parentElement.remove()">
        ×
      </button>
    </div>
  `,document.body.appendChild(d),setTimeout(()=>{d.parentNode&&d.remove()},o)},U=(a,t)=>{Be({type:"success",title:a,message:t})},F=(a,t)=>{Be({type:"error",title:a,message:t})};function Dt({onAuthenticated:a,onClose:t}){const[s,i]=m.useState(""),[o,d]=m.useState(!1),[c,b]=m.useState(!1),C="BLKOUT2025!Admin",S="BLKOUT2025!Mod",u=new Date("2025-11-17"),h=async w=>{w.preventDefault(),b(!0);try{if(new Date>u){F("Access Expired","Temporary authentication has expired. Please contact administrators for updated access."),b(!1);return}if(s===C){const T={role:"admin",authenticated:!0,expires:u.getTime(),authenticatedAt:Date.now()};localStorage.setItem("blkout_admin_auth",JSON.stringify(T)),U("Admin Access Granted","Welcome to BLKOUTNXT Admin Dashboard"),a("admin")}else if(s===S){const T={role:"moderator",authenticated:!0,expires:u.getTime(),authenticatedAt:Date.now()};localStorage.setItem("blkout_admin_auth",JSON.stringify(T)),U("Moderator Access Granted","Welcome to BLKOUTNXT Moderation Dashboard"),a("moderator")}else F("Access Denied","Invalid password. Contact administrators if you need access.")}catch(E){console.error("Auth error:",E),F("Authentication Error","Something went wrong. Please try again.")}finally{b(!1)}},p=Math.ceil((u.getTime()-Date.now())/(1e3*60*60*24));return e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.2},className:"bg-gradient-to-br from-indigo-950 to-slate-900 border border-indigo-700/50 rounded-xl max-w-md w-full p-8 shadow-2xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gradient-to-br from-emerald-500 to-indigo-600 rounded-full flex items-center justify-center mb-4",children:e.jsx(J,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-black text-white heading-block uppercase mb-2",children:"Admin Access"}),e.jsx("p",{className:"text-indigo-200 text-sm",children:"Community moderation and administration"})]}),e.jsx("div",{className:"bg-yellow-900/30 border border-yellow-700/50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{className:"w-5 h-5 text-yellow-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-200 font-medium text-sm",children:"Temporary Access Period"}),e.jsxs("p",{className:"text-yellow-300 text-xs",children:[p," days remaining • Expires November 17, 2025"]})]})]})}),e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Access Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ae,{className:"absolute left-3 top-3 w-5 h-5 text-indigo-400"}),e.jsx("input",{type:o?"text":"password",value:s,onChange:w=>i(w.target.value),required:!0,className:"w-full pl-10 pr-12 py-3 bg-indigo-900/50 border border-indigo-600 rounded-lg text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Enter admin/moderator password"}),e.jsx("button",{type:"button",onClick:()=>d(!o),className:"absolute right-3 top-3 text-indigo-400 hover:text-indigo-300 transition-colors",children:o?e.jsx(_e,{className:"w-5 h-5"}):e.jsx(q,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"bg-indigo-900/30 border border-indigo-700/30 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-white font-medium text-sm mb-3 flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4"}),"Available Roles"]}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-indigo-200",children:"Admin"}),e.jsx("span",{className:"text-emerald-400",children:"Full Dashboard Access"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-indigo-200",children:"Moderator"}),e.jsx("span",{className:"text-yellow-400",children:"Content Moderation"})]})]})]}),e.jsx(x.button,{type:"submit",disabled:c||!s.trim(),whileHover:{scale:c?1:1.02},whileTap:{scale:c?1:.98},className:"w-full py-3 bg-gradient-to-r from-emerald-600 to-indigo-600 text-white font-bold rounded-lg hover:from-emerald-500 hover:to-indigo-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:c?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Authenticating..."]}):"Access Dashboard"}),t&&e.jsx("button",{type:"button",onClick:t,className:"w-full py-2 text-indigo-300 hover:text-white transition-colors text-sm",children:"Cancel"})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-indigo-700/30",children:[e.jsx("p",{className:"text-xs text-indigo-400 text-center",children:"🔒 Temporary authentication system for community launch"}),e.jsx("p",{className:"text-xs text-indigo-500 text-center mt-1",children:"Transitioning to full Supabase auth in 90 days"})]})]})})}function Me({children:a,requiredRole:t="moderator",title:s="Admin Dashboard"}){const{authenticated:i,role:o,loading:d,hasRole:c,signOut:b,authenticate:C,daysRemaining:S}=Rt(),[u,h]=m.useState(!1);return d?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-indigo-400 mx-auto mb-4"}),e.jsx("p",{className:"text-indigo-200",children:"Checking authentication..."})]})}):!i||!c(t)?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900",children:e.jsx(Dt,{onAuthenticated:C})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900",children:[e.jsx("div",{className:"bg-indigo-900/30 backdrop-blur-sm border-b border-indigo-700/30",children:e.jsx("div",{className:"max-w-7xl mx-auto px-8 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5 text-emerald-400"}),e.jsx("span",{className:"text-white font-medium",children:s})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-indigo-800/50 rounded-full",children:[o==="admin"?e.jsx(Re,{className:"w-4 h-4 text-yellow-400"}):e.jsx(P,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-indigo-200 text-sm capitalize font-medium",children:o})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[S<=30&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-yellow-900/30 border border-yellow-700/50 rounded-lg",children:[e.jsx(Q,{className:"w-4 h-4 text-yellow-400"}),e.jsxs("span",{className:"text-yellow-200 text-sm",children:[S," days left"]})]}),e.jsxs(x.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:b,className:"flex items-center gap-2 px-3 py-1 text-indigo-300 hover:text-white hover:bg-indigo-800/50 rounded-lg transition-colors",children:[e.jsx(De,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Sign Out"})]})]})]})})}),e.jsx("div",{className:"relative",children:a}),S<=7&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-red-900/90 border border-red-700 rounded-lg p-4 max-w-sm shadow-2xl backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Q,{className:"w-5 h-5 text-red-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-200 font-medium text-sm",children:"Temporary Access Expiring Soon"}),e.jsxs("p",{className:"text-red-300 text-xs mt-1",children:[S," days remaining. Contact administrators for permanent access setup."]})]})]})})]})}const X={name:"",description:"",event_date:"",start_time:"",end_time:"",locationType:"physical",address:"",url:"",organizer_name:"",category:"Community",tags:"",capacity:50,featured:!1,image:""},ve=["Community","Wellness","Education","Arts & Culture","Activism","Social","Professional Development","Support Group"];function Lt(){const{events:a,loading:t,createEvent:s,updateEvent:i,deleteEvent:o}=Ve(),[d,c]=m.useState([]),[b,C]=m.useState(!1),[S,u]=m.useState(null),[h,p]=m.useState(X),[w,E]=m.useState(""),[T,A]=m.useState("all"),[n,f]=m.useState("all");m.useEffect(()=>{let l=a;w&&(l=l.filter(y=>y.name.toLowerCase().includes(w.toLowerCase())||y.description.toLowerCase().includes(w.toLowerCase())||y.organizer_name?.toLowerCase().includes(w.toLowerCase()))),T!=="all"&&(l=l.filter(y=>y.status===T)),n!=="all"&&(l=l.filter(y=>y.category===n)),c(l)},[a,w,T,n]);const g=async l=>{l.preventDefault();try{const y={name:h.name,description:h.description,event_date:h.event_date,start_time:h.start_time,end_time:h.end_time,location:{type:h.locationType,address:h.address||void 0,url:h.url||void 0},organizer_name:h.organizer_name,category:h.category,tags:h.tags.split(",").map(M=>M.trim()).filter(Boolean),target_audience:["All Welcome"],price:"Free",source:"manual",status:S?S.status:"draft"};S?await i(S.id,y):await s(y),p(X),u(null),C(!1),U(S?"Event Updated":"Event Created",S?"Event updated successfully!":"Event created successfully!")}catch(y){console.error("Failed to save event:",y),F("Save Failed","Failed to save event. Please try again.")}},N=l=>{u(l),p({name:l.name,description:l.description,event_date:l.event_date.split("T")[0],start_time:l.start_time||"",end_time:l.end_time||"",locationType:typeof l.location=="object"?l.location.type:"physical",address:(typeof l.location=="object"?l.location.address:l.location)||"",url:(typeof l.location=="object"?l.location.url:"")||"",organizer_name:l.organizer_name||"",category:l.category||"Community",tags:(l.tags||[]).join(", "),capacity:50,featured:!1,image:""}),C(!0)},k=async l=>{if(confirm("Are you sure you want to delete this event?"))try{await o(l),U("Event Deleted","Event deleted successfully!")}catch{F("Delete Failed","Failed to delete event. Please try again.")}},j=async(l,y)=>{try{await i(l,{status:y}),U("Status Updated",`Event status changed to ${y}`)}catch{F("Update Failed","Failed to update event status. Please try again.")}},D=l=>{switch(l){case"published":return"text-green-400 bg-green-900/20";case"draft":return"text-yellow-400 bg-yellow-900/20";case"cancelled":return"text-red-400 bg-red-900/20";case"completed":return"text-blue-400 bg-blue-900/20";default:return"text-gray-400 bg-gray-900/20"}},B={total:a.length,published:a.filter(l=>l.status==="published").length,draft:a.filter(l=>l.status==="draft").length,totalRSVPs:a.reduce((l,y)=>l+y.rsvps,0)};return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-400 mx-auto mb-4"}),e.jsx("p",{className:"text-indigo-200",children:"Loading Events Dashboard..."})]})}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{pageName:"Admin Events Dashboard",dependencies:["Supabase","Events Hook","Admin Auth"]}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900",children:[e.jsx("div",{className:"bg-indigo-900/50 backdrop-blur-sm border-b border-indigo-700/30",children:e.jsx("div",{className:"max-w-7xl mx-auto px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-white heading-block uppercase",children:"Events Admin Dashboard"}),e.jsx("p",{className:"text-indigo-200 mt-2",children:"Manage community events and gatherings"})]}),e.jsxs(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>C(!0),className:"px-6 py-3 bg-gradient-to-r from-emerald-600 to-indigo-600 text-white font-bold hover:from-emerald-500 hover:to-indigo-500 transition-all heading-block uppercase flex items-center",children:[e.jsx(Le,{className:"w-5 h-5 mr-2"}),"Create Event"]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-indigo-900/30 backdrop-blur-sm border border-indigo-700/30 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-indigo-200 text-sm font-medium",children:"Total Events"}),e.jsx("p",{className:"text-3xl font-black text-white",children:B.total})]}),e.jsx(O,{className:"w-8 h-8 text-indigo-400"})]})}),e.jsx("div",{className:"bg-green-900/30 backdrop-blur-sm border border-green-700/30 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-200 text-sm font-medium",children:"Published"}),e.jsx("p",{className:"text-3xl font-black text-white",children:B.published})]}),e.jsx(H,{className:"w-8 h-8 text-green-400"})]})}),e.jsx("div",{className:"bg-yellow-900/30 backdrop-blur-sm border border-yellow-700/30 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-200 text-sm font-medium",children:"Drafts"}),e.jsx("p",{className:"text-3xl font-black text-white",children:B.draft})]}),e.jsx(ae,{className:"w-8 h-8 text-yellow-400"})]})}),e.jsx("div",{className:"bg-violet-900/30 backdrop-blur-sm border border-violet-700/30 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-violet-200 text-sm font-medium",children:"Total RSVPs"}),e.jsx("p",{className:"text-3xl font-black text-white",children:B.totalRSVPs})]}),e.jsx(P,{className:"w-8 h-8 text-violet-400"})]})})]}),e.jsx("div",{className:"bg-indigo-900/30 backdrop-blur-sm border border-indigo-700/30 p-6 mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ge,{className:"absolute left-3 top-3 w-5 h-5 text-indigo-400"}),e.jsx("input",{type:"text",placeholder:"Search events...",value:w,onChange:l=>E(l.target.value),className:"w-full pl-10 pr-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("select",{value:T,onChange:l=>A(l.target.value),className:"px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsxs("select",{value:n,onChange:l=>f(l.target.value),className:"px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:"All Categories"}),ve.map(l=>e.jsx("option",{value:l,children:l},l))]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-500 transition-colors flex items-center",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Export"]}),e.jsxs("button",{className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-500 transition-colors flex items-center",children:[e.jsx(lt,{className:"w-4 h-4 mr-2"}),"Import"]})]})]})}),e.jsxs("div",{className:"bg-indigo-900/30 backdrop-blur-sm border border-indigo-700/30 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-indigo-800/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Event"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Date & Time"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Source"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"RSVPs"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-indigo-700/30",children:d.map(l=>e.jsxs("tr",{className:"hover:bg-indigo-800/20 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-emerald-500 to-indigo-600 flex items-center justify-center",children:e.jsx(O,{className:"w-5 h-5 text-white"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-white",children:l.name}),e.jsx("div",{className:"text-sm text-indigo-200",children:l.category}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.featured&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-900/30 text-yellow-400",children:"Featured"}),l.submittedVia==="chrome-extension"&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-emerald-900/30 text-emerald-400",children:"📤 Extension"})]})]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-white",children:new Date(l.event_date).toLocaleDateString()}),e.jsx("div",{className:"text-sm text-indigo-200",children:l.start_time})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-indigo-200",children:[e.jsx(ot,{className:"w-4 h-4 mr-1"}),l.location.type==="physical"?"In-person":l.location.type==="virtual"?"Virtual":"Hybrid"]}),e.jsx("div",{className:"text-xs text-indigo-300",children:typeof l.location=="object"?l.location.address||l.location.url||"Location TBD":l.location||"Location TBD"})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-white",children:l.submittedVia==="chrome-extension"?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-emerald-400",children:"📤 Extension"}),l.sourceUrl&&e.jsx("a",{href:l.sourceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-indigo-300 hover:text-indigo-200 truncate max-w-24",title:l.sourceUrl,children:new URL(l.sourceUrl).hostname})]}):l.submittedVia==="bulk-test"?e.jsx("span",{className:"text-yellow-400",children:"🧪 Bulk Test"}):e.jsx("span",{className:"text-indigo-300",children:"✍️ Manual"})})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("div",{className:"text-sm text-white",children:[l.rsvps||0,"/",l.capacity||50]}),e.jsx("div",{className:"w-full bg-indigo-800 rounded-full h-2 mt-1",children:e.jsx("div",{className:"bg-emerald-500 h-2 rounded-full",style:{width:`${(l.rsvps||0)/(l.capacity||50)*100}%`}})})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("select",{value:l.status,onChange:y=>j(l.id,y.target.value),className:`px-3 py-1 rounded-full text-xs font-medium border-0 ${D(l.status)}`,children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"completed",children:"Completed"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>N(l),className:"text-indigo-400 hover:text-indigo-300 transition-colors",children:e.jsx(ae,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-emerald-400 hover:text-emerald-300 transition-colors",children:e.jsx(q,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>k(l.id),className:"text-red-400 hover:text-red-300 transition-colors",children:e.jsx(Oe,{className:"w-4 h-4"})})]})})]},l.id))})]})}),d.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(O,{className:"w-12 h-12 text-indigo-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No events found"}),e.jsx("p",{className:"text-indigo-200",children:"Create your first event to get started."})]})]})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-indigo-900 border border-indigo-700 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-black text-white heading-block uppercase",children:S?"Edit Event":"Create New Event"}),e.jsx("button",{onClick:()=>{C(!1),u(null),p(X)},className:"text-indigo-400 hover:text-white transition-colors",children:e.jsx(re,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Event Name"}),e.jsx("input",{type:"text",required:!0,value:h.name,onChange:l=>p(y=>({...y,name:l.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter event name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Category"}),e.jsx("select",{value:h.category,onChange:l=>p(y=>({...y,category:l.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:ve.map(l=>e.jsx("option",{value:l,children:l},l))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Description"}),e.jsx("textarea",{required:!0,value:h.description,onChange:l=>p(y=>({...y,description:l.target.value})),rows:4,className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Describe your event"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Date"}),e.jsx("input",{type:"date",required:!0,value:h.event_date,onChange:l=>p(y=>({...y,event_date:l.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Start Time"}),e.jsx("input",{type:"time",required:!0,value:h.start_time,onChange:l=>p(y=>({...y,start_time:l.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"End Time"}),e.jsx("input",{type:"time",value:h.end_time,onChange:l=>p(y=>({...y,end_time:l.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Location Type"}),e.jsx("div",{className:"flex gap-4 mb-4",children:["physical","virtual","hybrid"].map(l=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"locationType",value:l,checked:h.locationType===l,onChange:y=>p(M=>({...M,locationType:y.target.value})),className:"mr-2"}),e.jsx("span",{className:"text-indigo-200 capitalize",children:l})]},l))}),(h.locationType==="physical"||h.locationType==="hybrid")&&e.jsx("input",{type:"text",value:h.address,onChange:l=>p(y=>({...y,address:l.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 mb-4",placeholder:"Physical address"}),(h.locationType==="virtual"||h.locationType==="hybrid")&&e.jsx("input",{type:"url",value:h.url,onChange:l=>p(y=>({...y,url:l.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Virtual meeting URL"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Organizer"}),e.jsx("input",{type:"text",required:!0,value:h.organizer_name,onChange:l=>p(y=>({...y,organizer_name:l.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Event organizer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Capacity"}),e.jsx("input",{type:"number",required:!0,min:"1",max:"1000",value:h.capacity,onChange:l=>p(y=>({...y,capacity:parseInt(l.target.value)})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Tags (comma-separated)"}),e.jsx("input",{type:"text",value:h.tags,onChange:l=>p(y=>({...y,tags:l.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"healing, community, support"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:h.featured,onChange:l=>p(y=>({...y,featured:l.target.checked})),className:"mr-2"}),e.jsx("label",{className:"text-indigo-200",children:"Featured Event"})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-indigo-700",children:[e.jsx("button",{type:"button",onClick:()=>{C(!1),u(null),p(X)},className:"px-6 py-2 border border-indigo-600 text-indigo-200 rounded hover:bg-indigo-800/50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-emerald-600 to-indigo-600 text-white font-bold rounded hover:from-emerald-500 hover:to-indigo-500 transition-all",children:S?"Update Event":"Create Event"})]})]})]})})})]})]})}function Ot(){return e.jsx(Me,{requiredRole:"moderator",title:"Events Admin Dashboard",children:e.jsx(Lt,{})})}const Z={title:"",excerpt:"",content:"",author:"",category:"community",tags:"",featured:!1,imageUrl:"",source:"",externalUrl:"",type:"original",priority:"medium"},Ne=["community","politics","culture","health","education","business","technology"],Pt=[{value:"original",label:"Original Reporting",icon:z},{value:"curated",label:"Curated Content",icon:Ie},{value:"community_response",label:"Community Response",icon:P}];function It(){const{articles:a,loading:t,error:s,refetch:i,createArticle:o,updateArticle:d,deleteArticle:c}=Ye(),[b,C]=m.useState([]),[S,u]=m.useState(!1),[h,p]=m.useState(null),[w,E]=m.useState(Z),[T,A]=m.useState(""),[n,f]=m.useState("all"),[g,N]=m.useState("all");xe.useEffect(()=>{let r=a;T&&(r=r.filter(v=>v.title.toLowerCase().includes(T.toLowerCase())||v.excerpt.toLowerCase().includes(T.toLowerCase())||y(v.author).toLowerCase().includes(T.toLowerCase())||(v.tags||[]).some(L=>L.toLowerCase().includes(T.toLowerCase())))),n!=="all"&&(r=r.filter(v=>v.status===n)),g!=="all"&&(r=r.filter(v=>v.category===g)),C(r)},[a,T,n,g]);const k=async r=>{r.preventDefault();try{const v={title:w.title,excerpt:w.excerpt,content:w.content,author:w.author,category:w.category,tags:w.tags.split(",").map(L=>L.trim()).filter(Boolean),featured:w.featured,image_url:w.imageUrl,source_url:w.externalUrl,type:w.type,priority:w.priority,status:h?.status||"draft"};h?(await d(h.id,v),U("Article Updated","Article updated successfully!")):(await o(v),U("Article Created","Article created successfully!")),E(Z),p(null),u(!1)}catch(v){console.error("Failed to save article:",v),F("Save Failed","Failed to save article. Please try again.")}},j=r=>{p(r),E({title:r.title,excerpt:r.excerpt,content:r.content||"",author:y(r.author),category:r.category,tags:(r.tags||[]).join(", "),featured:r.featured||!1,imageUrl:r.image_url||"",source:r.source||"",externalUrl:r.source_url||"",type:r.type||"original",priority:r.priority||"medium"}),u(!0)},D=async r=>{if(confirm("Are you sure you want to delete this article?"))try{await c(r),U("Article Deleted","Article deleted successfully!")}catch(v){console.error("Failed to delete article:",v),F("Delete Failed","Failed to delete article. Please try again.")}},B=async(r,v)=>{try{await d(r,{status:v,published_at:v==="published"?new Date().toISOString():void 0}),U(`Article ${v}`,`Article ${v} successfully!`)}catch(L){console.error("Failed to update article status:",L),F("Update Failed","Failed to update article status. Please try again.")}},l=r=>{switch(r){case"published":return"text-green-400 bg-green-900/20";case"draft":return"text-yellow-400 bg-yellow-900/20";case"archived":return"text-gray-400 bg-gray-900/20";default:return"text-gray-400 bg-gray-900/20"}},y=r=>typeof r=="string"?r:r.name,M=()=>e.jsx(dt,{className:"w-4 h-4 text-green-400"}),V=r=>{switch(r){case"original":return z;case"curated":return Ie;case"community_response":return P;default:return z}},_=r=>{switch(r){case"urgent":return"text-red-400 bg-red-900/20";case"high":return"text-orange-400 bg-orange-900/20";case"medium":return"text-yellow-400 bg-yellow-900/20";case"low":return"text-green-400 bg-green-900/20";default:return"text-gray-400 bg-gray-900/20"}},R={total:a.length,published:a.filter(r=>r.status==="published").length,draft:a.filter(r=>r.status==="draft").length,todayCount:a.filter(r=>{const v=new Date().toISOString().split("T")[0];return new Date(r.published_at||r.created_at).toISOString().split("T")[0]===v}).length,connectionStatus:"supabase"};return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-400 mx-auto mb-4"}),e.jsx("p",{className:"text-indigo-200",children:"Loading Newsroom Dashboard..."})]})}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{pageName:"Admin Newsroom Dashboard",dependencies:["Supabase","Articles Hook","Admin Auth"]}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900",children:[e.jsx("div",{className:"bg-indigo-900/50 backdrop-blur-sm border-b border-indigo-700/30",children:e.jsx("div",{className:"max-w-7xl mx-auto px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-white heading-block uppercase",children:"Newsroom Admin Dashboard"}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsx("p",{className:"text-indigo-200",children:"Manage articles, news, and community content"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[M(),e.jsxs("span",{className:"text-indigo-300",children:["Connected to Supabase",s&&e.jsxs("span",{className:"text-red-400 ml-2",children:["• ",s]})]})]})]})]}),e.jsxs(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>u(!0),className:"px-6 py-3 bg-gradient-to-r from-emerald-600 to-indigo-600 text-white font-bold hover:from-emerald-500 hover:to-indigo-500 transition-all heading-block uppercase flex items-center",children:[e.jsx(Le,{className:"w-5 h-5 mr-2"}),"Create Article"]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-8",children:[e.jsx("div",{className:"bg-indigo-900/30 backdrop-blur-sm border border-indigo-700/30 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-indigo-200 text-sm font-medium",children:"Total Articles"}),e.jsx("p",{className:"text-2xl font-black text-white",children:R.total})]}),e.jsx(ee,{className:"w-6 h-6 text-indigo-400"})]})}),e.jsx("div",{className:"bg-green-900/30 backdrop-blur-sm border border-green-700/30 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-200 text-sm font-medium",children:"Published"}),e.jsx("p",{className:"text-2xl font-black text-white",children:R.published})]}),e.jsx(H,{className:"w-6 h-6 text-green-400"})]})}),e.jsx("div",{className:"bg-yellow-900/30 backdrop-blur-sm border border-yellow-700/30 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-200 text-sm font-medium",children:"Drafts"}),e.jsx("p",{className:"text-2xl font-black text-white",children:R.draft})]}),e.jsx(ae,{className:"w-6 h-6 text-yellow-400"})]})}),e.jsx("div",{className:"bg-violet-900/30 backdrop-blur-sm border border-violet-700/30 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-violet-200 text-sm font-medium",children:"Today's Articles"}),e.jsx("p",{className:"text-2xl font-black text-white",children:R.todayCount})]}),e.jsx(O,{className:"w-6 h-6 text-violet-400"})]})}),e.jsx("div",{className:"bg-emerald-900/30 backdrop-blur-sm border border-emerald-700/30 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-emerald-200 text-sm font-medium",children:"Data Source"}),e.jsx("p",{className:"text-lg font-black text-white capitalize",children:R.connectionStatus})]}),M()]})})]}),e.jsx("div",{className:"bg-indigo-900/30 backdrop-blur-sm border border-indigo-700/30 p-6 mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ge,{className:"absolute left-3 top-3 w-5 h-5 text-indigo-400"}),e.jsx("input",{type:"text",placeholder:"Search articles...",value:T,onChange:r=>A(r.target.value),className:"w-full pl-10 pr-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("select",{value:n,onChange:r=>f(r.target.value),className:"px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"pending_review",children:"Pending Review"}),e.jsx("option",{value:"archived",children:"Archived"})]}),e.jsxs("select",{value:g,onChange:r=>N(r.target.value),className:"px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:"All Categories"}),Ne.map(r=>e.jsx("option",{value:r,children:r},r))]}),e.jsxs("button",{onClick:i,className:"px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-500 transition-colors flex items-center",disabled:t,children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),t?"Refreshing...":"Refresh"]}),e.jsxs("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-500 transition-colors flex items-center justify-center",children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"Filter"]})]})}),e.jsxs("div",{className:"bg-indigo-900/30 backdrop-blur-sm border border-indigo-700/30 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-indigo-800/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Article"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Author"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Source"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Stats"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-indigo-200 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-indigo-700/30",children:b.map(r=>{const v=V(r.type);return e.jsxs("tr",{className:"hover:bg-indigo-800/20 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 h-12 w-12",children:e.jsx("div",{className:"h-12 w-12 rounded-lg bg-gradient-to-br from-emerald-500 to-indigo-600 flex items-center justify-center",children:e.jsx(ee,{className:"w-6 h-6 text-white"})})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-white line-clamp-2",children:r.title}),e.jsx("div",{className:"text-sm text-indigo-200 mt-1",children:r.category}),e.jsxs("div",{className:"flex items-center mt-2",children:[r.featured&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-900/30 text-yellow-400 mr-2",children:"Featured"}),e.jsxs("div",{className:"flex space-x-1",children:[r.tags.slice(0,2).map(L=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-indigo-800/30 text-indigo-200",children:L},L)),r.tags.length>2&&e.jsxs("span",{className:"text-xs text-indigo-400",children:["+",r.tags.length-2]})]})]})]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-white",children:y(r.author)}),e.jsx("div",{className:"text-sm text-indigo-200",children:new Date(r.published_at||r.created_at).toLocaleDateString()})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(v,{className:"w-4 h-4 text-indigo-400 mr-2"}),e.jsx("span",{className:"text-sm text-indigo-200 capitalize",children:(r.type||"original").replace("_"," ")})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-white",children:r.source_url?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-emerald-400",children:"🔗 External"}),e.jsx("a",{href:r.source_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-indigo-300 hover:text-indigo-200 truncate max-w-20",title:r.source_url,children:new URL(r.source_url).hostname})]}):e.jsx("span",{className:"text-indigo-300",children:"✍️ Original"})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm text-white flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{className:"w-4 h-4 text-indigo-400 mr-1"}),r.views||0]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ct,{className:"w-4 h-4 text-indigo-400 mr-1"}),r.shares||0]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${_(r.priority||"medium")}`,children:(r.priority||"medium").toUpperCase()})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("select",{value:r.status,onChange:L=>B(r.id,L.target.value),className:`px-3 py-1 rounded-full text-xs font-medium border-0 ${l(r.status)}`,children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"pending_review",children:"Pending Review"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>j(r),className:"text-indigo-400 hover:text-indigo-300 transition-colors",children:e.jsx(ae,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-emerald-400 hover:text-emerald-300 transition-colors",children:e.jsx(q,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>D(r.id),className:"text-red-400 hover:text-red-300 transition-colors",children:e.jsx(Oe,{className:"w-4 h-4"})})]})})]},r.id)})})]})}),b.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ee,{className:"w-12 h-12 text-indigo-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No articles found"}),e.jsx("p",{className:"text-indigo-200",children:"Create your first article to get started."})]})]})]}),S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-indigo-900 border border-indigo-700 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-black text-white heading-block uppercase",children:h?"Edit Article":"Create New Article"}),e.jsx("button",{onClick:()=>{u(!1),p(null),E(Z)},className:"text-indigo-400 hover:text-white transition-colors",children:e.jsx(re,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Article Title"}),e.jsx("input",{type:"text",required:!0,value:w.title,onChange:r=>E(v=>({...v,title:r.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter article title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Category"}),e.jsx("select",{value:w.category,onChange:r=>E(v=>({...v,category:r.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:Ne.map(r=>e.jsx("option",{value:r,children:r},r))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Content Type"}),e.jsx("select",{value:w.type,onChange:r=>E(v=>({...v,type:r.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:Pt.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Excerpt"}),e.jsx("textarea",{required:!0,value:w.excerpt,onChange:r=>E(v=>({...v,excerpt:r.target.value})),rows:3,className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Brief excerpt or summary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Content"}),e.jsx("textarea",{required:!0,value:w.content,onChange:r=>E(v=>({...v,content:r.target.value})),rows:10,className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Full article content"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Author"}),e.jsx("input",{type:"text",required:!0,value:w.author,onChange:r=>E(v=>({...v,author:r.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Article author"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Priority"}),e.jsxs("select",{value:w.priority,onChange:r=>E(v=>({...v,priority:r.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),w.type==="curated"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Source"}),e.jsx("input",{type:"text",value:w.source,onChange:r=>E(v=>({...v,source:r.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Original source name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Source URL"}),e.jsx("input",{type:"url",value:w.externalUrl,onChange:r=>E(v=>({...v,externalUrl:r.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"https://..."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Tags (comma-separated)"}),e.jsx("input",{type:"text",value:w.tags,onChange:r=>E(v=>({...v,tags:r.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"policy, rights, community"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"Featured Image URL"}),e.jsx("input",{type:"url",value:w.imageUrl,onChange:r=>E(v=>({...v,imageUrl:r.target.value})),className:"w-full px-4 py-2 bg-indigo-800/50 border border-indigo-600 rounded text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"https://..."})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:w.featured,onChange:r=>E(v=>({...v,featured:r.target.checked})),className:"mr-2"}),e.jsx("label",{className:"text-indigo-200",children:"Featured Article"})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-indigo-700",children:[e.jsx("button",{type:"button",onClick:()=>{u(!1),p(null),E(Z)},className:"px-6 py-2 border border-indigo-600 text-indigo-200 rounded hover:bg-indigo-800/50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-emerald-600 to-indigo-600 text-white font-bold rounded hover:from-emerald-500 hover:to-indigo-500 transition-all",children:h?"Update Article":"Create Article"})]})]})]})})})]})]})}function Ut(){return e.jsx(Me,{requiredRole:"moderator",title:"Newsroom Admin Dashboard",children:e.jsx(It,{})})}const Ft=()=>{const[a,t]=m.useState([]),[s,i]=m.useState({pendingSocial:0,approvedToday:0,scheduledPosts:0,platforms:{twitter:0,instagram:0,linkedin:0,facebook:0}}),[o,d]=m.useState(!0),[c,b]=m.useState(null);m.useEffect(()=>{C();const n=setInterval(C,3e4);return()=>clearInterval(n)},[]);const C=async()=>{try{d(!0);const f=await(await fetch("/api/social-content")).json();if(f.success&&f.content_entries){const g=[];f.content_entries.forEach(N=>{Object.entries(N.content).forEach(([k,j])=>{j.text&&j.status==="success"&&g.push({id:`${N.id}_${k}`,type:k,content_type:N.type,title:`${N.type} - ${k}`,content:{text:j.text,scheduled_date:N.scheduled_date,hashtags:S(j.text)},status:N.status||"pending",moderation_result:N.moderation_result,workflow_run_id:N.workflow_runs[k]||"",generated_at:j.generated_at,approved_at:N.approved_at,rejected_at:N.rejected_at,rejection_reason:N.rejection_reason})})}),t(g),u(g)}}catch(n){console.error("Failed to load social media queue:",n),t([])}finally{d(!1)}},S=n=>(n.match(/#[\w]+/g)||[]).map(g=>g.substring(1)),u=n=>{const f=n.filter(k=>k.status==="pending").length,g=n.filter(k=>k.approved_at&&new Date(k.approved_at).toDateString()===new Date().toDateString()).length,N={twitter:n.filter(k=>k.type==="twitter").length,instagram:n.filter(k=>k.type==="instagram").length,linkedin:n.filter(k=>k.type==="linkedin").length,facebook:n.filter(k=>k.type==="facebook").length};i({pendingSocial:f,approvedToday:g,scheduledPosts:n.filter(k=>k.status==="approved").length,platforms:N})},h=async(n,f,g)=>{try{const N=a.find(l=>l.id===n);if(!N)return;const[k,j]=n.split("_");if(!(await fetch("/api/social-content/moderate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content_id:k,platform:j,action:f,reason:g,moderator:"admin",moderated_at:new Date().toISOString()})})).ok)throw new Error("Failed to update social content");t(l=>l.map(y=>y.id===n?{...y,status:f==="approve"?"approved":"rejected",approved_at:f==="approve"?new Date().toISOString():void 0,rejected_at:f==="reject"?new Date().toISOString():void 0,rejection_reason:g}:y)),U(`Social Content ${f==="approve"?"Approved":"Rejected"}`,`${j} content for ${N.content_type} has been ${f==="approve"?"approved":"rejected"}`);const B=a.map(l=>l.id===n?{...l,status:f==="approve"?"approved":"rejected"}:l);u(B)}catch(N){console.error("Social moderation failed:",N),F("Moderation Failed","Failed to process social media moderation. Please try again.")}},p=n=>{switch(n){case"twitter":return e.jsx(gt,{className:"w-5 h-5 text-blue-400"});case"instagram":return e.jsx(ht,{className:"w-5 h-5 text-pink-500"});case"linkedin":return e.jsx(ut,{className:"w-5 h-5 text-blue-600"});case"facebook":return e.jsx(xt,{className:"w-5 h-5 text-blue-800"});default:return e.jsx(se,{className:"w-5 h-5 text-gray-500"})}},w=n=>{switch(n){case"carnival":return"bg-purple-100 text-purple-800";case"recruitment":return"bg-blue-100 text-blue-800";case"alain_locke":return"bg-green-100 text-green-800";case"business_network":return"bg-orange-100 text-orange-800";case"website_launch":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},E=n=>new Date(n).toLocaleString(),T=a.filter(n=>n.status==="pending"),A=a.filter(n=>n.status==="approved");return o?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Loading social media queue..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Social"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:s.pendingSocial})]}),e.jsx(Q,{className:"w-8 h-8 text-purple-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Approved Today"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:s.approvedToday})]}),e.jsx(H,{className:"w-8 h-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Scheduled Posts"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:s.scheduledPosts})]}),e.jsx(O,{className:"w-8 h-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Content"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:a.length})]}),e.jsx(pe,{className:"w-8 h-8 text-orange-600"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Platform Breakdown"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(s.platforms).map(([n,f])=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[p(n),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 capitalize",children:n}),e.jsxs("p",{className:"text-sm text-gray-600",children:[f," items"]})]})]},n))})]}),T.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pending Social Media Content"}),e.jsx("p",{className:"text-gray-600",children:"Review and approve generated social media posts"})]}),e.jsx("div",{className:"divide-y divide-gray-200",children:T.map(n=>e.jsx("div",{className:"px-6 py-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[p(n.type),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w(n.content_type)}`,children:n.content_type.replace("_"," ").toUpperCase()}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Scheduled: ",E(n.content.scheduled_date)]})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-3",children:e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:n.content.text})}),n.content.hashtags&&n.content.hashtags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsx(mt,{className:"w-4 h-4 text-gray-400 mt-1"}),n.content.hashtags.map((f,g)=>e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:["#",f]},g))]}),n.moderation_result?.issues&&n.moderation_result.issues.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"text-sm font-medium text-red-600 mb-1",children:"Issues:"}),e.jsx("ul",{className:"text-sm text-red-600 list-disc list-inside",children:n.moderation_result.issues.map((f,g)=>e.jsx("li",{children:f},g))})]}),n.moderation_result?.recommendations&&n.moderation_result.recommendations.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-600 mb-1",children:"Recommendations:"}),e.jsx("ul",{className:"text-sm text-yellow-600 list-disc list-inside",children:n.moderation_result.recommendations.map((f,g)=>e.jsx("li",{children:f},g))})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Generated: ",E(n.generated_at)," • ",n.content.text.length," characters"]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-6",children:[e.jsxs("button",{onClick:()=>h(n.id,"approve"),className:"flex items-center gap-1 px-3 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(H,{className:"w-4 h-4"}),"Approve"]}),e.jsxs("button",{onClick:()=>{const f=prompt("Reason for rejection:");f&&h(n.id,"reject",f)},className:"flex items-center gap-1 px-3 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(re,{className:"w-4 h-4"}),"Reject"]}),e.jsxs("button",{onClick:()=>b(n),className:"flex items-center gap-1 px-3 py-2 bg-gray-600 text-white text-sm rounded-lg hover:bg-gray-700 transition-colors",children:[e.jsx(q,{className:"w-4 h-4"}),"Preview"]})]})]})},n.id))})]}),A.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recently Approved Content"}),e.jsx("p",{className:"text-gray-600",children:"Content ready for publishing"})]}),e.jsx("div",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto",children:A.slice(0,5).map(n=>e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[p(n.type),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w(n.content_type)}`,children:n.content_type.replace("_"," ").toUpperCase()}),e.jsxs("span",{className:"text-sm text-gray-900 truncate max-w-xs",children:[n.content.text.substring(0,60),"..."]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-600",children:"Approved"}),e.jsx("span",{className:"text-xs text-gray-500",children:n.approved_at&&E(n.approved_at)})]})]})},n.id))})]}),T.length===0&&A.length===0&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(se,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Social Media Content"}),e.jsx("p",{className:"text-gray-600",children:"No social media content found. Generate some content first!"})]})]})},Bt=()=>{const[a,t]=m.useState({pendingCount:12,todayActions:47,activeModerators:3,newsroomQueue:8,eventsQueue:4,communityQueue:0,socialQueue:0}),[s,i]=m.useState([]),[o,d]=m.useState("all"),[c,b]=m.useState(""),[C,S]=m.useState(!0),[u,h]=m.useState("traditional");m.useEffect(()=>{p()},[]);const p=async()=>{try{S(!0);const[n,f]=await Promise.all([fetch("/api/events").then(j=>j.json()),fetch("/api/articles").then(j=>j.json())]),g=[];n.success&&n.events&&n.events.filter(j=>j.status==="draft").forEach(j=>{g.push({id:j.id,type:"event",title:j.title,content:{description:j.description,date:j.date,time:j.time,location:j.location?.address||"TBD"},submittedBy:j.submittedVia==="chrome-extension"?"Chrome Extension":j.organizer,submittedAt:new Date(j.createdAt),status:"pending",flags:j.tags?.includes("community-submitted")?["community-submitted"]:[],priority:"medium"})}),f.success&&f.articles&&f.articles.filter(j=>j.status==="draft").forEach(j=>{g.push({id:j.id,type:"newsroom_article",title:j.title,content:{excerpt:j.description||j.excerpt},submittedBy:j.submittedVia==="chrome-extension"?"Chrome Extension":j.author,submittedAt:new Date(j.createdAt),status:"pending",flags:j.tags?.includes("community-submitted")?["community-submitted"]:[],priority:"medium"})}),g.sort((j,D)=>D.submittedAt.getTime()-j.submittedAt.getTime()),i(g);const N=g.filter(j=>j.type==="event").length,k=g.filter(j=>j.type==="newsroom_article").length;t({pendingCount:g.length,todayActions:0,activeModerators:1,newsroomQueue:k,eventsQueue:N,communityQueue:0})}catch(n){console.error("Failed to load moderation queue:",n),i([])}finally{S(!1)}},w=async(n,f,g)=>{try{const N=s.find(k=>k.id===n);if(!N)return;if(N.type==="event"){if(!(await fetch(`/api/events?id=${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:f==="approved"?"approved":"rejected",moderatorNotes:g,moderatedAt:new Date().toISOString(),moderatedBy:"admin"})})).ok)throw new Error("Failed to update event")}else if(N.type==="newsroom_article"&&!(await fetch(`/api/articles?id=${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:f==="approved"?"approved":"rejected",moderatorNotes:g,moderatedAt:new Date().toISOString(),moderatedBy:"admin"})})).ok)throw new Error("Failed to update article");i(k=>k.filter(j=>j.id!==n)),t(k=>({...k,pendingCount:k.pendingCount-1,todayActions:k.todayActions+1,newsroomQueue:N.type==="newsroom_article"?k.newsroomQueue-1:k.newsroomQueue,eventsQueue:N.type==="event"?k.eventsQueue-1:k.eventsQueue})),U(`${N.type==="event"?"Event":"Article"} ${f}`,`The ${N.type} has been ${f} successfully`)}catch(N){console.error("Moderation action failed:",N),F("Moderation Failed","Failed to process moderation action. Please try again.")}},E=n=>{switch(n){case"urgent":return"text-red-600 bg-red-50 border-red-200";case"high":return"text-orange-600 bg-orange-50 border-orange-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},T=n=>{switch(n){case"newsroom_article":return e.jsx(z,{className:"w-5 h-5"});case"event":return e.jsx(O,{className:"w-5 h-5"});case"community_story":return e.jsx(P,{className:"w-5 h-5"});case"comment":return e.jsx(je,{className:"w-5 h-5"});default:return e.jsx(z,{className:"w-5 h-5"})}},A=s.filter(n=>{const f=o==="all"||n.type===o,g=c===""||n.title.toLowerCase().includes(c.toLowerCase())||n.submittedBy.toLowerCase().includes(c.toLowerCase());return f&&g&&n.status==="pending"});return C?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading moderation dashboard..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"py-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"BLKOUT Moderation Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Community content management and safety"}),e.jsxs("div",{className:"flex space-x-1 mt-6",children:[e.jsx("button",{onClick:()=>h("traditional"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${u==="traditional"?"bg-purple-600 text-white":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),"Traditional Content"]})}),e.jsx("button",{onClick:()=>h("social"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${u==="social"?"bg-purple-600 text-white":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"w-4 h-4"}),"Social Media"]})})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:u==="social"?e.jsx(Ft,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Review"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:a.pendingCount})]}),e.jsx(Q,{className:"w-8 h-8 text-purple-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Today's Actions"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:a.todayActions})]}),e.jsx(pe,{className:"w-8 h-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Moderators"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:a.activeModerators})]}),e.jsx(P,{className:"w-8 h-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Flagged Items"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:s.filter(n=>n.status==="flagged").length})]}),e.jsx(pt,{className:"w-8 h-8 text-red-600"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Newsroom Queue"}),e.jsx(z,{className:"w-6 h-6 text-purple-600"})]}),e.jsx("p",{className:"text-3xl font-bold text-purple-600 mb-2",children:a.newsroomQueue}),e.jsx("button",{className:"w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors",children:"Review Articles"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Events Queue"}),e.jsx(O,{className:"w-6 h-6 text-blue-600"})]}),e.jsx("p",{className:"text-3xl font-bold text-blue-600 mb-2",children:a.eventsQueue}),e.jsx("button",{className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Review Events"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Community Queue"}),e.jsx(P,{className:"w-6 h-6 text-green-600"})]}),e.jsx("p",{className:"text-3xl font-bold text-green-600 mb-2",children:a.communityQueue}),e.jsx("button",{className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors",children:"Review Stories"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Pe,{className:"w-5 h-5 text-gray-400"}),e.jsxs("select",{value:o,onChange:n=>d(n.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"All Content"}),e.jsx("option",{value:"newsroom_article",children:"Newsroom Articles"}),e.jsx("option",{value:"event",children:"Events"}),e.jsx("option",{value:"community_story",children:"Community Stories"}),e.jsx("option",{value:"comment",children:"Comments"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ge,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),e.jsx("input",{type:"text",placeholder:"Search content...",value:c,onChange:n=>b(n.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm w-full sm:w-80"})]})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:A.length===0?e.jsxs("div",{className:"px-6 py-12 text-center",children:[e.jsx(Q,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No items in queue"}),e.jsx("p",{className:"text-gray-600",children:"All content has been reviewed. Great work!"})]}):A.map(n=>e.jsx("div",{className:"px-6 py-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[T(n.type),e.jsx("h3",{className:"font-medium text-gray-900",children:n.title}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${E(n.priority)}`,children:n.priority.toUpperCase()})]}),e.jsxs("p",{className:"text-gray-600 mb-3",children:[n.type==="newsroom_article"&&n.content.excerpt,n.type==="event"&&`${new Date(n.content.date).toLocaleDateString()} - ${n.content.location}`,n.type==="community_story"&&n.content.excerpt]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:n.flags.map((f,g)=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:f},g))}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Submitted by ",n.submittedBy," • ",new Date(n.submittedAt).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-6",children:[e.jsxs("button",{onClick:()=>w(n.id,"approved"),className:"flex items-center gap-1 px-3 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(H,{className:"w-4 h-4"}),"Approve"]}),e.jsxs("button",{onClick:()=>{const f=prompt("Reason for rejection:");f&&w(n.id,"rejected",f)},className:"flex items-center gap-1 px-3 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(re,{className:"w-4 h-4"}),"Reject"]}),e.jsxs("button",{onClick:()=>w(n.id,"flagged"),className:"flex items-center gap-1 px-3 py-2 bg-yellow-600 text-white text-sm rounded-lg hover:bg-yellow-700 transition-colors",children:[e.jsx(bt,{className:"w-4 h-4"}),"Flag"]}),e.jsxs("button",{className:"flex items-center gap-1 px-3 py-2 bg-gray-600 text-white text-sm rounded-lg hover:bg-gray-700 transition-colors",children:[e.jsx(q,{className:"w-4 h-4"}),"Preview"]})]})]})},n.id))})]})]})})]})},Mt={showToast:!0,logToConsole:!0,retryable:!0,fallbackMessage:"An unexpected error occurred. Please try again."},ze=(a={})=>{const t={...Mt,...a},[s,i]=m.useState(null),o=m.useCallback((u,h)=>{let p;if(u instanceof Error?p={hasError:!0,message:u.message||t.fallbackMessage,details:u.stack,retryable:t.retryable}:typeof u=="string"?p={hasError:!0,message:u,retryable:t.retryable}:u?.message?p={hasError:!0,message:u.message||t.fallbackMessage,code:u.code||u.status,details:u.details||JSON.stringify(u),retryable:u.retryable??t.retryable}:p={hasError:!0,message:t.fallbackMessage,details:JSON.stringify(u),retryable:t.retryable},t.logToConsole){const w=h?`[${h}]`:"[Error]";console.error(`${w}:`,u)}return i(p),t.showToast&&console.warn("Toast notification:",p.message),p},[t]),d=m.useCallback(()=>{i(null)},[]),c=m.useCallback(u=>{if(s?.retryable){d();try{const h=u();h instanceof Promise&&h.catch(p=>o(p,"Retry failed"))}catch(h){o(h,"Retry failed")}}},[s,d,o]),b=m.useCallback((u,h)=>{const p=h?`API Error - ${h}`:"API Error";return u?.response?.status===401?o("Authentication required. Please sign in.",p):u?.response?.status===403?o("Access denied. You do not have permission for this action.",p):u?.response?.status===404?o("The requested resource was not found.",p):u?.response?.status===429?o("Too many requests. Please wait a moment and try again.",p):u?.response?.status>=500?o("Server error. Please try again later.",p):u?.code==="NETWORK_ERROR"||u?.message?.includes("fetch")?o("Network connection error. Please check your internet connection.",p):o(u,p)},[o]),C=m.useCallback((u,h)=>{const p=h?`Supabase Error - ${h}`:"Supabase Error";return u?.code==="23505"?o("This item already exists.",p):u?.code==="23503"?o("Cannot perform this action due to related data.",p):u?.code==="42501"?o("Insufficient permissions for this operation.",p):u?.message?.includes("JWT")?o("Authentication expired. Please sign in again.",p):o(u,p)},[o]),S=m.useCallback(u=>{const h=Object.values(u)[0];return o(h||"Please check your input and try again.","Form Validation")},[o]);return{error:s,hasError:!!s,handleError:o,handleAPIError:b,handleSupabaseError:C,handleFormValidationError:S,clearError:d,retry:c}};class zt{baseUrl;timeout;retries;defaultHeaders;authToken=null;constructor(t={}){this.baseUrl=t.baseUrl||this.detectApiUrl(),this.timeout=t.timeout||1e4,this.retries=t.retries||3,this.defaultHeaders={"Content-Type":"application/json",Accept:"application/json",...t.headers},this.loadAuthToken()}detectApiUrl(){return typeof window<"u"&&window.location.hostname==="localhost"&&(window.location.port==="5173"||window.location.port==="3000")?"http://localhost:3000/api":"/api"}loadAuthToken(){try{const t=localStorage.getItem("blkout_auth_token");t&&(this.authToken=t,this.defaultHeaders.Authorization=`Bearer ${t}`)}catch(t){console.warn("Failed to load auth token:",t)}}setAuthToken(t){this.authToken=t,t?(this.defaultHeaders.Authorization=`Bearer ${t}`,localStorage.setItem("blkout_auth_token",t)):(delete this.defaultHeaders.Authorization,localStorage.removeItem("blkout_auth_token"))}async makeRequest(t,s={},i=0){const o=`${this.baseUrl}${t}`,d={...s,headers:{...this.defaultHeaders,...s.headers},signal:AbortSignal.timeout(this.timeout)};try{console.log(`🌐 API Request: ${s.method||"GET"} ${o}`);const c=await fetch(o,d);if(!c.ok){if(c.status===401)throw this.setAuthToken(null),new Error("Authentication required");if(c.status===403)throw new Error("Access denied");if(c.status===404)throw new Error("Resource not found");if(c.status>=500)throw new Error("Server error");try{const C=await c.json();throw new Error(C.message||C.error||`HTTP ${c.status}`)}catch{throw new Error(`HTTP ${c.status}: ${c.statusText}`)}}const b=await c.json();return console.log(`✅ API Success: ${s.method||"GET"} ${o}`),b}catch(c){return console.error(`❌ API Error: ${s.method||"GET"} ${o}`,c),i<this.retries&&this.isRetryableError(c)?(console.log(`🔄 Retrying request (${i+1}/${this.retries})`),await this.delay(Math.pow(2,i)*1e3),this.makeRequest(t,s,i+1)):{success:!1,error:c instanceof Error?c.message:"Unknown error occurred",data:void 0}}}isRetryableError(t){return t instanceof TypeError&&t.message.includes("fetch")?!0:(t.name==="AbortError",!1)}delay(t){return new Promise(s=>setTimeout(s,t))}buildQueryString(t){const s=new URLSearchParams;Object.entries(t).forEach(([o,d])=>{d!=null&&d!==""&&(Array.isArray(d)?d.forEach(c=>s.append(o,c.toString())):s.append(o,d.toString()))});const i=s.toString();return i?`?${i}`:""}async checkHealth(){try{const t=await this.makeRequest("/health");return{healthy:t.success,backend:this.baseUrl,timestamp:t.data?.timestamp||new Date().toISOString()}}catch{return{healthy:!1,backend:this.baseUrl,timestamp:new Date().toISOString()}}}async getArticles(t={}){const s=this.buildQueryString({page:t.page||1,limit:t.limit||20,category:t.category,status:t.status,author_id:t.author_id,search:t.search,sort:t.sort||"published_at",order:t.order||"desc"});return this.makeRequest(`/newsroom/articles${s}`)}async getArticle(t){return this.makeRequest(`/newsroom/articles/${t}`)}async createArticle(t){return this.makeRequest("/newsroom/articles",{method:"POST",body:JSON.stringify(t)})}async updateArticle(t,s){return this.makeRequest(`/newsroom/articles/${t}`,{method:"PUT",body:JSON.stringify(s)})}async deleteArticle(t){return this.makeRequest(`/newsroom/articles/${t}`,{method:"DELETE"})}async getEvents(t={}){const s=this.buildQueryString({page:t.page||1,limit:t.limit||20,start_date:t.start_date,end_date:t.end_date,event_type:t.event_type,location:t.location,status:t.status,organizer_id:t.organizer_id,search:t.search,sort:t.sort||"start_date",order:t.order||"asc"});return this.makeRequest(`/events${s}`)}async getEvent(t){return this.makeRequest(`/events/${t}`)}async createEvent(t){return this.makeRequest("/events",{method:"POST",body:JSON.stringify(t)})}async updateEvent(t,s){return this.makeRequest(`/events/${t}`,{method:"PUT",body:JSON.stringify(s)})}async deleteEvent(t){return this.makeRequest(`/events/${t}`,{method:"DELETE"})}async signIn(t,s){return this.makeRequest("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:s})})}async signOut(){const t=await this.makeRequest("/auth/logout",{method:"POST"});return t.success&&this.setAuthToken(null),t}async getCommunityStats(){return this.makeRequest("/community/stats")}async getCommunityDocumentation(){return this.makeRequest("/documentation")}async uploadFile(t,s="image"){const i=new FormData;i.append("file",t),i.append("type",s);const o={...this.defaultHeaders};return delete o["Content-Type"],this.makeRequest("/upload",{method:"POST",body:i,headers:o})}}const $t=new zt;let Ht;try{Ht=require("react")}catch{}const me={"Breaking News":{color:"bg-red-600",textColor:"text-red-400",gradient:"from-red-500 via-red-600 to-red-700",glowColor:"shadow-red-500/25"},Analysis:{color:"bg-indigo-600",textColor:"text-indigo-400",gradient:"from-indigo-500 via-indigo-600 to-indigo-700",glowColor:"shadow-indigo-500/25"},"Community News":{color:"bg-emerald-600",textColor:"text-emerald-400",gradient:"from-emerald-500 via-emerald-600 to-emerald-700",glowColor:"shadow-emerald-500/25"},"Policy Update":{color:"bg-slate-600",textColor:"text-slate-400",gradient:"from-slate-500 via-slate-600 to-slate-700",glowColor:"shadow-slate-500/25"},International:{color:"bg-violet-600",textColor:"text-violet-400",gradient:"from-violet-500 via-violet-600 to-violet-700",glowColor:"shadow-violet-500/25"}},qt=[{id:"fallback_001",title:"BLKOUT Newsroom Loading",excerpt:"Loading live content from our community contributors and newsroom team.",category:"System",author:"BLKOUT Team",publishedAt:new Date().toISOString(),image:"/images/squared/WELLDEF_SQUARED.png",featured:!1,tags:["loading"],priority:"medium",readTime:1,isBreaking:!1,source:"System"}],Qt=({backendStatus:a})=>e.jsxs("section",{className:"relative py-24 bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-emerald-500 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-48 h-48 bg-violet-500 rounded-full blur-3xl"})]}),e.jsx("div",{className:"relative z-10 max-w-6xl mx-auto px-8 text-center",children:e.jsxs(x.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[e.jsxs(x.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2},className:"flex items-center justify-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-emerald-600 to-indigo-600 flex items-center justify-center mr-6",children:e.jsx(ee,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-black heading-block uppercase",children:[e.jsx("span",{className:"bg-gradient-to-r from-emerald-400 to-indigo-400 bg-clip-text text-transparent",children:"BLKOUT"}),e.jsx("span",{className:"bg-gradient-to-r from-violet-400 to-slate-400 bg-clip-text text-transparent ml-2",children:"NEWSROOM"})]}),e.jsx("p",{className:"text-indigo-300 font-mono uppercase tracking-wider text-sm",children:"COMMUNITY NEWS & LIBERATION ANALYSIS"})]})]}),e.jsx(x.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"text-xl md:text-2xl text-indigo-100 max-w-4xl mx-auto leading-relaxed font-light mb-12",children:"Curated news, analysis, and community updates that matter to Black queer liberation. Stay informed about policy changes, community events, and movement developments."}),e.jsxs(x.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},className:"flex items-center justify-center space-x-4 mb-12",children:[a==="checking"&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(te,{size:"sm",color:"indigo"}),e.jsx("span",{className:"text-indigo-400 font-bold heading-block text-sm uppercase",children:"CONNECTING TO NEWSROOM"})]}),a==="connected"&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(H,{className:"w-5 h-5 text-emerald-400"}),e.jsx("span",{className:"text-emerald-400 font-bold heading-block text-sm uppercase",children:"NEWSROOM LIVE"}),e.jsxs("div",{className:"flex items-center text-indigo-300 text-sm font-light",children:[e.jsx("span",{children:"• Real-time updates active"}),lastUpdated&&e.jsxs("span",{className:"ml-3 text-xs",children:["Last updated: ",lastUpdated.toLocaleTimeString()]})]})]}),a==="offline"&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ue,{className:"w-5 h-5 text-amber-400"}),e.jsx("span",{className:"text-amber-400 font-bold heading-block text-sm uppercase",children:"USING CACHED CONTENT"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-indigo-300 text-sm font-light",children:"• Showing recent stories"}),e.jsxs("button",{onClick:handleRetry,className:"text-amber-400 hover:text-amber-300 text-sm font-medium flex items-center",children:[e.jsx(K,{className:"w-4 h-4 mr-1"}),"Retry"]})]})]})]}),hasError&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-4xl mx-auto mb-12",children:e.jsx("div",{className:"bg-red-900/30 backdrop-blur-sm border border-red-700/30 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx(Fe,{className:"w-6 h-6 text-red-400 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-red-300 font-bold text-lg mb-2",children:"Connection Error"}),e.jsx("p",{className:"text-red-200 mb-4",children:error?.message}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:handleRetry,className:"flex items-center px-4 py-2 bg-red-600 hover:bg-red-500 text-white font-medium rounded-lg transition-colors",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Retry Connection"]}),e.jsx("button",{onClick:clearError,className:"text-red-300 hover:text-red-200 font-medium",children:"Dismiss"}),retryCount>0&&e.jsxs("span",{className:"text-red-300 text-sm",children:["Retry attempts: ",retryCount]})]})]})]})})}),e.jsx(x.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.8},className:"grid grid-cols-3 gap-8 max-w-2xl mx-auto",children:[{label:"STORIES TODAY",value:"12"},{label:"SOURCES MONITORED",value:"47"},{label:"COMMUNITY UPDATES",value:"8"}].map((t,s)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl md:text-4xl font-black text-white heading-block mb-2",children:t.value}),e.jsx("div",{className:"text-sm text-indigo-300 font-mono uppercase tracking-wider",children:t.label})]},s))})]})})]}),Gt=({selectedCategory:a,onCategorySelect:t})=>e.jsx("section",{className:"py-16 bg-indigo-50/5 backdrop-blur-sm border-y border-indigo-800/30",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("h2",{className:"text-3xl md:text-4xl font-black heading-block mb-4 uppercase",children:[e.jsx("span",{className:"bg-gradient-to-r from-emerald-400 to-violet-400 bg-clip-text text-transparent",children:"NEWS"}),e.jsx("span",{className:"bg-gradient-to-r from-indigo-400 to-slate-400 bg-clip-text text-transparent ml-4",children:"CATEGORIES"})]}),e.jsx("p",{className:"text-indigo-200 font-light text-lg",children:"Stay informed across all areas that impact our community"})]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-4",children:["All",...Object.keys(me)].map(s=>e.jsx(x.button,{onClick:()=>t(s),whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},className:`px-6 py-3 font-bold text-sm transition-all duration-300 heading-block uppercase ${a===s?"bg-gradient-to-r from-indigo-600 to-violet-600 text-white":"bg-indigo-900/30 text-indigo-300 hover:bg-indigo-800/50 hover:text-white border border-indigo-700/30"}`,children:s},s))})]})}),Jt=({articles:a,loading:t,onRefresh:s})=>e.jsx("section",{className:"py-24",children:e.jsx("div",{className:"max-w-6xl mx-auto px-8",children:t?e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-24",children:[e.jsx(te,{size:"xl",color:"indigo",text:"Loading Articles"}),e.jsx("p",{className:"text-indigo-200 font-light mt-6",children:"Fetching the latest community news and updates..."})]}):a.length===0?e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-24",children:[e.jsx(he,{className:"w-16 h-16 text-indigo-400 mx-auto mb-6"}),e.jsx("h3",{className:"text-2xl font-black text-white heading-block mb-4 uppercase",children:"NO ARTICLES AVAILABLE"}),e.jsx("p",{className:"text-indigo-200 font-light mb-8",children:"Newsroom backend is connecting. Articles will appear here as they are aggregated."}),e.jsxs(x.button,{onClick:s,whileHover:{scale:1.02},whileTap:{scale:.98},className:"px-8 py-3 bg-indigo-600 text-white font-bold hover:bg-indigo-500 transition-colors heading-block uppercase flex items-center mx-auto",children:[e.jsx(K,{className:"w-4 h-4 mr-3"}),"REFRESH"]})]}):e.jsx("div",{className:"space-y-8",children:a.map((i,o)=>{const d=me[i.category]||me.Analysis;return e.jsx(x.article,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:o*.1},className:"bg-indigo-900/20 backdrop-blur-sm border border-indigo-700/20 overflow-hidden hover:bg-indigo-900/40 transition-all duration-500 cursor-pointer group",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.image&&e.jsx("div",{className:"lg:col-span-1 aspect-[4/3] overflow-hidden",children:e.jsx("img",{src:i.image,alt:i.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"})}),e.jsxs("div",{className:`${i.image?"lg:col-span-2":"lg:col-span-3"} p-8`,children:[e.jsxs("div",{className:"flex items-center mb-4",children:[i.isBreaking&&e.jsx("span",{className:"px-3 py-1 bg-red-600 text-white text-xs font-bold heading-block uppercase mr-4 animate-pulse",children:"BREAKING"}),e.jsx("div",{className:`w-3 h-3 bg-gradient-to-r ${d.gradient} mr-3`}),e.jsx("span",{className:"text-indigo-300 font-mono uppercase tracking-wider text-sm",children:i.category}),e.jsx("span",{className:"mx-3 text-indigo-600",children:"•"}),e.jsx("span",{className:"text-sm text-indigo-400",children:i.source})]}),e.jsx("h2",{className:"text-2xl md:text-3xl font-black heading-block mb-4 leading-tight group-hover:text-white transition-colors",children:e.jsx("span",{className:`bg-gradient-to-r ${d.gradient} bg-clip-text text-transparent group-hover:text-white`,children:i.title})}),e.jsx("p",{className:"text-indigo-100 mb-6 leading-relaxed font-light text-lg",children:i.excerpt}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6 text-sm text-indigo-300",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),i.readTime," min read"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),i.author]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),new Date(i.publishedAt).toLocaleDateString()]})]}),e.jsxs(x.button,{whileHover:{x:5},className:"flex items-center text-indigo-400 hover:text-white transition-colors font-bold heading-block uppercase text-sm",children:["READ FULL STORY",e.jsx(fe,{className:"w-4 h-4 ml-2"})]})]})]})]})},i.id)})})})});function Kt(){const[a,t]=m.useState(qt),[s,i]=m.useState(!0),[o,d]=m.useState("checking"),[c,b]=m.useState("All"),[C,S]=m.useState(0),[u,h]=m.useState(null),{handleAPIError:p,clearError:w,retry:E}=ze({showToast:!0,retryable:!0}),T=g=>{const N=g.profiles?.full_name||"BLKOUT Team",k=N.split(" ").map(j=>j[0]).join("").toUpperCase();return{...g,readTime:Math.max(1,Math.ceil((g.content?.length||0)/1e3)),isBreaking:g.status==="published"&&g.featured_image!==null,publishedAtFormatted:new Date(g.published_at||g.created_at).toLocaleDateString(),authorName:N,authorInitials:k,author:N,publishedAt:g.published_at||g.created_at,image:g.featured_image||"/images/squared/WELLDEF_SQUARED.png",featured:!!g.featured_image,priority:"medium",source:"BLKOUT Newsroom"}},A=async()=>{try{w(),i(!0),d("checking"),console.log("🔄 Fetching articles from Supabase API...");const g=await $t.getArticles({status:"published",sort:"published_at",order:"desc",limit:20});if(console.log("📊 Articles API response:",g),g.success&&g.data&&Array.isArray(g.data)){const N=g.data.map(T);console.log("✅ Articles transformed successfully:",N.length),N.length>0?(t(N),d("connected")):(console.log("📰 No published articles found, keeping fallback content"),d("connected")),h(new Date)}else throw new Error(g.error||"Failed to fetch articles")}catch(g){console.error("❌ Error fetching articles:",g),p(g,"newsroom API"),d("offline")}finally{i(!1)}};m.useEffect(()=>{A()},[]);const n=()=>{S(g=>g+1),E(()=>A())},f=a.filter(g=>c==="All"||g.category===c);return e.jsxs(de,{children:[e.jsx(ie,{pageName:"Newsroom",dependencies:["Supabase","API Client"]}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900",children:[e.jsx(W,{}),e.jsx(Qt,{backendStatus:o}),e.jsx(Gt,{selectedCategory:c,onCategorySelect:b}),e.jsx(de,{onError:(g,N)=>{console.error("NewsArticlesGrid Error:",g,N),p(g,"NewsArticlesGrid")},children:e.jsx(Jt,{articles:f,loading:s,onRefresh:n})}),e.jsx(ue,{})]})]})}class Wt{baseUrl;isConnected=!1;supabaseConnected=!1;useSupabase=!0;constructor(){this.baseUrl="/api",this.checkSupabaseConnection()}async checkSupabaseConnection(){try{const{connected:t}=await ye.testConnection();return this.supabaseConnected=t,t?console.log("✅ Supabase events connection established"):console.warn("⚠️ Supabase events connection failed, falling back to legacy backend"),t}catch(t){return console.error("❌ Supabase events connection test failed:",t),this.supabaseConnected=!1,!1}}async getAllEvents(){if(this.useSupabase&&this.supabaseConnected)try{return await this.getEventsFromSupabase()}catch(t){console.warn("Supabase events fetch failed, trying legacy backend:",t)}try{const t=await fetch(`${this.baseUrl}/events`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();return s.success&&s.events?s.events.map(i=>({id:i.id,title:i.title,description:i.description,date:i.date,startTime:i.time,endTime:i.endTime,location:typeof i.location=="string"?i.location:i.location?.address||"TBD",url:i.url||i.registrationUrl,source:i.category?.toLowerCase()||"community",status:i.status==="published"?"approved":i.status,cost:i.cost||(i.capacity,"Free"),organizer:i.organizer,image:i.image,tags:i.tags||[],createdAt:i.createdAt,updatedAt:i.updatedAt||i.createdAt})):[]}catch(t){return console.error("❌ Events backend failed, using mock data:",t),this.getMockEvents()}}async getEventsFromSupabase(t){let s=$.from("events").select(`
        *,
        organizer:contacts(name)
      `).order("event_date",{ascending:!0});t?.source&&t.source!=="all"&&(s=s.eq("source",t.source)),t?.status&&t.status!=="all"&&(t.status==="pending"?s=s.in("status",["draft","reviewing"]):t.status==="approved"?s=s.eq("status","published"):t.status==="rejected"?s=s.eq("status","archived"):s=s.eq("status",t.status));const{data:i,error:o}=await s;if(o)throw o;const d=(i||[]).map(c=>({id:c.id,title:c.name,description:c.description,date:c.event_date,startTime:this.extractTimeFromDate(c.event_date),endTime:void 0,location:typeof c.location=="string"?c.location:JSON.stringify(c.location),url:c.source_url||c.registration_link,source:c.source,status:this.mapSupabaseStatus(c.status),cost:c.price||"Free",organizer:c.organizer?.name||c.organizer_name||"Unknown Organizer",image:c.image_url||void 0,tags:c.tags||[],createdAt:c.created_at,updatedAt:c.updated_at}));return this.applyClientFilters(d,t)}mapSupabaseStatus(t){switch(t){case"published":return"approved";case"draft":case"reviewing":return"pending";case"archived":return"rejected";default:return"pending"}}extractTimeFromDate(t){try{const s=new Date(t);return s.getHours()===0&&s.getMinutes()===0?void 0:s.toTimeString().substring(0,5)}catch{return}}applyClientFilters(t,s){return s?t.filter(i=>{if(s.dateRange!=="all"){const o=new Date(i.date),d=new Date,c=Math.ceil((o.getTime()-d.getTime())/(1e3*60*60*24));if(s.dateRange==="today"&&c!==0||s.dateRange==="week"&&c>7||s.dateRange==="month"&&c>30)return!1}if(s.location&&!i.location.toLowerCase().includes(s.location.toLowerCase()))return!1;if(s.searchTerm){const o=s.searchTerm.toLowerCase();return i.title.toLowerCase().includes(o)||i.description.toLowerCase().includes(o)||i.tags&&i.tags.some(d=>d.toLowerCase().includes(o))}return!0}):t}async getEventStats(){if(this.useSupabase&&this.supabaseConnected)try{return await this.getStatsFromSupabase()}catch(t){console.warn("Supabase stats fetch failed, trying legacy backend:",t)}try{const t=await fetch(`${this.baseUrl}/events/stats`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){console.warn("Events stats not available, using mock data:",t);const s=await this.getMockEvents();return{pending:s.filter(i=>i.status==="pending").length,approved:s.filter(i=>i.status==="approved").length,rejected:s.filter(i=>i.status==="rejected").length,total:s.length}}}async getStatsFromSupabase(){const{data:t,error:s}=await $.from("events").select("status");return s||!t?{pending:0,approved:0,rejected:0,total:0}:t.reduce((o,d)=>(o.total++,(d.status==="draft"||d.status==="reviewing")&&o.pending++,d.status==="published"&&o.approved++,d.status==="archived"&&o.rejected++,o),{pending:0,approved:0,rejected:0,total:0})}async submitEvent(t){if(this.useSupabase&&this.supabaseConnected)try{return await this.submitEventToSupabase(t)}catch(s){console.warn("Supabase event submission failed, trying legacy backend:",s)}try{const s=await fetch(`${this.baseUrl}/events`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(s){throw console.error("Failed to submit event:",s),s}}async submitEventToSupabase(t){let s=null;if(t.organizer){const{data:d}=await $.from("contacts").select("id").eq("name",t.organizer).single();if(d)s=d.id;else{const{data:c,error:b}=await $.from("contacts").insert({name:t.organizer,email:`${t.organizer.toLowerCase().replace(/\s+/g,".")}@example.com`}).select().single();!b&&c&&(s=c.id)}}const{data:i,error:o}=await $.from("events").insert({name:t.title||"",description:t.description||"",event_date:t.date||new Date().toISOString(),location:t.location||"TBD",source:t.source||"community",source_url:t.url,organizer_id:s,organizer_name:t.organizer,tags:t.tags||[],status:"draft",scraped_date:new Date().toISOString(),image_url:t.image,price:t.cost,registration_link:t.url}).select().single();if(o)throw o;return{id:i.id,title:i.name,description:i.description,date:i.event_date,location:typeof i.location=="string"?i.location:JSON.stringify(i.location),url:i.source_url||i.registration_link,source:i.source,status:this.mapSupabaseStatus(i.status),cost:i.price||"Free",organizer:i.organizer_name||"Unknown Organizer",image:i.image_url||void 0,tags:i.tags||[],createdAt:i.created_at,updatedAt:i.updated_at}}async updateEventStatus(t,s){if(!this.useSupabase||!this.supabaseConnected)throw new Error("Event status updates require Supabase connection");const i=s==="approved"?"published":s==="rejected"?"archived":"draft",{error:o}=await $.from("events").update({status:i,listed_date:s==="approved"?new Date().toISOString():null}).eq("id",t);return!o}async deleteEvent(t){if(!this.useSupabase||!this.supabaseConnected)throw new Error("Event deletion requires Supabase connection");const{error:s}=await $.from("events").delete().eq("id",t);return!s}async updateEvent(t,s){if(!this.useSupabase||!this.supabaseConnected)throw new Error("Event updates require Supabase connection");const{data:i,error:o}=await $.from("events").update({name:s.title,description:s.description,event_date:s.date,location:s.location,organizer_name:s.organizer,tags:s.tags,price:s.cost,image_url:s.image,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(o)throw o;return i?this.transformSupabaseEvent(i):null}transformSupabaseEvent(t){return{id:t.id,title:t.name,description:t.description,date:t.event_date,startTime:this.extractTimeFromDate(t.event_date),location:typeof t.location=="string"?t.location:JSON.stringify(t.location),url:t.source_url||t.registration_link,source:t.source,status:this.mapSupabaseStatus(t.status),cost:t.price||"Free",organizer:t.organizer_name||"Unknown Organizer",image:t.image_url||void 0,tags:t.tags||[],createdAt:t.created_at,updatedAt:t.updated_at}}async checkBackendHealth(){if(this.useSupabase&&(await this.checkSupabaseConnection(),this.supabaseConnected))return{available:!0,url:"supabase",source:"supabase"};try{return{available:(await fetch(`${this.baseUrl}/health`,{method:"GET"})).ok,url:this.baseUrl,source:"legacy"}}catch{return{available:!1,url:this.baseUrl,source:"fallback"}}}subscribeToEventUpdates(t){return!this.useSupabase||!this.supabaseConnected?(console.warn("Real-time subscriptions require Supabase connection"),null):ye.subscribeToEvents(t)}getConnectionStatus(){return{supabase:this.supabaseConnected,legacy:this.isConnected,primary:this.supabaseConnected?"supabase":this.isConnected?"legacy":"fallback"}}setPreferSupabase(t){this.useSupabase=t}getMockEvents(){return[{id:"1",title:"Black QTIPOC Community Gathering",description:"Monthly community meetup for Black QTIPOC folks to connect, share resources, and build community. Join us for food, conversation, and mutual support.",date:"2025-08-15",startTime:"18:00",endTime:"21:00",location:"Community Center, Brixton, London",url:"https://www.eventbrite.com/e/black-qtipoc-community-gathering-tickets",source:"community",status:"approved",organizer:"BLKOUT Community",tags:["community","networking","support","social"],createdAt:"2025-07-31",updatedAt:"2025-07-31",cost:"Free"},{id:"2",title:"Liberation Workshop Series: Part 1",description:"Educational workshop exploring liberation theory and practice for Black queer and trans communities. This first session covers historical foundations.",date:"2025-08-22",startTime:"14:00",endTime:"17:00",location:"Online via Zoom",url:"https://liberation-collective.org/workshops/part-1",source:"education",status:"approved",organizer:"Liberation Collective",tags:["education","workshop","liberation","theory"],createdAt:"2025-07-31",updatedAt:"2025-07-31",cost:"Sliding scale £5-£25"},{id:"3",title:"Black Trans Joy Celebration",description:"A celebration of Black trans joy, resilience, and community. Music, art, performance, and good vibes. All Black trans and gender non-conforming folks welcome.",date:"2025-08-29",startTime:"19:00",endTime:"23:00",location:"South London Community Space",url:"https://blacktranscollectiveuk.org/events/joy-celebration",source:"celebration",status:"approved",organizer:"Black Trans Collective UK",tags:["celebration","trans","joy","performance","music"],createdAt:"2025-07-31",updatedAt:"2025-07-31",cost:"Free with donations welcome"},{id:"4",title:"Wellness Wednesday: Self-Care for Activists",description:"Monthly wellness session focused on self-care practices for Black QTIPOC activists. Meditation, movement, and mutual care practices.",date:"2025-09-05",startTime:"18:30",endTime:"20:30",location:"East London Wellness Center",url:"https://healingjusticecollective.org/wellness-wednesday",source:"wellness",status:"approved",organizer:"Healing Justice Collective",tags:["wellness","self-care","meditation","activism"],createdAt:"2025-07-31",updatedAt:"2025-07-31",cost:"Free"},{id:"5",title:"Queer Black History Walking Tour",description:"Guided walking tour exploring Black queer history in London. Learn about historical figures, locations, and community spaces that shaped our heritage.",date:"2025-09-12",startTime:"11:00",endTime:"13:30",location:"Starting from Piccadilly Circus, London",url:"https://blackhistorywalks.uk/queer-history-tour",source:"education",status:"approved",organizer:"Black History Walks UK",tags:["history","education","walking-tour","heritage"],createdAt:"2025-07-31",updatedAt:"2025-07-31",cost:"£15 (concessions available)"},{id:"6",title:"Community Skill Share: Digital Security",description:"Learn essential digital security skills for activists and community organizers. Covers secure communication, privacy tools, and online safety.",date:"2025-09-19",startTime:"15:00",endTime:"18:00",location:"North London Library, Digital Hub",url:"https://techjusticecollective.org/digital-security-workshop",source:"education",status:"approved",organizer:"Tech Justice Collective",tags:["technology","security","education","skills"],createdAt:"2025-07-31",updatedAt:"2025-07-31",cost:"Free"}]}}const oe=new Wt,Vt=({event:a,isOpen:t,onClose:s})=>{if(!t||!a)return null;const i=d=>new Date(d).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),o=d=>{if(!d)return"";const[c,b]=d.split(":"),C=new Date;return C.setHours(parseInt(c),parseInt(b)),C.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})};return e.jsx(x.div,{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s,children:e.jsxs(x.div,{className:"bg-yellow-900/90 backdrop-blur-sm border border-yellow-600/40 rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-8",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:d=>d.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-yellow-100",children:a.title}),e.jsx("button",{onClick:s,className:"text-yellow-400 hover:text-yellow-300 text-2xl",children:"×"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-yellow-200 mb-3",children:"Event Details"}),e.jsx("p",{className:"text-yellow-100 leading-relaxed",children:a.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-yellow-200",children:[e.jsx(O,{className:"w-5 h-5 mr-3 text-yellow-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:i(a.date)}),a.startTime&&e.jsxs("div",{className:"text-sm",children:[o(a.startTime),a.endTime&&` - ${o(a.endTime)}`]})]})]}),a.location&&e.jsxs("div",{className:"flex items-center text-yellow-200",children:[e.jsx("svg",{className:"w-5 h-5 mr-3 text-yellow-400 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),e.jsx("span",{children:a.location})]}),a.organizer&&e.jsxs("div",{className:"flex items-center text-yellow-200",children:[e.jsx(be,{className:"w-5 h-5 mr-3 text-yellow-400"}),e.jsx("span",{children:a.organizer})]}),a.cost&&e.jsxs("div",{className:"flex items-center text-yellow-200",children:[e.jsx("svg",{className:"w-5 h-5 mr-3 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),e.jsx("span",{children:a.cost})]})]}),e.jsx("div",{children:a.tags&&a.tags.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-yellow-200 mb-3",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.tags.map((d,c)=>e.jsxs("span",{className:"px-3 py-1 text-sm bg-yellow-600/40 text-yellow-100 rounded-full border border-yellow-500/50",children:["#",d]},c))})]})})]}),a.url&&e.jsx("div",{className:"pt-4 border-t border-yellow-600/30",children:e.jsxs("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-6 py-3 bg-yellow-600 hover:bg-yellow-500 text-white font-semibold rounded-lg transition-colors group",children:["Visit Event Page",e.jsx(fe,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})})]})]})})},Yt=({event:a,onClick:t})=>{const s=o=>new Date(o).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),i=o=>{if(!o)return"";const[d,c]=o.split(":"),b=new Date;return b.setHours(parseInt(d),parseInt(c)),b.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})};return e.jsxs(x.div,{className:"bg-yellow-800/20 backdrop-blur-sm border border-yellow-600/30 rounded-2xl overflow-hidden hover:bg-yellow-800/30 hover:border-yellow-500/50 transition-all duration-300 group cursor-pointer",whileHover:{scale:1.02},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},onClick:()=>t(a),children:[a.image&&e.jsx("div",{className:"h-48 bg-gradient-to-br from-yellow-600 to-amber-500"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"text-xl font-bold text-yellow-100 line-clamp-2 group-hover:text-yellow-50 transition-colors",children:a.title}),e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${a.status==="approved"?"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30":a.status==="pending"?"bg-yellow-500/20 text-yellow-300 border border-yellow-500/30":"bg-red-500/20 text-red-300 border border-red-500/30"}`,children:a.status})]}),e.jsx("p",{className:"text-yellow-200 mb-4 line-clamp-3",children:a.description}),e.jsxs("div",{className:"space-y-2 text-sm text-yellow-300",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(O,{className:"w-4 h-4 mr-2 text-yellow-400"}),e.jsx("span",{children:s(a.date)}),a.startTime&&e.jsxs("span",{className:"ml-2",children:["at ",i(a.startTime)]})]}),a.location&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),e.jsx("span",{children:a.location})]}),a.organizer&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{className:"w-4 h-4 mr-2 text-yellow-400"}),e.jsx("span",{children:a.organizer})]}),a.cost&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),e.jsx("span",{children:a.cost})]})]}),a.tags&&a.tags.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:a.tags.map((o,d)=>e.jsxs("span",{className:"px-2 py-1 text-xs bg-yellow-600/30 text-yellow-200 rounded-full border border-yellow-500/40",children:["#",o]},d))}),a.url&&e.jsx("div",{className:"mt-4",children:e.jsxs("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-yellow-400 hover:text-yellow-300 font-medium transition-colors group",children:["Learn More",e.jsx(fe,{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"})]})})]})]})},Xt=({filters:a,onFiltersChange:t})=>e.jsx(x.div,{className:"bg-yellow-800/20 backdrop-blur-sm border border-yellow-600/30 rounded-2xl p-6 mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-200 mb-2",children:"Search Events"}),e.jsx("input",{type:"text",placeholder:"Search by title or description...",className:"w-full px-4 py-3 bg-yellow-900/30 border border-yellow-600/40 rounded-lg text-yellow-100 placeholder-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",value:a.searchTerm,onChange:s=>t({...a,searchTerm:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-200 mb-2",children:"Date Range"}),e.jsxs("select",{className:"w-full px-4 py-3 bg-yellow-900/30 border border-yellow-600/40 rounded-lg text-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",value:a.dateRange,onChange:s=>t({...a,dateRange:s.target.value}),children:[e.jsx("option",{value:"all",children:"All Dates"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-200 mb-2",children:"Location"}),e.jsx("input",{type:"text",placeholder:"Filter by location...",className:"w-full px-4 py-3 bg-yellow-900/30 border border-yellow-600/40 rounded-lg text-yellow-100 placeholder-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",value:a.location,onChange:s=>t({...a,location:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-200 mb-2",children:"Source"}),e.jsxs("select",{className:"w-full px-4 py-3 bg-yellow-900/30 border border-yellow-600/40 rounded-lg text-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",value:a.source,onChange:s=>t({...a,source:s.target.value}),children:[e.jsx("option",{value:"all",children:"All Sources"}),e.jsx("option",{value:"community",children:"Community"}),e.jsx("option",{value:"education",children:"Education"}),e.jsx("option",{value:"entertainment",children:"Entertainment"}),e.jsx("option",{value:"activism",children:"Activism"})]})]})]})}),Zt=()=>{const[a,t]=m.useState([]),[s,i]=m.useState([]),[o,d]=m.useState(!0),[c,b]=m.useState("checking"),[C,S]=m.useState({pending:0,approved:0,rejected:0,total:0}),[u,h]=m.useState(0),[p,w]=m.useState(null),{error:E,hasError:T,handleAPIError:A,clearError:n,retry:f}=ze({showToast:!0,retryable:!0}),[g,N]=m.useState(null),[k,j]=m.useState(!1),[D,B]=m.useState({dateRange:"all",source:"all",location:"",searchTerm:""}),l=_=>{N(_),j(!0)},y=()=>{j(!1),N(null)},M=async()=>{try{n(),d(!0),b("checking"),console.log("🔄 Loading events from service...");const _=await oe.checkBackendHealth();console.log("📋 Health check result:",_),b(_.available?"connected":"offline");const[R,r]=await Promise.all([oe.getAllEvents(),oe.getEventStats()]);console.log("✅ Events loaded successfully:",R.length),t(R),S(r),w(new Date)}catch(_){console.error("❌ Error loading events:",_),A(_,"events loading"),b("offline")}finally{d(!1)}};m.useEffect(()=>{M()},[]);const V=()=>{h(_=>_+1),f(()=>M())};return m.useEffect(()=>{let _=a.filter(R=>R.status==="approved"||R.status==="published");if(D.searchTerm){const R=D.searchTerm.toLowerCase();_=_.filter(r=>r.title.toLowerCase().includes(R)||r.description.toLowerCase().includes(R))}if(D.location){const R=D.location.toLowerCase();_=_.filter(r=>r.location.toLowerCase().includes(R))}if(D.source!=="all"&&(_=_.filter(R=>R.source===D.source)),D.dateRange!=="all"){const R=new Date,r=new Date(R.getFullYear(),R.getMonth(),R.getDate());_=_.filter(v=>{const L=new Date(v.date);switch(D.dateRange){case"today":return L>=r&&L<new Date(r.getTime()+1440*60*1e3);case"week":const $e=new Date(r.getTime()+10080*60*1e3);return L>=r&&L<=$e;case"month":const He=new Date(r.getFullYear(),r.getMonth()+1,r.getDate());return L>=r&&L<=He;default:return!0}})}i(_)},[a,D]),e.jsxs(de,{children:[e.jsx(ie,{pageName:"Events",dependencies:["Supabase","Events Service"]}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yellow-950 via-yellow-900 to-amber-900",children:[e.jsx(W,{}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(x.h1,{className:"text-5xl font-black heading-block mb-4 uppercase",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsx("span",{className:"bg-gradient-to-r from-yellow-400 to-amber-300 bg-clip-text text-transparent",children:"Community Events"})}),e.jsx(x.p,{className:"text-xl text-yellow-100 font-light",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:"Liberation through connection • Discover Black QTIPOC community events"})]}),e.jsxs(x.div,{className:"flex items-center space-x-4",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.4},children:[e.jsx("div",{className:"bg-yellow-800/30 backdrop-blur-sm border border-yellow-600/30 rounded-lg px-4 py-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[c==="checking"?e.jsx(te,{size:"sm",color:"yellow"}):e.jsx("div",{className:`w-2 h-2 rounded-full ${c==="connected"?"bg-emerald-400":"bg-red-400"}`}),e.jsx("span",{className:"text-xs text-yellow-200",children:c==="connected"?"Live Data":c==="offline"?"Mock Data":"Connecting..."}),p&&c==="connected"&&e.jsxs("span",{className:"text-xs text-yellow-300 ml-2",children:["• ",p.toLocaleTimeString()]})]})}),e.jsxs("div",{className:"bg-yellow-800/30 backdrop-blur-sm border border-yellow-600/30 rounded-lg px-6 py-4",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-300",children:C.total}),e.jsx("div",{className:"text-sm text-yellow-200",children:"Total Events"})]}),e.jsxs("div",{className:"bg-yellow-800/30 backdrop-blur-sm border border-yellow-600/30 rounded-lg px-6 py-4",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:C.approved}),e.jsx("div",{className:"text-sm text-yellow-200",children:"Approved"})]})]})]})}),T&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsx("div",{className:"bg-red-900/30 backdrop-blur-sm border border-red-700/30 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx(Fe,{className:"w-6 h-6 text-red-400 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-red-300 font-bold text-lg mb-2",children:"Connection Error"}),e.jsx("p",{className:"text-red-200 mb-4",children:E?.message}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:V,className:"flex items-center px-4 py-2 bg-red-600 hover:bg-red-500 text-white font-medium rounded-lg transition-colors",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Retry Connection"]}),e.jsx("button",{onClick:n,className:"text-red-300 hover:text-red-200 font-medium",children:"Dismiss"}),u>0&&e.jsxs("span",{className:"text-red-300 text-sm",children:["Retry attempts: ",u]})]})]})]})})}),c==="offline"&&!T&&e.jsxs(x.div,{className:"bg-amber-900/40 backdrop-blur-sm border border-amber-600/40 rounded-2xl p-6 mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.7},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ue,{className:"w-5 h-5 text-amber-400"}),e.jsx("span",{className:"text-amber-300 font-bold heading-block text-sm uppercase",children:"SHOWING EXAMPLE COMMUNITY EVENTS"})]}),e.jsxs("button",{onClick:V,className:"flex items-center text-amber-400 hover:text-amber-300 text-sm font-medium",children:[e.jsx(K,{className:"w-4 h-4 mr-1"}),"Retry Connection"]})]}),e.jsx("p",{className:"text-amber-100 leading-relaxed",children:"These are example events to demonstrate functionality. The community events backend is not currently connected. Real community events will be displayed when the events API is available."})]}),e.jsx(Xt,{filters:D,onFiltersChange:B}),o?e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-24",children:[e.jsx(te,{size:"xl",color:"yellow",text:"Loading Events"}),e.jsx("p",{className:"text-yellow-200 font-light mt-6",children:"Fetching the latest community events and gatherings..."})]}):s.length>0?e.jsx(x.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.8},children:s.map((_,R)=>e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1*R},children:e.jsx(Yt,{event:_,onClick:l})},_.id))}):e.jsx(x.div,{className:"text-center py-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsxs("div",{className:"bg-yellow-800/20 backdrop-blur-sm border border-yellow-600/30 rounded-2xl p-12 max-w-md mx-auto",children:[e.jsx(O,{className:"w-16 h-16 text-yellow-400 mx-auto mb-6"}),e.jsx("h3",{className:"text-2xl font-bold text-yellow-100 mb-4",children:"No events found"}),e.jsx("p",{className:"text-yellow-200",children:D.searchTerm||D.location||D.source!=="all"||D.dateRange!=="all"?"Try adjusting your filters to discover more community events.":"Check back soon for upcoming Black QTIPOC community events."})]})}),e.jsx(x.div,{className:"mt-16 bg-gradient-to-br from-amber-900 via-yellow-900 to-yellow-800 rounded-2xl p-8 border border-yellow-600/30",initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.8,delay:1},children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[e.jsx(x.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.6,delay:1.2},children:e.jsx(Se,{className:"w-16 h-16 text-yellow-400 mx-auto mb-6"})}),e.jsx(x.h3,{className:"text-3xl font-black heading-block mb-6 uppercase",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:1.4},children:e.jsx("span",{className:"bg-gradient-to-r from-yellow-300 to-amber-200 bg-clip-text text-transparent",children:"Building Community Together"})}),e.jsx(x.p,{className:"text-lg text-yellow-100 mb-8 font-light leading-relaxed",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:1.6},children:"These events are curated to support and celebrate Black QTIPOC communities. Join us in creating spaces of liberation, joy, and collective power."}),e.jsxs(x.div,{className:"flex flex-col sm:flex-row justify-center items-center space-y-4 sm:space-y-0 sm:space-x-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:1.8},children:[e.jsx("button",{className:"bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-400 hover:to-amber-400 text-yellow-950 font-bold px-8 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg",children:"Submit an Event"}),e.jsx("button",{className:"bg-transparent border-2 border-yellow-400 hover:bg-yellow-400/10 text-yellow-100 font-bold px-8 py-4 rounded-xl transition-all duration-300 transform hover:scale-105",children:"Join Our Community"})]})]})})]}),e.jsx(ue,{}),e.jsx(qe,{children:k&&e.jsx(Vt,{event:g,isOpen:k,onClose:y})})]})]})};function es(){const{pathname:a}=We();return xe.useEffect(()=>{window.scrollTo(0,0)},[a]),null}const ts=()=>e.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 z-50 bg-blue-600 text-white px-4 py-2",children:"Skip to main content"}),ce=({children:a})=>e.jsxs(e.Fragment,{children:[e.jsx(W,{}),a]}),ss=()=>e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-indigo-900 to-slate-900",children:[e.jsx(W,{}),e.jsxs("section",{className:"relative py-20 bg-gradient-to-br from-purple-950 via-indigo-950 to-emerald-950 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-purple-500 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-48 h-48 bg-emerald-500 rounded-full blur-3xl animate-pulse"})]}),e.jsx("div",{className:"relative z-10 max-w-6xl mx-auto px-8 text-center",children:e.jsxs(x.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[e.jsxs("h1",{className:"text-6xl font-black text-white mb-8 leading-tight",children:[e.jsx("span",{className:"bg-gradient-to-r from-purple-400 to-emerald-400 bg-clip-text text-transparent",children:"BLKOUT"}),e.jsx("br",{}),"Community Platform"]}),e.jsx("p",{className:"text-xl text-indigo-200 mb-12 max-w-3xl mx-auto leading-relaxed",children:"Liberation through collective action and cooperative ownership. Building power, sharing resources, and centering Black queer joy."}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-6 mb-16",children:[e.jsx(x.a,{href:"/governance",className:"px-8 py-4 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold rounded-full hover:from-purple-700 hover:to-indigo-700 transition-all duration-300 shadow-lg hover:shadow-xl",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Community Governance"}),e.jsx(x.a,{href:"/movement",className:"px-8 py-4 bg-gradient-to-r from-emerald-600 to-teal-600 text-white font-bold rounded-full hover:from-emerald-700 hover:to-teal-700 transition-all duration-300 shadow-lg hover:shadow-xl",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Our Movement"}),e.jsx(x.a,{href:"/newsroom",className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-bold rounded-full hover:from-blue-700 hover:to-cyan-700 transition-all duration-300 shadow-lg hover:shadow-xl",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Newsroom"}),e.jsx(x.a,{href:"/events",className:"px-8 py-4 bg-gradient-to-r from-orange-600 to-red-600 text-white font-bold rounded-full hover:from-orange-700 hover:to-red-700 transition-all duration-300 shadow-lg hover:shadow-xl",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Events"})]})]})})]}),e.jsx("section",{className:"py-16 bg-slate-900/50",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-8",children:[e.jsx("h2",{className:"text-4xl font-bold text-white text-center mb-12",children:"Our Values"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsxs(x.div,{className:"text-center p-6 bg-white/5 rounded-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx("div",{className:"text-4xl mb-4",children:"🏳️‍⚧️"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Trans Liberation"}),e.jsx("p",{className:"text-gray-300",children:"Centering trans joy and safety in all we do"})]}),e.jsxs(x.div,{className:"text-center p-6 bg-white/5 rounded-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[e.jsx("div",{className:"text-4xl mb-4",children:"🤝"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Cooperative Ownership"}),e.jsx("p",{className:"text-gray-300",children:"Community-owned, democratically governed"})]}),e.jsxs(x.div,{className:"text-center p-6 bg-white/5 rounded-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[e.jsx("div",{className:"text-4xl mb-4",children:"✊🏿"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Black Power"}),e.jsx("p",{className:"text-gray-300",children:"Liberation through collective action"})]})]})]})}),e.jsx("footer",{className:"bg-slate-950 py-12",children:e.jsx("div",{className:"max-w-6xl mx-auto px-8 text-center",children:e.jsx("p",{className:"text-gray-400",children:"© 2024 BLKOUT - Community Platform | Liberation through Cooperation"})})})]}),as=()=>e.jsx(Ze,{}),is=()=>e.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-6xl font-bold mb-4",children:"404"}),e.jsx("p",{className:"text-xl mb-8",children:"Page not found"}),e.jsx("a",{href:"/",className:"text-blue-400 hover:text-blue-300",children:"← Back to Home"})]})});function rs(){return e.jsxs(Je,{children:[e.jsx(ts,{}),e.jsx(es,{}),e.jsx("div",{className:"fixed top-0 right-0 bg-green-600 text-white px-3 py-1 text-sm z-50",children:"SELECTIVE MODE: Heavy components excluded"}),e.jsxs(Ke,{children:[e.jsx(I,{path:"/",element:e.jsx(ss,{})}),e.jsx(I,{path:"/governance",element:e.jsx(as,{})}),e.jsx(I,{path:"/movement",element:e.jsx(ce,{children:e.jsx(Et,{})})}),e.jsx(I,{path:"/newsroom",element:e.jsx(ce,{children:e.jsx(Kt,{})})}),e.jsx(I,{path:"/events",element:e.jsx(ce,{children:e.jsx(Zt,{})})}),e.jsx(I,{path:"/admin",element:e.jsx(G,{children:e.jsx(_t,{})})}),e.jsx(I,{path:"/admin/moderation",element:e.jsx(G,{children:e.jsx(Bt,{})})}),e.jsx(I,{path:"/admin/events",element:e.jsx(G,{children:e.jsx(Ot,{})})}),e.jsx(I,{path:"/admin/newsroom",element:e.jsx(G,{children:e.jsx(Ut,{})})}),e.jsx(I,{path:"/admin/governance",element:e.jsx(G,{children:e.jsx(Xe,{})})}),e.jsx(I,{path:"*",element:e.jsx(is,{})})]})]})}jt.createRoot(document.getElementById("root")).render(e.jsx(xe.StrictMode,{children:e.jsx(rs,{})}));
